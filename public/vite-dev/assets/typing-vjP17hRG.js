import{J as Kl,p as fo,h as yi,f as ei}from"./Validators-Cc34aJUd.js";import{r as Ge,t as fe}from"./index-DN3rM4CW.js";import{e as Zl,D as Gl}from"./index-BgTJAFtk.js";import{L as Xl,a as Yu}from"./vue-dompurify-html-CEAHYyWB.js";import{r as Yl,c as Ql}from"./utils.esm-DpfOb1Dc.js";import{f as ec}from"./exports-C0r44Qw4.js";import{ar as tc,_ as nc,n as ic,o as rc}from"./_plugin-vue_export-helper-BDdLN-Za.js";import{a as oc,c as Qu,g as uc}from"./_commonjsHelpers-BosuxZz1.js";const sc=oc(tc);function Zn(t,e){Ge(2,arguments);var n=fe(t),i=fe(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function ac(t,e){Ge(2,arguments);var n=fe(t),i=fe(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function lc(t,e){Ge(2,arguments);var n=fe(t),i=fe(e);return n.getTime()-i.getTime()}function cc(t){Ge(1,arguments);var e=fe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function fc(t){Ge(1,arguments);var e=fe(t);return Zl(e).getTime()===cc(e).getTime()}function dc(t,e){Ge(2,arguments);var n=fe(t),i=fe(e),r=Zn(n,i),o=Math.abs(ac(n,i)),u;if(o<1)u=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);var s=Zn(n,i)===-r;fc(fe(t))&&o===1&&Zn(t,i)===1&&(s=!1),u=r*(o-s)}return u===0?0:u}function hc(t,e){Ge(2,arguments);var n=lc(t,e)/1e3;return n>0?Math.floor(n):Math.ceil(n)}function mc(t){return Gl({},t)}var ho=1440,pc=2520,Ti=43200,gc=86400;function _c(t,e,n){Ge(2,arguments);var i=n||{},r=i.locale||Kl;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=Zn(t,e);if(isNaN(o))throw new RangeError("Invalid time value");var u=mc(i);u.addSuffix=!!i.addSuffix,u.comparison=o;var s,a;o>0?(s=fe(e),a=fe(t)):(s=fe(t),a=fe(e));var l=hc(a,s),c=(fo(a)-fo(s))/1e3,f=Math.round((l-c)/60),d;if(f<2)return i.includeSeconds?l<5?r.formatDistance("lessThanXSeconds",5,u):l<10?r.formatDistance("lessThanXSeconds",10,u):l<20?r.formatDistance("lessThanXSeconds",20,u):l<40?r.formatDistance("halfAMinute",null,u):l<60?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",1,u):f===0?r.formatDistance("lessThanXMinutes",1,u):r.formatDistance("xMinutes",f,u);if(f<45)return r.formatDistance("xMinutes",f,u);if(f<90)return r.formatDistance("aboutXHours",1,u);if(f<ho){var g=Math.round(f/60);return r.formatDistance("aboutXHours",g,u)}else{if(f<pc)return r.formatDistance("xDays",1,u);if(f<Ti){var h=Math.round(f/ho);return r.formatDistance("xDays",h,u)}else if(f<gc)return d=Math.round(f/Ti),r.formatDistance("aboutXMonths",d,u)}if(d=dc(a,s),d<12){var w=Math.round(f/Ti);return r.formatDistance("xMonths",w,u)}else{var v=d%12,M=Math.floor(d/12);return v<3?r.formatDistance("aboutXYears",M,u):v<9?r.formatDistance("overXYears",M,u):r.formatDistance("almostXYears",M+1,u)}}function bc(t,e){return Ge(1,arguments),_c(t,Date.now(),e)}function yc(t,e){Ge(2,arguments);var n=fe(t),i=fe(e);return n.getFullYear()===i.getFullYear()}var ti=200,de=function(){};de.prototype.append=function(e){return e.length?(e=de.from(e),!this.length&&e||e.length<ti&&this.leafAppend(e)||this.length<ti&&e.leafPrepend(this)||this.appendInner(e)):this};de.prototype.prepend=function(e){return e.length?de.from(e).append(this):this};de.prototype.appendInner=function(e){return new kc(this,e)};de.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?de.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};de.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};de.prototype.forEach=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)};de.prototype.map=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(o,u){return r.push(e(o,u))},n,i),r};de.from=function(e){return e instanceof de?e:e&&e.length?new es(e):de.empty};var es=function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,u,s){for(var a=o;a<u;a++)if(r(this.values[a],s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,u,s){for(var a=o-1;a>=u;a--)if(r(this.values[a],s+a)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=ti)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=ti)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(de);de.empty=new es([]);var kc=function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,o,u){var s=this.left.length;if(r<s&&this.left.forEachInner(i,r,Math.min(o,s),u)===!1||o>s&&this.right.forEachInner(i,Math.max(r-s,0),Math.min(this.length,o)-s,u+s)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,o,u){var s=this.left.length;if(r>s&&this.right.forEachInvertedInner(i,r-s,Math.max(o,s)-s,u+s)===!1||o<s&&this.left.forEachInvertedInner(i,Math.min(r,s),o,u)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(i,r):i>=o?this.right.slice(i-o,r-o):this.left.slice(i,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(de),ts=de;function ae(t){this.content=t}ae.prototype={constructor:ae,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),o=i.content.slice();return r==-1?o.push(n||t,e):(o[r+1]=e,n&&(o[r]=n)),new ae(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ae(n)},addToStart:function(t,e){return new ae([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ae(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),o=i.find(t);return r.splice(o==-1?r.length:o,0,e,n),new ae(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ae.from(t),t.size?new ae(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ae.from(t),t.size?new ae(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ae.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ae.from=function(t){if(t instanceof ae)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ae(e)};function ns(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),o=e.child(i);if(r==o){n+=r.nodeSize;continue}if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(let u=0;r.text[u]==o.text[u];u++)n++;return n}if(r.content.size||o.content.size){let u=ns(r.content,o.content,n+1);if(u!=null)return u}n+=r.nodeSize}}function is(t,e,n,i){for(let r=t.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:n,b:i};let u=t.child(--r),s=e.child(--o),a=u.nodeSize;if(u==s){n-=a,i-=a;continue}if(!u.sameMarkup(s))return{a:n,b:i};if(u.isText&&u.text!=s.text){let l=0,c=Math.min(u.text.length,s.text.length);for(;l<c&&u.text[u.text.length-l-1]==s.text[s.text.length-l-1];)l++,n--,i--;return{a:n,b:i}}if(u.content.size||s.content.size){let l=is(u.content,s.content,n-1,i-1);if(l)return l}n-=a,i-=a}}class T{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,r=0,o){for(let u=0,s=0;s<n;u++){let a=this.content[u],l=s+a.nodeSize;if(l>e&&i(a,r+s,o||null,u)!==!1&&a.content.size){let c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),i,r+c)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,r){let o="",u=!0;return this.nodesBetween(e,n,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,n-a):s.isLeaf?r?typeof r=="function"?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&i&&(u?u=!1:o+=i),o+=l},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,r=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(i)&&(r[r.length-1]=n.withText(n.text+i.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new T(r,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let i=[],r=0;if(n>e)for(let o=0,u=0;u<n;o++){let s=this.content[o],a=u+s.nodeSize;a>e&&((u<e||a>n)&&(s.isText?s=s.cut(Math.max(0,e-u),Math.min(s.text.length,n-u)):s=s.cut(Math.max(0,e-u-1),Math.min(s.content.size,n-u-1))),i.push(s),r+=s.nodeSize),u=a}return new T(i,r)}cutByIndex(e,n){return e==n?T.empty:e==0&&n==this.content.length?this:new T(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let r=this.content.slice(),o=this.size+n.nodeSize-i.nodeSize;return r[e]=n,new T(r,o)}addToStart(e){return new T([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new T(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let r=this.content[n];e(r,i,n),i+=r.nodeSize}}findDiffStart(e,n=0){return ns(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return is(this,e,n,i)}findIndex(e,n=-1){if(e==0)return qn(0,e);if(e==this.size)return qn(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,r=0;;i++){let o=this.child(i),u=r+o.nodeSize;if(u>=e)return u==e||n>0?qn(i+1,u):qn(i,r);r=u}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return T.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new T(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return T.empty;let n,i=0;for(let r=0;r<e.length;r++){let o=e[r];i+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(n||(n=e.slice(0,r)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new T(n||e,i)}static from(e){if(!e)return T.empty;if(e instanceof T)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new T([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}T.empty=new T([],0);const Ni={index:0,offset:0};function qn(t,e){return Ni.index=t,Ni.offset=e,Ni}function ni(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!ni(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!ni(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}class Z{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,i=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!i&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,r)),n.push(this),i=!0),n&&n.push(o)}}return n||(n=e.slice()),i||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ni(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[n.type];if(!i)throw new RangeError(`There is no mark type ${n.type} in this schema`);let r=i.create(n.attrs);return i.checkAttrs(r.attrs),r}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(n[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Z.none;if(e instanceof Z)return[e];let n=e.slice();return n.sort((i,r)=>i.type.rank-r.type.rank),n}}Z.none=[];class ii extends Error{}class F{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=us(this.content,e+this.openStart,n);return i&&new F(i,this.openStart,this.openEnd)}removeBetween(e,n){return new F(rs(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return F.empty;let i=n.openStart||0,r=n.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new F(T.fromJSON(e,n.content),i,r)}static maxOpen(e,n=!0){let i=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)i++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)r++;return new F(e,i,r)}}F.empty=new F(T.empty,0,0);function rs(t,e,n){let{index:i,offset:r}=t.findIndex(e),o=t.maybeChild(i),{index:u,offset:s}=t.findIndex(n);if(r==e||o.isText){if(s!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(i,o.copy(rs(o.content,e-r-1,n-r-1)))}function us(t,e,n,i){let{index:r,offset:o}=t.findIndex(e),u=t.maybeChild(r);if(o==e||u.isText)return t.cut(0,e).append(n).append(t.cut(e));let s=us(u.content,e-o-1,n);return s&&t.replaceChild(r,u.copy(s))}function xc(t,e,n){if(n.openStart>t.depth)throw new ii("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ii("Inconsistent open depths");return ss(t,e,n,0)}function ss(t,e,n,i){let r=t.index(i),o=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let u=ss(t,e,n,i+1);return o.copy(o.content.replaceChild(r,u))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==i&&e.depth==i){let u=t.parent,s=u.content;return Ot(u,s.cut(0,t.parentOffset).append(n.content).append(s.cut(e.parentOffset)))}else{let{start:u,end:s}=wc(n,t);return Ot(o,ls(t,u,s,e,i))}else return Ot(o,ri(t,e,i))}function as(t,e){if(!e.type.compatibleContent(t.type))throw new ii("Cannot join "+e.type.name+" onto "+t.type.name)}function cr(t,e,n){let i=t.node(n);return as(i,e.node(n)),i}function Mt(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function pn(t,e,n,i){let r=(e||t).node(n),o=0,u=e?e.index(n):r.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Mt(t.nodeAfter,i),o++));for(let s=o;s<u;s++)Mt(r.child(s),i);e&&e.depth==n&&e.textOffset&&Mt(e.nodeBefore,i)}function Ot(t,e){return t.type.checkContent(e),t.copy(e)}function ls(t,e,n,i,r){let o=t.depth>r&&cr(t,e,r+1),u=i.depth>r&&cr(n,i,r+1),s=[];return pn(null,t,r,s),o&&u&&e.index(r)==n.index(r)?(as(o,u),Mt(Ot(o,ls(t,e,n,i,r+1)),s)):(o&&Mt(Ot(o,ri(t,e,r+1)),s),pn(e,n,r,s),u&&Mt(Ot(u,ri(n,i,r+1)),s)),pn(i,null,r,s),new T(s)}function ri(t,e,n){let i=[];if(pn(null,t,n,i),t.depth>n){let r=cr(t,e,n+1);Mt(Ot(r,ri(t,e,n+1)),i)}return pn(e,null,n,i),new T(i)}function wc(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(T.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}class xn{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(n);return i?e.child(n).cut(i):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[n*3],r=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)r+=i.child(o).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Z.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),r=e.maybeChild(n);if(!i){let s=i;i=r,r=s}let o=i.marks;for(var u=0;u<o.length;u++)o[u].type.spec.inclusive===!1&&(!r||!o[u].isInSet(r.marks))&&(o=o[u--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!r||!i[o].isInSet(r.marks))&&(i=i[o--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new oi(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],r=0,o=n;for(let u=e;;){let{index:s,offset:a}=u.content.findIndex(o),l=o-a;if(i.push(u,s,r+a),!l||(u=u.child(s),u.isText))break;o=l-1,r+=a+1}return new xn(n,i,o)}static resolveCached(e,n){let i=mo.get(e);if(i)for(let o=0;o<i.elts.length;o++){let u=i.elts[o];if(u.pos==n)return u}else mo.set(e,i=new jc);let r=i.elts[i.i]=xn.resolve(e,n);return i.i=(i.i+1)%Cc,r}}class jc{constructor(){this.elts=[],this.i=0}}const Cc=12,mo=new WeakMap;class oi{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vc=Object.create(null);let it=class fr{constructor(e,n,i,r=Z.none){this.type=e,this.attrs=n,this.marks=r,this.content=i||T.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,r=0){this.content.nodesBetween(e,n,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,r){return this.content.textBetween(e,n,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&ni(this.attrs,n||e.defaultAttrs||vc)&&Z.sameSet(this.marks,i||Z.none)}copy(e=null){return e==this.content?this:new fr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new fr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return F.empty;let r=this.resolve(e),o=this.resolve(n),u=i?0:r.sharedDepth(n),s=r.start(u),l=r.node(u).content.cut(r.pos-s,o.pos-s);return new F(l,r.depth-u,o.depth-u)}replace(e,n,i){return xc(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}}resolve(e){return xn.resolveCached(this,e)}resolveNoCache(e){return xn.resolve(this,e)}rangeHasMark(e,n,i){let r=!1;return n>e&&this.nodesBetween(e,n,o=>(i.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),cs(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=T.empty,r=0,o=i.childCount){let u=this.contentMatchAt(e).matchFragment(i,r,o),s=u&&u.matchFragment(this.content,n);if(!s||!s.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(i.child(a).marks))return!1;return!0}canReplaceWith(e,n,i,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(i),u=o&&o.matchFragment(this.content,n);return u?u.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Z.none;for(let n=0;n<this.marks.length;n++){let i=this.marks[n];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!Z.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let r=T.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,r,i);return o.type.checkAttrs(o.attrs),o}};it.prototype.text=void 0;class ui extends it{constructor(e,n,i,r){if(super(e,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cs(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ui(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ui(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function cs(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class It{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new Dc(e,n);if(i.next==null)return It.empty;let r=fs(i);i.next&&i.err("Unexpected trailing text");let o=Nc(Tc(r));return Fc(o,i),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let r=this;for(let o=n;r&&o<i;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let r=[this];function o(u,s){let a=u.matchFragment(e,i);if(a&&(!n||a.validEnd))return T.from(s.map(l=>l.createAndFill()));for(let l=0;l<u.next.length;l++){let{type:c,next:f}=u.next[l];if(!(c.isText||c.hasRequiredAttrs())&&r.indexOf(f)==-1){r.push(f);let d=o(f,s.concat(c));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),o=r.match;if(o.matchType(e)){let u=[];for(let s=r;s.type;s=s.via)u.push(s.type);return u.reverse()}for(let u=0;u<o.next.length;u++){let{type:s,next:a}=o.next[u];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in n)&&(!r.type||a.validEnd)&&(i.push({match:s.contentMatch,type:s,via:r}),n[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&n(i.next[r].next)}return n(this),e.map((i,r)=>{let o=r+(i.validEnd?"*":" ")+" ";for(let u=0;u<i.next.length;u++)o+=(u?", ":"")+i.next[u].type.name+"->"+e.indexOf(i.next[u].next);return o}).join(`
`)}}It.empty=new It(!0);class Dc{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function fs(t){let e=[];do e.push(Sc(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Sc(t){let e=[];do e.push(Ec(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Ec(t){let e=Oc(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Ac(t,e);else break;return e}function po(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Ac(t,e){let n=po(t),i=n;return t.eat(",")&&(t.next!="}"?i=po(t):i=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function Mc(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let o in n){let u=n[o];u.groups.indexOf(e)>-1&&r.push(u)}return r.length==0&&t.err("No node type or group '"+e+"' found"),r}function Oc(t){if(t.eat("(")){let e=fs(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Mc(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Tc(t){let e=[[]];return r(o(t,0),n()),e;function n(){return e.push([])-1}function i(u,s,a){let l={term:a,to:s};return e[u].push(l),l}function r(u,s){u.forEach(a=>a.to=s)}function o(u,s){if(u.type=="choice")return u.exprs.reduce((a,l)=>a.concat(o(l,s)),[]);if(u.type=="seq")for(let a=0;;a++){let l=o(u.exprs[a],s);if(a==u.exprs.length-1)return l;r(l,s=n())}else if(u.type=="star"){let a=n();return i(s,a),r(o(u.expr,a),a),[i(a)]}else if(u.type=="plus"){let a=n();return r(o(u.expr,s),a),r(o(u.expr,a),a),[i(a)]}else{if(u.type=="opt")return[i(s)].concat(o(u.expr,s));if(u.type=="range"){let a=s;for(let l=0;l<u.min;l++){let c=n();r(o(u.expr,a),c),a=c}if(u.max==-1)r(o(u.expr,a),a);else for(let l=u.min;l<u.max;l++){let c=n();i(a,c),r(o(u.expr,a),c),a=c}return[i(a)]}else{if(u.type=="name")return[i(s,void 0,u.value)];throw new Error("Unknown expr type")}}}}function ds(t,e){return e-t}function go(t,e){let n=[];return i(e),n.sort(ds);function i(r){let o=t[r];if(o.length==1&&!o[0].term)return i(o[0].to);n.push(r);for(let u=0;u<o.length;u++){let{term:s,to:a}=o[u];!s&&n.indexOf(a)==-1&&i(a)}}}function Nc(t){let e=Object.create(null);return n(go(t,0));function n(i){let r=[];i.forEach(u=>{t[u].forEach(({term:s,to:a})=>{if(!s)return;let l;for(let c=0;c<r.length;c++)r[c][0]==s&&(l=r[c][1]);go(t,a).forEach(c=>{l||r.push([s,l=[]]),l.indexOf(c)==-1&&l.push(c)})})});let o=e[i.join(",")]=new It(i.indexOf(t.length-1)>-1);for(let u=0;u<r.length;u++){let s=r[u][1].sort(ds);o.next.push({type:r[u][0],next:e[s.join(",")]||n(s)})}return o}}function Fc(t,e){for(let n=0,i=[t];n<i.length;n++){let r=i[n],o=!r.validEnd,u=[];for(let s=0;s<r.next.length;s++){let{type:a,next:l}=r.next[s];u.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),i.indexOf(l)==-1&&i.push(l)}o&&e.err("Only non-generatable nodes ("+u.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hs(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function ms(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(r===void 0){let o=t[i];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=r}return n}function ps(t,e,n,i){for(let r in e)if(!(r in t))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let r in t){let o=t[r];o.validate&&o.validate(e[r])}}function gs(t,e){let n=Object.create(null);if(e)for(let i in e)n[i]=new Rc(t,i,e[i]);return n}let _o=class _s{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=gs(e,i.attrs),this.defaultAttrs=hs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==It.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ms(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new it(this,this.computeAttrs(e),T.from(n),Z.setFrom(i))}createChecked(e=null,n,i){return n=T.from(n),this.checkContent(n),new it(this,this.computeAttrs(e),n,Z.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),n=T.from(n),n.size){let u=this.contentMatch.fillBefore(n);if(!u)return null;n=u.append(n)}let r=this.contentMatch.matchFragment(n),o=r&&r.fillBefore(T.empty,!0);return o?new it(this,e,n.append(o),Z.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ps(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:Z.none:e}static compile(e,n){let i=Object.create(null);e.forEach((o,u)=>i[o]=new _s(o,n,u));let r=n.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let o in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function Ic(t,e,n){let i=n.split("|");return r=>{let o=r===null?"null":typeof r;if(i.indexOf(o)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${t}, got ${o}`)}}class Rc{constructor(e,n,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?Ic(e,n,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class ki{constructor(e,n,i,r){this.name=e,this.rank=n,this.schema=i,this.spec=r,this.attrs=gs(e,r.attrs),this.excluded=null;let o=hs(this.attrs);this.instance=o?new Z(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Z(this,ms(this.attrs,e))}static compile(e,n){let i=Object.create(null),r=0;return e.forEach((o,u)=>i[o]=new ki(o,r++,n,u)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){ps(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Br{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=ae.from(e.nodes),n.marks=ae.from(e.marks||{}),this.nodes=_o.compile(this.spec.nodes,this),this.marks=ki.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],u=o.spec.content||"",s=o.spec.marks;if(o.contentMatch=i[u]||(i[u]=It.parse(u,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=s=="_"?null:s?bo(this,s.split(" ")):s==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],u=o.spec.excludes;o.excluded=u==null?[o]:u==""?[]:bo(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof _o){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,r)}text(e,n){let i=this.nodes.text;return new ui(i,i.defaultAttrs,e,Z.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return it.fromJSON(this,e)}markFromJSON(e){return Z.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function bo(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],o=t.marks[r],u=o;if(o)n.push(o);else for(let s in t.marks){let a=t.marks[s];(r=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(r)>-1)&&n.push(u=a)}if(!u)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}function Bc(t){return t.tag!=null}function zc(t){return t.style!=null}class wn{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let i=this.matchedStyles=[];n.forEach(r=>{if(Bc(r))this.tags.push(r);else if(zc(r)){let o=/[^=]*/.exec(r.style)[0];i.indexOf(o)<0&&i.push(o),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let i=new ko(this,n,!1);return i.addAll(e,Z.none,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new ko(this,n,!0);return i.addAll(e,Z.none,n.from,n.to),F.maxOpen(i.finish())}matchTag(e,n,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(qc(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let u=o.getAttrs(e);if(u===!1)continue;o.attrs=u||void 0}return o}}}matchStyle(e,n,i,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let u=this.styles[o],s=u.style;if(!(s.indexOf(e)!=0||u.context&&!i.matchesContext(u.context)||s.length>e.length&&(s.charCodeAt(e.length)!=61||s.slice(e.length+1)!=n))){if(u.getAttrs){let a=u.getAttrs(n);if(a===!1)continue;u.attrs=a||void 0}return u}}}static schemaRules(e){let n=[];function i(r){let o=r.priority==null?50:r.priority,u=0;for(;u<n.length;u++){let s=n[u];if((s.priority==null?50:s.priority)<o)break}n.splice(u,0,r)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(u=>{i(u=xo(u)),u.mark||u.ignore||u.clearMark||(u.mark=r)})}for(let r in e.nodes){let o=e.nodes[r].spec.parseDOM;o&&o.forEach(u=>{i(u=xo(u)),u.node||u.ignore||u.mark||(u.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new wn(e,wn.schemaRules(e)))}}const bs={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Pc={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ys={ol:!0,ul:!0},si=1,ai=2,Gn=4;function yo(t,e,n){return e!=null?(e?si:0)|(e==="full"?ai:0):t&&t.whitespace=="pre"?si|ai:n&-5}class $n{constructor(e,n,i,r,o,u){this.type=e,this.attrs=n,this.marks=i,this.solid=r,this.options=u,this.content=[],this.activeMarks=Z.none,this.match=o||(u&Gn?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(T.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&si)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let o=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let n=T.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(T.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bs.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ko{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0;let r=n.topNode,o,u=yo(null,n.preserveWhitespace,0)|(i?Gn:0);r?o=new $n(r.type,r.attrs,Z.none,!0,n.topMatch||r.type.contentMatch,u):i?o=new $n(null,null,Z.none,!0,null,u):o=new $n(e.schema.topNodeType,null,Z.none,!0,null,u),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let i=e.nodeValue,r=this.top;if(r.options&ai||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(r.options&si)r.options&ai?i=i.replace(/\r\n?/g,`
`):i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],u=e.previousSibling;(!o||u&&u.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,i){let r=e.nodeName.toLowerCase(),o;ys.hasOwnProperty(r)&&this.parser.normalizeLists&&Lc(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,i));if(u?u.ignore:Pc.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let s,a=this.top,l=this.needsBlock;if(bs.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let c=u&&u.skip?n:this.readStyles(e,n);c&&this.addAll(e,c),s&&this.sync(a),this.needsBlock=l}else{let s=this.readStyles(e,n);s&&this.addElementByRule(e,u,s,u.consuming===!1?o:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let i=e.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],u=i.getPropertyValue(o);if(u)for(let s=void 0;;){let a=this.parser.matchStyle(o,u,this,s);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(l=>!a.clearMark(l)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)s=a;else break}}return n}addElementByRule(e,n,i,r){let o,u;if(n.node)if(u=this.parser.schema.nodes[n.node],u.isLeaf)this.insertNode(u.create(n.attrs),i)||this.leafFallback(e,i);else{let a=this.enter(u,n.attrs||null,i,n.preserveWhitespace);a&&(o=!0,i=a)}else{let a=this.parser.schema.marks[n.mark];i=i.concat(a.create(n.attrs))}let s=this.top;if(u&&u.isLeaf)this.findInside(e);else if(r)this.addElement(e,i,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,i));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,i)}o&&this.sync(s)&&this.open--}addAll(e,n,i,r){let o=i||0;for(let u=i?e.childNodes[i]:e.firstChild,s=r==null?null:e.childNodes[r];u!=s;u=u.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(u,n);this.findAtPoint(e,o)}findPlace(e,n){let i,r;for(let o=this.open;o>=0;o--){let u=this.nodes[o],s=u.findWrapping(e);if(s&&(!i||i.length>s.length)&&(i=s,r=u,!s.length)||u.solid)break}if(!i)return null;this.sync(r);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(n=this.enterInner(r,null,n))}let i=this.findPlace(e,n);if(i){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(e.type));let o=Z.none;for(let u of i.concat(e.marks))(r.type?r.type.allowsMarkType(u.type):wo(u.type,e.type))&&(o=u.addToSet(o));return r.content.push(e.mark(o)),!0}return!1}enter(e,n,i,r){let o=this.findPlace(e.create(n),i);return o&&(o=this.enterInner(e,n,i,!0,r)),o}enterInner(e,n,i,r=!1,o){this.closeExtra();let u=this.top;u.match=u.match&&u.match.matchType(e);let s=yo(e,o,u.options);u.options&Gn&&u.content.length==0&&(s|=Gn);let a=Z.none;return i=i.filter(l=>(u.type?u.type.allowsMarkType(l.type):wo(l.type,e))?(a=l.addToSet(a),!1):!0),this.nodes.push(new $n(e,n,a,r,null,s)),this.open++,i}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),o=-(i?i.depth+1:0)+(r?0:1),u=(s,a)=>{for(;s>=0;s--){let l=n[s];if(l==""){if(s==n.length-1||s==0)continue;for(;a>=o;a--)if(u(s-1,a))return!0;return!1}else{let c=a>0||a==0&&r?this.nodes[a].type:i&&a>=o?i.node(a-o).type:null;if(!c||c.name!=l&&c.groups.indexOf(l)==-1)return!1;a--}}return!0};return u(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}}function Lc(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&ys.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):i=="li"?n=e:i&&(n=null)}}function qc(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function xo(t){let e={};for(let n in t)e[n]=t[n];return e}function wo(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let o=[],u=s=>{o.push(s);for(let a=0;a<s.edgeCount;a++){let{type:l,next:c}=s.edge(a);if(l==e||o.indexOf(c)<0&&u(c))return!0}};if(u(r.contentMatch))return!0}}class un{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=Fi(n).createDocumentFragment());let r=i,o=[];return e.forEach(u=>{if(o.length||u.marks.length){let s=0,a=0;for(;s<o.length&&a<u.marks.length;){let l=u.marks[a];if(!this.marks[l.type.name]){a++;continue}if(!l.eq(o[s][0])||l.type.spec.spanning===!1)break;s++,a++}for(;s<o.length;)r=o.pop()[1];for(;a<u.marks.length;){let l=u.marks[a++],c=this.serializeMark(l,u.isInline,n);c&&(o.push([l,r]),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(this.serializeNodeInner(u,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:r}=Xn(Fi(n),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(i),i=o.dom)}return i}serializeMark(e,n,i={}){let r=this.marks[e.type.name];return r&&Xn(Fi(i),r(e,n),null,e.attrs)}static renderSpec(e,n,i=null,r){return Xn(e,n,i,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new un(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=jo(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return jo(e.marks)}}function jo(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function Fi(t){return t.document||window.document}const Co=new WeakMap;function $c(t){let e=Co.get(t);return e===void 0&&Co.set(t,e=Vc(t)),e}function Vc(t){let e=null;function n(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let r=0;r<i.length;r++)n(i[r]);else for(let r in i)n(i[r])}return n(t),e}function Xn(t,e,n,i){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],o;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(o=$c(i))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let u=r.indexOf(" ");u>0&&(n=r.slice(0,u),r=r.slice(u+1));let s,a=n?t.createElementNS(n,r):t.createElement(r),l=e[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let f in l)if(l[f]!=null){let d=f.indexOf(" ");d>0?a.setAttributeNS(f.slice(0,d),f.slice(d+1),l[f]):a.setAttribute(f,l[f])}}for(let f=c;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:g,contentDOM:h}=Xn(t,d,n,i);if(a.appendChild(g),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:a,contentDOM:s}}const ks=65535,xs=Math.pow(2,16);function Hc(t,e){return t+e*xs}function vo(t){return t&ks}function Uc(t){return(t-(t&ks))/xs}const ws=1,js=2,Yn=4,Cs=8;class dr{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&Cs)>0}get deletedBefore(){return(this.delInfo&(ws|Yn))>0}get deletedAfter(){return(this.delInfo&(js|Yn))>0}get deletedAcross(){return(this.delInfo&Yn)>0}}class Ee{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ee.empty)return Ee.empty}recover(e){let n=0,i=vo(e);if(!this.inverted)for(let r=0;r<i;r++)n+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+n+Uc(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let r=0,o=this.inverted?2:1,u=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+o],c=this.ranges[s+u],f=a+l;if(e<=f){let d=l?e==a?-1:e==f?1:n:n,g=a+r+(d<0?0:c);if(i)return g;let h=e==(n<0?a:f)?null:Hc(s/3,e-a),w=e==a?js:e==f?ws:Yn;return(n<0?e!=a:e!=f)&&(w|=Cs),new dr(g,w,h)}r+=c-l}return i?e+r:new dr(e+r,0,null)}touches(e,n){let i=0,r=vo(n),o=this.inverted?2:1,u=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?i:0);if(a>e)break;let l=this.ranges[s+o],c=a+l;if(e<=c&&s==r*3)return!0;i+=this.ranges[s+u]-l}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let u=this.ranges[r],s=u-(this.inverted?o:0),a=u+(this.inverted?0:o),l=this.ranges[r+n],c=this.ranges[r+i];e(s,s+l,a,a+c),o+=c-l}}invert(){return new Ee(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ee.empty:new Ee(e<0?[0,-e,0]:[0,0,e])}}Ee.empty=new Ee([]);class Ut{constructor(e=[],n,i=0,r=e.length){this.maps=e,this.mirror=n,this.from=i,this.to=r}slice(e=0,n=this.maps.length){return new Ut(this.maps,this.mirror,e,n)}copy(){return new Ut(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,i=this.maps.length;n<e.maps.length;n++){let r=e.getMirror(n);this.appendMap(e.maps[n],r!=null&&r<n?i+r:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this.maps.length+e.maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e.maps[n].invert(),r!=null&&r>n?i-r-1:void 0)}}invert(){let e=new Ut;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let r=0;for(let o=this.from;o<this.to;o++){let u=this.maps[o],s=u.mapResult(e,n);if(s.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(s.recover);continue}}r|=s.delInfo,e=s.pos}return i?e:new dr(e,r,null)}}const Ii=Object.create(null);class be{getMap(){return Ee.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Ii[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in Ii)throw new RangeError("Duplicate use of step JSON ID "+e);return Ii[e]=n,n.prototype.jsonID=e,n}}class ie{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ie(e,null)}static fail(e){return new ie(null,e)}static fromReplace(e,n,i,r){try{return ie.ok(e.replace(n,i,r))}catch(o){if(o instanceof ii)return ie.fail(o.message);throw o}}}function zr(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(zr(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return T.fromArray(i)}class pt extends be{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new F(zr(n.content,(u,s)=>!u.isAtom||!s.type.allowsMarkType(this.mark.type)?u:u.mark(this.mark.addToSet(u.marks)),r),n.openStart,n.openEnd);return ie.fromReplace(e,this.from,this.to,o)}invert(){return new Ue(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new pt(n.pos,i.pos,this.mark)}merge(e){return e instanceof pt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new pt(n.from,n.to,e.markFromJSON(n.mark))}}be.jsonID("addMark",pt);class Ue extends be{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new F(zr(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return ie.fromReplace(e,this.from,this.to,i)}invert(){return new pt(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new Ue(n.pos,i.pos,this.mark)}merge(e){return e instanceof Ue&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ue(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ue(n.from,n.to,e.markFromJSON(n.mark))}}be.jsonID("removeMark",Ue);class gt extends be{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ie.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ie.fromReplace(e,this.pos,this.pos+1,new F(T.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(i))return new gt(this.pos,n.marks[r]);return new gt(this.pos,this.mark)}}return new Gt(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gt(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gt(n.pos,e.markFromJSON(n.mark))}}be.jsonID("addNodeMark",gt);class Gt extends be{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ie.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ie.fromReplace(e,this.pos,this.pos+1,new F(T.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gt(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gt(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gt(n.pos,e.markFromJSON(n.mark))}}be.jsonID("removeNodeMark",Gt);class pe extends be{constructor(e,n,i,r=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=r}apply(e){return this.structure&&hr(e,this.from,this.to)?ie.fail("Structure replace would overwrite content"):ie.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ee([this.from,this.to-this.from,this.slice.size])}invert(e){return new pe(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new pe(n.pos,Math.max(n.pos,i.pos),this.slice)}merge(e){if(!(e instanceof pe)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?F.empty:new F(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new pe(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?F.empty:new F(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new pe(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new pe(n.from,n.to,F.fromJSON(e,n.slice),!!n.structure)}}be.jsonID("replace",pe);class he extends be{constructor(e,n,i,r,o,u,s=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=u,this.structure=s}apply(e){if(this.structure&&(hr(e,this.from,this.gapFrom)||hr(e,this.gapTo,this.to)))return ie.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ie.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?ie.fromReplace(e,this.from,this.to,i):ie.fail("Content does not fit in gap")}getMap(){return new Ee([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new he(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||o>i.pos?null:new he(n.pos,i.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new he(n.from,n.to,n.gapFrom,n.gapTo,F.fromJSON(e,n.slice),n.insert,!!n.structure)}}be.jsonID("replaceAround",he);function hr(t,e,n){let i=t.resolve(e),r=n-e,o=i.depth;for(;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0){let u=i.node(o).maybeChild(i.indexAfter(o));for(;r>0;){if(!u||u.isLeaf)return!0;u=u.firstChild,r--}}return!1}function Wc(t,e,n,i){let r=[],o=[],u,s;t.doc.nodesBetween(e,n,(a,l,c)=>{if(!a.isInline)return;let f=a.marks;if(!i.isInSet(f)&&c.type.allowsMarkType(i.type)){let d=Math.max(l,e),g=Math.min(l+a.nodeSize,n),h=i.addToSet(f);for(let w=0;w<f.length;w++)f[w].isInSet(h)||(u&&u.to==d&&u.mark.eq(f[w])?u.to=g:r.push(u=new Ue(d,g,f[w])));s&&s.to==d?s.to=g:o.push(s=new pt(d,g,i))}}),r.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function Jc(t,e,n,i){let r=[],o=0;t.doc.nodesBetween(e,n,(u,s)=>{if(!u.isInline)return;o++;let a=null;if(i instanceof ki){let l=u.marks,c;for(;c=i.isInSet(l);)(a||(a=[])).push(c),l=c.removeFromSet(l)}else i?i.isInSet(u.marks)&&(a=[i]):a=u.marks;if(a&&a.length){let l=Math.min(s+u.nodeSize,n);for(let c=0;c<a.length;c++){let f=a[c],d;for(let g=0;g<r.length;g++){let h=r[g];h.step==o-1&&f.eq(r[g].style)&&(d=h)}d?(d.to=l,d.step=o):r.push({style:f,from:Math.max(s,e),to:l,step:o})}}}),r.forEach(u=>t.step(new Ue(u.from,u.to,u.style)))}function vs(t,e,n,i=n.contentMatch,r=!0){let o=t.doc.nodeAt(e),u=[],s=e+1;for(let a=0;a<o.childCount;a++){let l=o.child(a),c=s+l.nodeSize,f=i.matchType(l.type);if(!f)u.push(new pe(s,c,F.empty));else{i=f;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new Ue(s,c,l.marks[d]));if(r&&l.isText&&n.whitespace!="pre"){let d,g=/\r?\n|\r/g,h;for(;d=g.exec(l.text);)h||(h=new F(T.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),u.push(new pe(s+d.index,s+d.index+d[0].length,h))}}s=c}if(!i.validEnd){let a=i.fillBefore(T.empty,!0);t.replace(s,s,new F(a,0,0))}for(let a=u.length-1;a>=0;a--)t.step(u[a])}function Kc(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function xi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let r=t.$from.node(i),o=t.$from.index(i),u=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(o,u,n))return i;if(i==0||r.type.spec.isolating||!Kc(r,o,u))break}return null}function Zc(t,e,n){let{$from:i,$to:r,depth:o}=e,u=i.before(o+1),s=r.after(o+1),a=u,l=s,c=T.empty,f=0;for(let h=o,w=!1;h>n;h--)w||i.index(h)>0?(w=!0,c=T.from(i.node(h).copy(c)),f++):a--;let d=T.empty,g=0;for(let h=o,w=!1;h>n;h--)w||r.after(h+1)<r.end(h)?(w=!0,d=T.from(r.node(h).copy(d)),g++):l++;t.step(new he(a,l,u,s,new F(c.append(d),f,g),c.size-f,!0))}function Ds(t,e,n=null,i=t){let r=Gc(t,e),o=r&&Xc(i,e);return o?r.map(Do).concat({type:e,attrs:n}).concat(o.map(Do)):null}function Do(t){return{type:t,attrs:null}}function Gc(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.contentMatchAt(i).findWrapping(e);if(!o)return null;let u=o.length?o[0]:e;return n.canReplaceWith(i,r,u)?o:null}function Xc(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.child(i),u=e.contentMatch.findWrapping(o.type);if(!u)return null;let a=(u.length?u[u.length-1]:e).contentMatch;for(let l=i;a&&l<r;l++)a=a.matchType(n.child(l).type);return!a||!a.validEnd?null:u}function Yc(t,e,n){let i=T.empty;for(let u=n.length-1;u>=0;u--){if(i.size){let s=n[u].type.contentMatch.matchFragment(i);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=T.from(n[u].type.create(n[u].attrs,i))}let r=e.start,o=e.end;t.step(new he(r,o,r,o,new F(i,0,0),n.length,!0))}function Qc(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(u,s)=>{let a=typeof r=="function"?r(u):r;if(u.isTextblock&&!u.hasMarkup(i,a)&&nf(t.doc,t.mapping.slice(o).map(s),i)){let l=null;if(i.schema.linebreakReplacement){let g=i.whitespace=="pre",h=!!i.contentMatch.matchType(i.schema.linebreakReplacement);g&&!h?l=!1:!g&&h&&(l=!0)}l===!1&&tf(t,u,s,o),vs(t,t.mapping.slice(o).map(s,1),i,void 0,l===null);let c=t.mapping.slice(o),f=c.map(s,1),d=c.map(s+u.nodeSize,1);return t.step(new he(f,d,f+1,d-1,new F(T.from(i.create(a,null,u.marks)),0,0),1,!0)),l===!0&&ef(t,u,s,o),!1}})}function ef(t,e,n,i){e.forEach((r,o)=>{if(r.isText){let u,s=/\r?\n|\r/g;for(;u=s.exec(r.text);){let a=t.mapping.slice(i).map(n+1+o+u.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function tf(t,e,n,i){e.forEach((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let u=t.mapping.slice(i).map(n+1+o);t.replaceWith(u,u+1,e.type.schema.text(`
`))}})}function nf(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}function rf(t,e,n,i,r){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let u=n.create(i,null,r||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,u);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new he(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new F(T.from(u),0,0),1,!0))}function gn(t,e,n=1,i){let r=t.resolve(e),o=r.depth-n,u=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!u.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let l=r.depth-1,c=n-2;l>o;l--,c--){let f=r.node(l),d=r.index(l);if(f.type.spec.isolating)return!1;let g=f.content.cutByIndex(d,f.childCount),h=i&&i[c+1];h&&(g=g.replaceChild(0,h.type.create(h.attrs)));let w=i&&i[c]||f;if(!f.canReplace(d+1,f.childCount)||!w.type.validContent(g))return!1}let s=r.indexAfter(o),a=i&&i[0];return r.node(o).canReplaceWith(s,s,a?a.type:r.node(o+1).type)}function of(t,e,n=1,i){let r=t.doc.resolve(e),o=T.empty,u=T.empty;for(let s=r.depth,a=r.depth-n,l=n-1;s>a;s--,l--){o=T.from(r.node(s).copy(o));let c=i&&i[l];u=T.from(c?c.type.create(c.attrs,u):r.node(s).copy(u))}t.step(new pe(e,e,new F(o.append(u),n,n),!0))}function sn(t,e){let n=t.resolve(e),i=n.index();return Ss(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function Ss(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Es(t,e,n=-1){let i=t.resolve(e);for(let r=i.depth;;r--){let o,u,s=i.index(r);if(r==i.depth?(o=i.nodeBefore,u=i.nodeAfter):n>0?(o=i.node(r+1),s++,u=i.node(r).maybeChild(s)):(o=i.node(r).maybeChild(s-1),u=i.node(r+1)),o&&!o.isTextblock&&Ss(o,u)&&i.node(r).canReplace(s,s+1))return e;if(r==0)break;e=n<0?i.before(r):i.after(r)}}function uf(t,e,n){let i=new pe(e-n,e+n,F.empty,!0);t.step(i)}function sf(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let o=i.index(r);if(i.node(r).canReplaceWith(o,o,n))return i.before(r+1);if(o>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let o=i.indexAfter(r);if(i.node(r).canReplaceWith(o,o,n))return i.after(r+1);if(o<i.node(r).childCount)return null}return null}function As(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let o=0;o<n.openStart;o++)r=r.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let u=i.depth;u>=0;u--){let s=u==i.depth?0:i.pos<=(i.start(u+1)+i.end(u+1))/2?-1:1,a=i.index(u)+(s>0?1:0),l=i.node(u),c=!1;if(o==1)c=l.canReplace(a,a,r);else{let f=l.contentMatchAt(a).findWrapping(r.firstChild.type);c=f&&l.canReplaceWith(a,a,f[0])}if(c)return s==0?i.pos:s<0?i.before(u+1):i.after(u+1)}return null}function Pr(t,e,n=e,i=F.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),o=t.resolve(n);return Ms(r,o,i)?new pe(e,n,i):new af(r,o,i).fit()}function Ms(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class af{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=T.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=T.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let o=this.placed,u=i.depth,s=r.depth;for(;u&&s&&o.childCount==1;)o=o.firstChild.content,u--,s--;let a=new F(o,u,s);return e>-1?new he(i.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||i.pos!=this.$to.pos?new pe(i.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let o=n.firstChild;if(n.childCount>1&&(r=0),o.type.spec.isolating&&r<=i){e=i;break}n=o.content}for(let n=1;n<=2;n++)for(let i=n==1?e:this.unplaced.openStart;i>=0;i--){let r,o=null;i?(o=Ri(this.unplaced.content,i-1).firstChild,r=o.content):r=this.unplaced.content;let u=r.firstChild;for(let s=this.depth;s>=0;s--){let{type:a,match:l}=this.frontier[s],c,f=null;if(n==1&&(u?l.matchType(u.type)||(f=l.fillBefore(T.from(u),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:i,frontierDepth:s,parent:o,inject:f};if(n==2&&u&&(c=l.findWrapping(u.type)))return{sliceDepth:i,frontierDepth:s,parent:o,wrap:c};if(o&&l.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=Ri(e,n);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new F(e,n+1,Math.max(i,r.size+n>=e.size-i?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=Ri(e,n);if(r.childCount<=1&&n>0){let o=e.size-n<=n+r.size;this.unplaced=new F(fn(e,n-1,1),n-1,o?n-1:i)}else this.unplaced=new F(fn(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:r,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let w=0;w<o.length;w++)this.openFrontierNode(o[w]);let u=this.unplaced,s=i?i.content:u.content,a=u.openStart-e,l=0,c=[],{match:f,type:d}=this.frontier[n];if(r){for(let w=0;w<r.childCount;w++)c.push(r.child(w));f=f.matchFragment(r)}let g=s.size+e-(u.content.size-u.openEnd);for(;l<s.childCount;){let w=s.child(l),v=f.matchType(w.type);if(!v)break;l++,(l>1||a==0||w.content.size)&&(f=v,c.push(Os(w.mark(d.allowedMarks(w.marks)),l==1?a:0,l==s.childCount?g:-1)))}let h=l==s.childCount;h||(g=-1),this.placed=dn(this.placed,n,T.from(c)),this.frontier[n].match=f,h&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,v=s;w<g;w++){let M=v.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),v=M.content}this.unplaced=h?e==0?F.empty:new F(fn(u.content,e-1,1),e-1,g<0?u.openEnd:e-1):new F(fn(u.content,e,l),u.openStart,u.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Bi(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:r}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),u=Bi(e,n,r,i,o);if(u){for(let s=n-1;s>=0;s--){let{match:a,type:l}=this.frontier[s],c=Bi(e,s,l,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:u,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=dn(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let r=e.node(i),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,n=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=dn(this.placed,this.depth,T.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(T.empty,!0);n.childCount&&(this.placed=dn(this.placed,this.frontier.length,n))}}function fn(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(fn(t.firstChild.content,e-1,n)))}function dn(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(dn(t.lastChild.content,e-1,n)))}function Ri(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Os(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,Os(i.firstChild,e-1,i.childCount==1?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(T.empty,!0)))),t.copy(i)}function Bi(t,e,n,i,r){let o=t.node(e),u=r?t.indexAfter(e):t.index(e);if(u==o.childCount&&!n.compatibleContent(o.type))return null;let s=i.fillBefore(o.content,!0,u);return s&&!lf(n,o.content,u)?s:null}function lf(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}function cf(t){return t.spec.defining||t.spec.definingForContent}function ff(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),o=t.doc.resolve(n);if(Ms(r,o,i))return t.step(new pe(e,n,i));let u=Ns(r,t.doc.resolve(n));u[u.length-1]==0&&u.pop();let s=-(r.depth+1);u.unshift(s);for(let d=r.depth,g=r.pos-1;d>0;d--,g--){let h=r.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;u.indexOf(d)>-1?s=d:r.before(d)==g&&u.splice(1,0,-d)}let a=u.indexOf(s),l=[],c=i.openStart;for(let d=i.content,g=0;;g++){let h=d.firstChild;if(l.push(h),g==i.openStart)break;d=h.content}for(let d=c-1;d>=0;d--){let g=l[d],h=cf(g.type);if(h&&!g.sameMarkup(r.node(Math.abs(s)-1)))c=d;else if(h||!g.type.isTextblock)break}for(let d=i.openStart;d>=0;d--){let g=(d+c+1)%(i.openStart+1),h=l[g];if(h)for(let w=0;w<u.length;w++){let v=u[(w+a)%u.length],M=!0;v<0&&(M=!1,v=-v);let N=r.node(v-1),I=r.index(v-1);if(N.canReplaceWith(I,I,h.type,h.marks))return t.replace(r.before(v),M?o.after(v):n,new F(Ts(i.content,0,i.openStart,g),g,i.openEnd))}}let f=t.steps.length;for(let d=u.length-1;d>=0&&(t.replace(e,n,i),!(t.steps.length>f));d--){let g=u[d];g<0||(e=r.before(g),n=o.after(g))}}function Ts(t,e,n,i,r){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Ts(o.content,e+1,n,i,o)))}if(e>i){let o=r.contentMatchAt(0),u=o.fillBefore(t).append(t);t=u.append(o.matchFragment(u).fillBefore(T.empty,!0))}return t}function df(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=sf(t.doc,e,i.type);r!=null&&(e=n=r)}t.replaceRange(e,n,new F(T.from(i),0,0))}function hf(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),o=Ns(i,r);for(let u=0;u<o.length;u++){let s=o[u],a=u==o.length-1;if(a&&s==0||i.node(s).type.contentMatch.validEnd)return t.delete(i.start(s),r.end(s));if(s>0&&(a||i.node(s-1).canReplace(i.index(s-1),r.indexAfter(s-1))))return t.delete(i.before(s),r.after(s))}for(let u=1;u<=i.depth&&u<=r.depth;u++)if(e-i.start(u)==i.depth-u&&n>i.end(u)&&r.end(u)-n!=r.depth-u)return t.delete(i.before(u),n);t.delete(e,n)}function Ns(t,e){let n=[],i=Math.min(t.depth,e.depth);for(let r=i;r>=0;r--){let o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}class Wt extends be{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return ie.fail("No node at attribute step's position");let i=Object.create(null);for(let o in n.attrs)i[o]=n.attrs[o];i[this.attr]=this.value;let r=n.type.create(i,null,n.marks);return ie.fromReplace(e,this.pos,this.pos+1,new F(T.from(r),0,n.isLeaf?0:1))}getMap(){return Ee.empty}invert(e){return new Wt(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Wt(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Wt(n.pos,n.attr,n.value)}}be.jsonID("attr",Wt);class jn extends be{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,e.content,e.marks);return ie.ok(i)}getMap(){return Ee.empty}invert(e){return new jn(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new jn(n.attr,n.value)}}be.jsonID("docAttr",jn);let Xt=class extends Error{};Xt=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Xt.prototype=Object.create(Error.prototype);Xt.prototype.constructor=Xt;Xt.prototype.name="TransformError";class mf{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ut}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Xt(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=F.empty){let r=Pr(this.doc,e,n,i);return r&&this.step(r),this}replaceWith(e,n,i){return this.replace(e,n,new F(T.from(i),0,0))}delete(e,n){return this.replace(e,n,F.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return ff(this,e,n,i),this}replaceRangeWith(e,n,i){return df(this,e,n,i),this}deleteRange(e,n){return hf(this,e,n),this}lift(e,n){return Zc(this,e,n),this}join(e,n=1){return uf(this,e,n),this}wrap(e,n){return Yc(this,e,n),this}setBlockType(e,n=e,i,r=null){return Qc(this,e,n,i,r),this}setNodeMarkup(e,n,i=null,r){return rf(this,e,n,i,r),this}setNodeAttribute(e,n,i){return this.step(new Wt(e,n,i)),this}setDocAttribute(e,n){return this.step(new jn(e,n)),this}addNodeMark(e,n){return this.step(new gt(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Z)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(n=n.isInSet(i.marks),!n)return this}return this.step(new Gt(e,n)),this}split(e,n=1,i){return of(this,e,n,i),this}addMark(e,n,i){return Wc(this,e,n,i),this}removeMark(e,n,i){return Jc(this,e,n,i),this}clearIncompatible(e,n,i){return vs(this,e,n,i),this}}const zi=Object.create(null);class U{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new pf(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=F.empty){let i=n.content.lastChild,r=null;for(let s=0;s<n.openEnd;s++)r=i,i=i.lastChild;let o=e.steps.length,u=this.ranges;for(let s=0;s<u.length;s++){let{$from:a,$to:l}=u[s],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(l.pos),s?F.empty:n),s==0&&Ao(e,o,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:u,$to:s}=r[o],a=e.mapping.slice(i),l=a.map(u.pos),c=a.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,n),Ao(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let r=e.parent.inlineContent?new K(e):Vt(e.node(0),e.parent,e.pos,e.index(),n,i);if(r)return r;for(let o=e.depth-1;o>=0;o--){let u=n<0?Vt(e.node(0),e.node(o),e.before(o+1),e.index(o),n,i):Vt(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,i);if(u)return u}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Me(e.node(0))}static atStart(e){return Vt(e,e,0,0,1)||new Me(e)}static atEnd(e){return Vt(e,e,e.content.size,e.childCount,-1)||new Me(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=zi[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in zi)throw new RangeError("Duplicate use of selection JSON ID "+e);return zi[e]=n,n.prototype.jsonID=e,n}getBookmark(){return K.between(this.$anchor,this.$head).getBookmark()}}U.prototype.visible=!0;class pf{constructor(e,n){this.$from=e,this.$to=n}}let So=!1;function Eo(t){!So&&!t.parent.inlineContent&&(So=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class K extends U{constructor(e,n=e){Eo(e),Eo(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return U.near(i);let r=e.resolve(n.map(this.anchor));return new K(r.parent.inlineContent?r:i,i)}replace(e,n=F.empty){if(super.replace(e,n),n==F.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof K&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new wi(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new K(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let r=e.resolve(n);return new this(r,i==n?r:e.resolve(i))}static between(e,n,i){let r=e.pos-n.pos;if((!i||r)&&(i=r>=0?1:-1),!n.parent.inlineContent){let o=U.findFrom(n,i,!0)||U.findFrom(n,-i,!0);if(o)n=o.$head;else return U.near(n,i)}return e.parent.inlineContent||(r==0?e=n:(e=(U.findFrom(e,-i,!0)||U.findFrom(e,i,!0)).$anchor,e.pos<n.pos!=r<0&&(e=n))),new K(e,n)}}U.jsonID("text",K);class wi{constructor(e,n){this.anchor=e,this.head=n}map(e){return new wi(e.map(this.anchor),e.map(this.head))}resolve(e){return K.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends U{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:r}=n.mapResult(this.anchor),o=e.resolve(r);return i?U.near(o):new q(o)}content(){return new F(T.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Lr(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(n.anchor))}static create(e,n){return new q(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;U.jsonID("node",q);class Lr{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new wi(i,i):new Lr(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&q.isSelectable(i)?new q(n):U.near(n)}}class Me extends U{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=F.empty){if(n==F.empty){e.delete(0,e.doc.content.size);let i=U.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Me(e)}map(e){return new Me(e)}eq(e){return e instanceof Me}getBookmark(){return gf}}U.jsonID("all",Me);const gf={map(){return this},resolve(t){return new Me(t)}};function Vt(t,e,n,i,r,o=!1){if(e.inlineContent)return K.create(t,n);for(let u=i-(r>0?0:1);r>0?u<e.childCount:u>=0;u+=r){let s=e.child(u);if(s.isAtom){if(!o&&q.isSelectable(s))return q.create(t,n-(r<0?s.nodeSize:0))}else{let a=Vt(t,s,n+r,r<0?s.childCount:0,r,o);if(a)return a}n+=s.nodeSize*r}return null}function Ao(t,e,n){let i=t.steps.length-1;if(i<e)return;let r=t.steps[i];if(!(r instanceof pe||r instanceof he))return;let o=t.mapping.maps[i],u;o.forEach((s,a,l,c)=>{u==null&&(u=c)}),t.setSelection(U.near(t.doc.resolve(u),n))}const Mo=1,Oo=2,To=4;class _f extends mf{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Mo)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Mo)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Oo,this}ensureMarks(e){return Z.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Oo)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Z.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let r=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=n),i=i??n,!e)return this.deleteRange(n,i);let o=this.storedMarks;if(!o){let u=this.doc.resolve(n);o=i==n?u.marks():u.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,r.text(e,o)),this.selection.empty||this.setSelection(U.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=To,this}get scrolledIntoView(){return(this.updated&To)>0}}function No(t,e){return!e||!t?t:t.bind(e)}class hn{constructor(e,n,i){this.name=e,this.init=No(n.init,i),this.apply=No(n.apply,i)}}const bf=[new hn("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new hn("selection",{init(t,e){return t.selection||U.atStart(e.doc)},apply(t){return t.selection}}),new hn("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new hn("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Pi{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bf.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new hn(i.key,i.spec.state,i))})}}class mn{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),r=null;for(;;){let o=!1;for(let u=0;u<this.config.plugins.length;u++){let s=this.config.plugins[u];if(s.spec.appendTransaction){let a=r?r[u].n:0,l=r?r[u].state:this,c=a<n.length&&s.spec.appendTransaction.call(s,a?n.slice(a):n,l,i);if(c&&i.filterTransaction(c,u)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let f=0;f<this.config.plugins.length;f++)r.push(f<u?{state:i,n:n.length}:{state:this,n:0})}n.push(c),i=i.applyInner(c),o=!0}r&&(r[u]={state:i,n:n.length})}}if(!o)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new mn(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let o=i[r];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new _f(this)}static create(e){let n=new Pi(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new mn(n);for(let r=0;r<n.fields.length;r++)i[n.fields[r].name]=n.fields[r].init(e,i);return i}reconfigure(e){let n=new Pi(this.schema,e.plugins),i=n.fields,r=new mn(n);for(let o=0;o<i.length;o++){let u=i[o].name;r[u]=this.hasOwnProperty(u)?this[u]:i[o].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],o=r.spec.state;o&&o.toJSON&&(n[i]=o.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Pi(e.schema,e.plugins),o=new mn(r);return r.fields.forEach(u=>{if(u.name=="doc")o.doc=it.fromJSON(e.schema,n.doc);else if(u.name=="selection")o.selection=U.fromJSON(o.doc,n.selection);else if(u.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let s in i){let a=i[s],l=a.spec.state;if(a.key==u.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(n,s)){o[u.name]=l.fromJSON.call(a,e,n[s],o);return}}o[u.name]=u.init(e,o)}}),o}}function Fs(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=Fs(r,e,{})),n[i]=r}return n}class Ct{constructor(e){this.spec=e,this.props={},e.props&&Fs(e.props,this,this.props),this.key=e.key?e.key.key:Is("plugin")}getState(e){return e[this.key]}}const Li=Object.create(null);function Is(t){return t in Li?t+"$"+ ++Li[t]:(Li[t]=0,t+"$")}class Rs{constructor(e="key"){this.key=Is(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const yf=500;class Le{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,o;n&&(r=this.remapping(i,this.items.length),o=r.maps.length);let u=e.tr,s,a,l=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){r||(r=this.remapping(i,d+1),o=r.maps.length),o--,c.push(f);return}if(r){c.push(new He(f.map));let g=f.step.map(r.slice(o)),h;g&&u.maybeStep(g).doc&&(h=u.mapping.maps[u.mapping.maps.length-1],l.push(new He(h,void 0,void 0,l.length+c.length))),o--,h&&r.appendMap(h,o)}else u.maybeStep(f.step);if(f.selection)return s=r?f.selection.map(r.slice(o)):f.selection,a=new Le(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:u,selection:s}}addTransform(e,n,i,r){let o=[],u=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let f=e.steps[c].invert(e.docs[c]),d=new He(e.mapping.maps[c],f,n),g;(g=a&&a.merge(d))&&(d=g,c?o.pop():s=s.slice(0,s.length-1)),o.push(d),n&&(u++,n=void 0),r||(a=d)}let l=u-i.depth;return l>xf&&(s=kf(s,l),u-=l),new Le(s.append(o),u)}remapping(e,n){let i=new Ut;return this.items.forEach((r,o)=>{let u=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,u)},e,n),i}addMaps(e){return this.eventCount==0?this:new Le(this.items.append(e.map(n=>new He(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-n),o=e.mapping,u=e.steps.length,s=this.eventCount;this.items.forEach(d=>{d.selection&&s--},r);let a=n;this.items.forEach(d=>{let g=o.getMirror(--a);if(g==null)return;u=Math.min(u,g);let h=o.maps[g];if(d.step){let w=e.steps[g].invert(e.docs[g]),v=d.selection&&d.selection.map(o.slice(a+1,g));v&&s++,i.push(new He(h,w,v))}else i.push(new He(h))},r);let l=[];for(let d=n;d<u;d++)l.push(new He(o.maps[d]));let c=this.items.slice(0,r).append(l).append(i),f=new Le(c,s);return f.emptyItemCount()>yf&&(f=f.compress(this.items.length-i.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,r=[],o=0;return this.items.forEach((u,s)=>{if(s>=e)r.push(u),u.selection&&o++;else if(u.step){let a=u.step.map(n.slice(i)),l=a&&a.getMap();if(i--,l&&n.appendMap(l,i),a){let c=u.selection&&u.selection.map(n.slice(i));c&&o++;let f=new He(l.invert(),a,c),d,g=r.length-1;(d=r.length&&r[g].merge(f))?r[g]=d:r.push(f)}}else u.map&&i--},this.items.length,0),new Le(ts.from(r.reverse()),o)}}Le.empty=new Le(ts.empty,0);function kf(t,e){let n;return t.forEach((i,r)=>{if(i.selection&&e--==0)return n=r,!1}),t.slice(n)}class He{constructor(e,n,i,r){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new He(n.getMap().invert(),n,this.selection)}}}class at{constructor(e,n,i,r,o){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=r,this.prevComposition=o}}const xf=20;function wf(t,e,n,i){let r=n.getMeta(Tt),o;if(r)return r.historyState;n.getMeta(vf)&&(t=new at(t.done,t.undone,null,0,-1));let u=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(u&&u.getMeta(Tt))return u.getMeta(Tt).redo?new at(t.done.addTransform(n,void 0,i,Qn(e)),t.undone,Fo(n.mapping.maps),t.prevTime,t.prevComposition):new at(t.done,t.undone.addTransform(n,void 0,i,Qn(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(u&&u.getMeta("addToHistory")===!1)){let s=n.getMeta("composition"),a=t.prevTime==0||!u&&t.prevComposition!=s&&(t.prevTime<(n.time||0)-i.newGroupDelay||!jf(n,t.prevRanges)),l=u?qi(t.prevRanges,n.mapping):Fo(n.mapping.maps);return new at(t.done.addTransform(n,a?e.selection.getBookmark():void 0,i,Qn(e)),Le.empty,l,n.time,s??t.prevComposition)}else return(o=n.getMeta("rebased"))?new at(t.done.rebased(n,o),t.undone.rebased(n,o),qi(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new at(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),qi(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function jf(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,r)=>{for(let o=0;o<e.length;o+=2)i<=e[o+1]&&r>=e[o]&&(n=!0)}),n}function Fo(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((i,r,o,u)=>e.push(o,u));return e}function qi(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),o=e.map(t[i+1],-1);r<=o&&n.push(r,o)}return n}function Cf(t,e,n){let i=Qn(e),r=Tt.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,i);if(!o)return null;let u=o.selection.resolve(o.transform.doc),s=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),r,i),a=new at(n?s:o.remaining,n?o.remaining:s,null,0,-1);return o.transform.setSelection(u).setMeta(Tt,{redo:n,historyState:a})}let $i=!1,Io=null;function Qn(t){let e=t.plugins;if(Io!=e){$i=!1,Io=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){$i=!0;break}}return $i}const Tt=new Rs("history"),vf=new Rs("closeHistory");function Df(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ct({key:Tt,state:{init(){return new at(Le.empty,Le.empty,null,0,-1)},apply(e,n,i){return wf(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,r=i=="historyUndo"?li:i=="historyRedo"?Cn:null;return r?(n.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function Bs(t,e){return(n,i)=>{let r=Tt.getState(n);if(!r||(t?r.undone:r.done).eventCount==0)return!1;if(i){let o=Cf(r,n,t);o&&i(e?o.scrollIntoView():o)}return!0}}const li=Bs(!1,!0),Cn=Bs(!0,!0);function Sf(t={}){return new Ct({view(e){return new Ef(e,t)}})}class Ef{constructor(e,n){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=n.width)!==null&&i!==void 0?i:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let o=u=>{this[r](u)};return e.dom.addEventListener(r,o),{name:r,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,i;if(n){let s=e.nodeBefore,a=e.nodeAfter;if(s||a){let l=this.editorView.nodeDOM(this.cursorPos-(s?s.nodeSize:0));if(l){let c=l.getBoundingClientRect(),f=s?c.bottom:c.top;s&&a&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:c.left,right:c.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!i){let s=this.editorView.coordsAtPos(this.cursorPos);i={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,u;if(!r||r==document.body&&getComputedStyle(r).position=="static")o=-pageXOffset,u=-pageYOffset;else{let s=r.getBoundingClientRect();o=s.left-r.scrollLeft,u=s.top-r.scrollTop}this.element.style.left=i.left-o+"px",this.element.style.top=i.top-u+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),r=i&&i.type.spec.disableDropCursor,o=typeof r=="function"?r(this.editorView,n,e):r;if(n&&!o){let u=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let s=As(this.editorView.state.doc,u,this.editorView.dragging.slice);s!=null&&(u=s)}this.setCursor(u),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}var wt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ci={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Ro=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Af=typeof navigator<"u"&&/Apple Computer/.test(navigator.vendor),Mf=typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),Bo=typeof navigator<"u"&&/Mac/.test(navigator.platform),Of=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Tf=Ro&&(Bo||+Ro[1]<57)||Mf&&Bo;for(var le=0;le<10;le++)wt[48+le]=wt[96+le]=String(le);for(var le=1;le<=24;le++)wt[le+111]="F"+le;for(var le=65;le<=90;le++)wt[le]=String.fromCharCode(le+32),ci[le]=String.fromCharCode(le);for(var Vi in wt)ci.hasOwnProperty(Vi)||(ci[Vi]=wt[Vi]);function Nf(t){var e=Tf&&(t.ctrlKey||t.altKey||t.metaKey)||(Af||Of)&&t.shiftKey&&t.key&&t.key.length==1,n=!e&&t.key||(t.shiftKey?ci:wt)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Ff=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function If(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let i,r,o,u;for(let s=0;s<e.length-1;s++){let a=e[s];if(/^(cmd|meta|m)$/i.test(a))u=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Ff?u=!0:r=!0;else throw new Error("Unrecognized modifier name: "+a)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),u&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Rf(t){let e=Object.create(null);for(let n in t)e[If(n)]=t[n];return e}function Hi(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Bf(t){return new Ct({props:{handleKeyDown:zs(t)}})}function zs(t){let e=Rf(t);return function(n,i){let r=Nf(i),o,u=e[Hi(r,i)];if(u&&u(n.state,n.dispatch,n))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let s=e[Hi(r,i,!1)];if(s&&s(n.state,n.dispatch,n))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(o=wt[i.keyCode])&&o!=r){let s=e[Hi(o,i)];if(s&&s(n.state,n.dispatch,n))return!0}}return!1}}const ce=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},vn=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let mr=null;const tt=function(t,e,n){let i=mr||(mr=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},zf=function(){mr=null},Rt=function(t,e,n,i){return n&&(zo(t,e,n,i,-1)||zo(t,e,n,i,1))},Pf=/^(img|br|input|textarea|hr)$/i;function zo(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Re(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Fn(t)||Pf.test(t.nodeName)||t.contentEditable=="false")return!1;e=ce(t)+(r<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.contentEditable=="false")return!1;e=r<0?Re(t):0}else return!1}}function Re(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Lf(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Re(t)}else if(t.parentNode&&!Fn(t))e=ce(t),t=t.parentNode;else return null}}function qf(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Fn(t))e=ce(t)+1,t=t.parentNode;else return null}}function $f(t,e,n){for(let i=e==0,r=e==Re(t);i||r;){if(t==n)return!0;let o=ce(t);if(t=t.parentNode,!t)return!1;i=i&&o==0,r=r&&o==Re(t)}}function Fn(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ji=function(t){return t.focusNode&&Rt(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function St(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Vf(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Hf(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:Math.min(Re(i.offsetNode),i.offset)}}catch{}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:Math.min(Re(i.startContainer),i.startOffset)}}}const Ke=typeof navigator<"u"?navigator:null,Po=typeof document<"u"?document:null,vt=Ke&&Ke.userAgent||"",pr=/Edge\/(\d+)/.exec(vt),Ps=/MSIE \d/.exec(vt),gr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vt),ve=!!(Ps||gr||pr),yt=Ps?document.documentMode:gr?+gr[1]:pr?+pr[1]:0,qe=!ve&&/gecko\/(\d+)/i.test(vt);qe&&+(/Firefox\/(\d+)/.exec(vt)||[0,0])[1];const _r=!ve&&/Chrome\/(\d+)/.exec(vt),ge=!!_r,Ls=_r?+_r[1]:0,xe=!ve&&!!Ke&&/Apple Computer/.test(Ke.vendor),Yt=xe&&(/Mobile\/\w+/.test(vt)||!!Ke&&Ke.maxTouchPoints>2),Ie=Yt||(Ke?/Mac/.test(Ke.platform):!1),Uf=Ke?/Win/.test(Ke.platform):!1,Pe=/Android \d/.test(vt),In=!!Po&&"webkitFontSmoothing"in Po.documentElement.style,Wf=In?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Jf(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function et(t,e){return typeof t=="number"?t:t[e]}function Kf(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function Lo(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let u=n||t.dom;u;u=vn(u)){if(u.nodeType!=1)continue;let s=u,a=s==o.body,l=a?Jf(o):Kf(s),c=0,f=0;if(e.top<l.top+et(i,"top")?f=-(l.top-e.top+et(r,"top")):e.bottom>l.bottom-et(i,"bottom")&&(f=e.bottom-e.top>l.bottom-l.top?e.top+et(r,"top")-l.top:e.bottom-l.bottom+et(r,"bottom")),e.left<l.left+et(i,"left")?c=-(l.left-e.left+et(r,"left")):e.right>l.right-et(i,"right")&&(c=e.right-l.right+et(r,"right")),c||f)if(a)o.defaultView.scrollBy(c,f);else{let d=s.scrollLeft,g=s.scrollTop;f&&(s.scrollTop+=f),c&&(s.scrollLeft+=c);let h=s.scrollLeft-d,w=s.scrollTop-g;e={left:e.left-h,top:e.top-w,right:e.right-h,bottom:e.bottom-w}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(u).position))break}}function Zf(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),i,r;for(let o=(e.left+e.right)/2,u=n+1;u<Math.min(innerHeight,e.bottom);u+=5){let s=t.root.elementFromPoint(o,u);if(!s||s==t.dom||!t.dom.contains(s))continue;let a=s.getBoundingClientRect();if(a.top>=n-20){i=s,r=a.top;break}}return{refDOM:i,refTop:r,stack:qs(t.dom)}}function qs(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=vn(i));return e}function Gf({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;$s(n,i==0?0:i-e)}function $s(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:o}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=o&&(i.scrollLeft=o)}}let Lt=null;function Xf(t){if(t.setActive)return t.setActive();if(Lt)return t.focus(Lt);let e=qs(t);t.focus(Lt==null?{get preventScroll(){return Lt={preventScroll:!0},!0}}:void 0),Lt||(Lt=!1,$s(e,0))}function Vs(t,e){let n,i=2e8,r,o=0,u=e.top,s=e.top,a,l;for(let c=t.firstChild,f=0;c;c=c.nextSibling,f++){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=tt(c).getClientRects();else continue;for(let g=0;g<d.length;g++){let h=d[g];if(h.top<=u&&h.bottom>=s){u=Math.max(h.bottom,u),s=Math.min(h.top,s);let w=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(w<i){n=c,i=w,r=w&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,c.nodeType==1&&w&&(o=f+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!a&&h.left<=e.left&&h.right>=e.left&&(a=c,l={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=f+1)}}return!n&&a&&(n=a,r=l,i=0),n&&n.nodeType==3?Yf(n,r):!n||i&&n.nodeType==1?{node:t,offset:o}:Vs(n,r)}function Yf(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let o=st(i,1);if(o.top!=o.bottom&&qr(e,o))return{node:t,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function qr(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Qf(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function ed(t,e,n){let{node:i,offset:r}=Vs(e,n),o=-1;if(i.nodeType==1&&!i.firstChild){let u=i.getBoundingClientRect();o=u.left!=u.right&&n.left>(u.left+u.right)/2?1:-1}return t.docView.posFromDOM(i,r,o)}function td(t,e,n,i){let r=-1;for(let o=e,u=!1;o!=t.dom;){let s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.dom.nodeType==1&&(s.node.isBlock&&s.parent||!s.contentDOM)){let a=s.dom.getBoundingClientRect();if(s.node.isBlock&&s.parent&&(!u&&a.left>i.left||a.top>i.top?r=s.posBefore:(!u&&a.right<i.left||a.bottom<i.top)&&(r=s.posAfter),u=!0),!s.contentDOM&&r<0&&!s.node.isText)return(s.node.isBlock?i.top<(a.top+a.bottom)/2:i.left<(a.left+a.right)/2)?s.posBefore:s.posAfter}o=s.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}function Hs(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let u=t.childNodes[o];if(u.nodeType==1){let s=u.getClientRects();for(let a=0;a<s.length;a++){let l=s[a];if(qr(e,l))return Hs(u,e,l)}}if((o=(o+1)%i)==r)break}return t}function nd(t,e){let n=t.dom.ownerDocument,i,r=0,o=Hf(n,e.left,e.top);o&&({node:i,offset:r}=o);let u=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),s;if(!u||!t.dom.contains(u.nodeType!=1?u.parentNode:u)){let l=t.dom.getBoundingClientRect();if(!qr(e,l)||(u=Hs(t.dom,e,l),!u))return null}if(xe)for(let l=u;i&&l;l=vn(l))l.draggable&&(i=void 0);if(u=Qf(u,e),i){if(qe&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let c=i.childNodes[r],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&r++}let l;In&&r&&i.nodeType==1&&(l=i.childNodes[r-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=e.top&&r--,i==t.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(s=td(t,i,r,e))}s==null&&(s=ed(t,u,e));let a=t.docView.nearestDesc(u,!0);return{pos:s,inside:a?a.posAtStart-a.border:-1}}function qo(t){return t.top<t.bottom||t.left<t.right}function st(t,e){let n=t.getClientRects();if(n.length){let i=n[e<0?0:n.length-1];if(qo(i))return i}return Array.prototype.find.call(n,qo)||t.getBoundingClientRect()}const id=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Us(t,e,n){let{node:i,offset:r,atom:o}=t.docView.domFromPos(e,n<0?-1:1),u=In||qe;if(i.nodeType==3)if(u&&(id.test(i.nodeValue)||(n<0?!r:r==i.nodeValue.length))){let a=st(tt(i,r,r),n);if(qe&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let l=st(tt(i,r-1,r-1),-1);if(l.top==a.top){let c=st(tt(i,r,r+1),-1);if(c.top!=a.top)return ln(c,c.left<l.left)}}return a}else{let a=r,l=r,c=n<0?1:-1;return n<0&&!r?(l++,c=-1):n>=0&&r==i.nodeValue.length?(a--,c=1):n<0?a--:l++,ln(st(tt(i,a,l),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&r&&(n<0||r==Re(i))){let a=i.childNodes[r-1];if(a.nodeType==1)return Ui(a.getBoundingClientRect(),!1)}if(o==null&&r<Re(i)){let a=i.childNodes[r];if(a.nodeType==1)return Ui(a.getBoundingClientRect(),!0)}return Ui(i.getBoundingClientRect(),n>=0)}if(o==null&&r&&(n<0||r==Re(i))){let a=i.childNodes[r-1],l=a.nodeType==3?tt(a,Re(a)-(u?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(l)return ln(st(l,1),!1)}if(o==null&&r<Re(i)){let a=i.childNodes[r];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let l=a?a.nodeType==3?tt(a,0,u?0:1):a.nodeType==1?a:null:null;if(l)return ln(st(l,-1),!0)}return ln(st(i.nodeType==3?tt(i):i,-n),n>=0)}function ln(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Ui(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Ws(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}function rd(t,e,n){let i=e.selection,r=n=="up"?i.$from:i.$to;return Ws(t,e,()=>{let{node:o}=t.docView.domFromPos(r.pos,n=="up"?-1:1);for(;;){let s=t.docView.nearestDesc(o,!0);if(!s)break;if(s.node.isBlock){o=s.contentDOM||s.dom;break}o=s.dom.parentNode}let u=Us(t,r.pos,1);for(let s=o.firstChild;s;s=s.nextSibling){let a;if(s.nodeType==1)a=s.getClientRects();else if(s.nodeType==3)a=tt(s,0,s.nodeValue.length).getClientRects();else continue;for(let l=0;l<a.length;l++){let c=a[l];if(c.bottom>c.top+1&&(n=="up"?u.top-c.top>(c.bottom-u.top)*2:c.bottom-u.bottom>(u.bottom-c.top)*2))return!1}}return!0})}const od=/[\u0590-\u08ac]/;function ud(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,u=r==i.parent.content.size,s=t.domSelection();return s?!od.test(i.parent.textContent)||!s.modify?n=="left"||n=="backward"?o:u:Ws(t,e,()=>{let{focusNode:a,focusOffset:l,anchorNode:c,anchorOffset:f}=t.domSelectionRange(),d=s.caretBidiLevel;s.modify("move",n,"character");let g=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:h,focusOffset:w}=t.domSelectionRange(),v=h&&!g.contains(h.nodeType==1?h:h.parentNode)||a==h&&l==w;try{s.collapse(c,f),a&&(a!=c||l!=f)&&s.extend&&s.extend(a,l)}catch{}return d!=null&&(s.caretBidiLevel=d),v}):i.pos==i.start()||i.pos==i.end()}let $o=null,Vo=null,Ho=!1;function sd(t,e,n){return $o==e&&Vo==n?Ho:($o=e,Vo=n,Ho=n=="up"||n=="down"?rd(t,e,n):ud(t,e,n))}const Be=0,Uo=1,Et=2,Ze=3;class Rn{constructor(e,n,i,r){this.parent=e,this.children=n,this.dom=i,this.contentDOM=r,this.dirty=Be,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let r=this.children[n];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let o,u;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((u=o.pmViewDesc)&&u.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(u)+u.size:this.posAtStart}else{let o,u;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((u=o.pmViewDesc)&&u.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(u):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=n>ce(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!1;break}if(o.previousSibling)break}if(r==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!0;break}if(o.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,r=e;r;r=r.parentNode){let o=this.getDesc(r),u;if(o&&(!n||o.node))if(i&&(u=o.nodeDOM)&&!(u.nodeType==1?u.contains(e.nodeType==1?e:e.parentNode):u==e))i=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let r=this.children[n],o=i+r.size;if(i==e&&o!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-i-r.border);i=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let o=0;i<this.children.length;i++){let u=this.children[i],s=o+u.size;if(s>e||u instanceof Ks){r=e-o;break}o=s}if(r)return this.children[i].domFromPos(r-this.children[i].border,n);for(let o;i&&!(o=this.children[i-1]).size&&o instanceof Js&&o.side>=0;i--);if(n<=0){let o,u=!0;for(;o=i?this.children[i-1]:null,!(!o||o.dom.parentNode==this.contentDOM);i--,u=!1);return o&&n&&u&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?ce(o.dom)+1:0}}else{let o,u=!0;for(;o=i<this.children.length?this.children[i]:null,!(!o||o.dom.parentNode==this.contentDOM);i++,u=!1);return o&&u&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?ce(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let u=i,s=0;;s++){let a=this.children[s],l=u+a.size;if(r==-1&&e<=l){let c=u+a.border;if(e>=c&&n<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=u;for(let f=s;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=ce(d.dom)+1;break}e-=d.size}r==-1&&(r=0)}if(r>-1&&(l>n||s==this.children.length-1)){n=l;for(let c=s+1;c<this.children.length;c++){let f=this.children[c];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=ce(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}u=l}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,r=!1){let o=Math.min(e,n),u=Math.max(e,n);for(let d=0,g=0;d<this.children.length;d++){let h=this.children[d],w=g+h.size;if(o>g&&u<w)return h.setSelection(e-g-h.border,n-g-h.border,i,r);g=w}let s=this.domFromPos(e,e?-1:1),a=n==e?s:this.domFromPos(n,n?-1:1),l=i.getSelection(),c=!1;if((qe||xe)&&e==n){let{node:d,offset:g}=s;if(d.nodeType==3){if(c=!!(g&&d.nodeValue[g-1]==`
`),c&&g==d.nodeValue.length)for(let h=d,w;h;h=h.parentNode){if(w=h.nextSibling){w.nodeName=="BR"&&(s=a={node:w.parentNode,offset:ce(w)+1});break}let v=h.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let h=d.childNodes[g-1];c=h&&(h.nodeName=="BR"||h.contentEditable=="false")}}if(qe&&l.focusNode&&l.focusNode!=a.node&&l.focusNode.nodeType==1){let d=l.focusNode.childNodes[l.focusOffset];d&&d.contentEditable=="false"&&(r=!0)}if(!(r||c&&xe)&&Rt(s.node,s.offset,l.anchorNode,l.anchorOffset)&&Rt(a.node,a.offset,l.focusNode,l.focusOffset))return;let f=!1;if((l.extend||e==n)&&!c){l.collapse(s.node,s.offset);try{e!=n&&l.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let g=s;s=a,a=g}let d=document.createRange();d.setEnd(a.node,a.offset),d.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,r=0;r<this.children.length;r++){let o=this.children[r],u=i+o.size;if(i==u?e<=u&&n>=i:e<u&&n>i){let s=i+o.border,a=u-o.border;if(e>=s&&n<=a){this.dirty=e==i||n==u?Et:Uo,e==s&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ze:o.markDirty(e-s,n-s);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Et:Ze}i=u}this.dirty=Et}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=e==1?Et:Uo;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Js extends Rn{constructor(e,n,i,r){let o,u=n.type.toDOM;if(typeof u=="function"&&(u=u(i,()=>{if(!o)return r;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(u.nodeType!=1){let s=document.createElement("span");s.appendChild(u),u=s}u.contentEditable="false",u.classList.add("ProseMirror-widget")}super(e,[],u,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Be&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ad extends Rn{constructor(e,n,i,r){super(e,[],n,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Bt extends Rn{constructor(e,n,i,r){super(e,[],i,r),this.mark=n}static create(e,n,i,r){let o=r.nodeViews[n.type.name],u=o&&o(n,r,i);return(!u||!u.dom)&&(u=un.renderSpec(document,n.type.spec.toDOM(n,i),null,n.attrs)),new Bt(e,n,u.dom,u.contentDOM||u.dom)}parseRule(){return this.dirty&Ze||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ze&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Be){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Be}}slice(e,n,i){let r=Bt.create(this.parent,this.mark,!0,i),o=this.children,u=this.size;n<u&&(o=kr(o,n,u,i)),e>0&&(o=kr(o,0,e,i));for(let s=0;s<o.length;s++)o[s].parent=r;return r.children=o,r}}class kt extends Rn{constructor(e,n,i,r,o,u,s,a,l){super(e,[],o,u),this.node=n,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=s}static create(e,n,i,r,o,u){let s=o.nodeViews[n.type.name],a,l=s&&s(n,o,()=>{if(!a)return u;if(a.parent)return a.parent.posBeforeChild(a)},i,r),c=l&&l.dom,f=l&&l.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:f}=un.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Xs(c,i,n),l?a=new ld(e,n,i,r,c,f||null,d,l,o,u+1):n.isText?new Ci(e,n,i,r,c,d,o):new kt(e,n,i,r,c,f||null,d,o,u+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>T.empty)}return e}matchesNode(e,n,i){return this.dirty==Be&&e.eq(this.node)&&yr(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,r=n,o=e.composing?this.localCompositionInfo(e,n):null,u=o&&o.pos>-1?o:null,s=o&&o.pos<0,a=new fd(this,u&&u.node,e);md(this.node,this.innerDeco,(l,c,f)=>{l.spec.marks?a.syncToMarks(l.spec.marks,i,e):l.type.side>=0&&!f&&a.syncToMarks(c==this.node.childCount?Z.none:this.node.child(c).marks,i,e),a.placeWidget(l,e,r)},(l,c,f,d)=>{a.syncToMarks(l.marks,i,e);let g;a.findNodeMatch(l,c,f,d)||s&&e.state.selection.from>r&&e.state.selection.to<r+l.nodeSize&&(g=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(l,c,f,g,e)||a.updateNextNode(l,c,f,e,d,r)||a.addNode(l,c,f,e,r),r+=l.nodeSize}),a.syncToMarks([],i,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Et)&&(u&&this.protectLocalComposition(e,u),Zs(this.contentDOM,this.children,e),Yt&&pd(this.dom))}localCompositionInfo(e,n){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof K)||i<n||r>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let u=o.nodeValue,s=gd(this.node.content,u,i-n,r-n);return s<0?null:{node:o,pos:s,text:u}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:r}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let u=new ad(this,o,n,r);e.input.compositionNodes.push(u),this.children=kr(this.children,i,i+r.length,e,u)}update(e,n,i,r){return this.dirty==Ze||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,i,r),!0)}updateInner(e,n,i,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Be}updateOuterDeco(e){if(yr(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=Gs(this.dom,this.nodeDOM,br(this.outerDeco,this.node,n),br(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Wo(t,e,n,i,r){Xs(i,e,t);let o=new kt(void 0,t,e,n,i,i,i,r,0);return o.contentDOM&&o.updateChildren(r,0),o}class Ci extends kt{constructor(e,n,i,r,o,u,s){super(e,n,i,r,o,null,u,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,r){return this.dirty==Ze||this.dirty!=Be&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Be||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=Be,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,i){let r=this.node.cut(e,n),o=document.createTextNode(r.text);return new Ci(this.parent,r,this.outerDeco,this.innerDeco,o,o,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ze)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ks extends Rn{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Be&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class ld extends kt{constructor(e,n,i,r,o,u,s,a,l,c){super(e,n,i,r,o,u,s,l,c),this.spec=a}update(e,n,i,r){if(this.dirty==Ze)return!1;if(this.spec.update){let o=this.spec.update(e,n,i);return o&&this.updateInner(e,n,i,r),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i):super.setSelection(e,n,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Zs(t,e,n){let i=t.firstChild,r=!1;for(let o=0;o<e.length;o++){let u=e[o],s=u.dom;if(s.parentNode==t){for(;s!=i;)i=Jo(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(s,i);if(u instanceof Bt){let a=i?i.previousSibling:t.lastChild;Zs(u.contentDOM,u.children,n),i=a?a.nextSibling:t.firstChild}}for(;i;)i=Jo(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}const _n=function(t){t&&(this.nodeName=t)};_n.prototype=Object.create(null);const At=[new _n];function br(t,e,n){if(t.length==0)return At;let i=n?At[0]:new _n,r=[i];for(let o=0;o<t.length;o++){let u=t[o].type.attrs;if(u){u.nodeName&&r.push(i=new _n(u.nodeName));for(let s in u){let a=u[s];a!=null&&(n&&r.length==1&&r.push(i=new _n(e.isInline?"span":"div")),s=="class"?i.class=(i.class?i.class+" ":"")+a:s=="style"?i.style=(i.style?i.style+";":"")+a:s!="nodeName"&&(i[s]=a))}}}return r}function Gs(t,e,n,i){if(n==At&&i==At)return e;let r=e;for(let o=0;o<i.length;o++){let u=i[o],s=n[o];if(o){let a;s&&s.nodeName==u.nodeName&&r!=t&&(a=r.parentNode)&&a.nodeName.toLowerCase()==u.nodeName||(a=document.createElement(u.nodeName),a.pmIsDeco=!0,a.appendChild(r),s=At[0]),r=a}cd(r,s||At[0],u)}return r}function cd(t,e,n){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&t.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.remove(i[o]);for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.add(r[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)t.style.removeProperty(r[1])}n.style&&(t.style.cssText+=n.style)}}function Xs(t,e,n){return Gs(t,t,At,br(e,n,t.nodeType!=1))}function yr(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Jo(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fd{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dd(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i){let r=0,o=this.stack.length>>1,u=Math.min(o,e.length);for(;r<u&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=Be,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let s=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let l=this.top.children[a];if(l.matchesMark(e[o])&&!this.isLocked(l.dom)){s=a;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{let a=Bt.create(this.top,e[o],n,i);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,i,r){let o=-1,u;if(r>=this.preMatch.index&&(u=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&u.matchesNode(e,n,i))o=this.top.children.indexOf(u,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let l=this.top.children[s];if(l.matchesNode(e,n,i)&&!this.preMatch.matched.has(l)){o=s;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,i,r,o){let u=this.top.children[r];return u.dirty==Ze&&u.dom==u.contentDOM&&(u.dirty=Et),u.update(e,n,i,o)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=n}}updateNextNode(e,n,i,r,o,u){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof kt){let l=this.preMatch.matched.get(a);if(l!=null&&l!=o)return!1;let c=a.dom,f,d=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Ze&&yr(n,a.outerDeco));if(!d&&a.update(e,n,i,r))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(a,e,n,i,r,u)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Et,f.updateChildren(r,u+1),f.dirty=Be),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,i,r,o,u){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let s=kt.create(this.top,n,i,r,o,u);if(s.contentDOM){s.children=e.children,e.children=[];for(let a of s.children)a.parent=s}return e.destroy(),s}addNode(e,n,i,r,o){let u=kt.create(this.top,e,n,i,r,o);u.contentDOM&&u.updateChildren(r,o+1),this.top.children.splice(this.index++,0,u),this.changed=!0}placeWidget(e,n,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new Js(this.top,e,n,i);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Bt;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ci)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xe||ge)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new Ks(this.top,[],i,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dd(t,e){let n=e,i=n.children.length,r=t.childCount,o=new Map,u=[];e:for(;r>0;){let s;for(;;)if(i){let l=n.children[i-1];if(l instanceof Bt)n=l,i=l.children.length;else{s=l,i--;break}}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let a=s.node;if(a){if(a!=t.child(r-1))break;--r,o.set(s,r),u.push(s)}}return{index:r,matched:o,matches:u.reverse()}}function hd(t,e){return t.type.side-e.type.side}function md(t,e,n,i){let r=e.locals(t),o=0;if(r.length==0){for(let l=0;l<t.childCount;l++){let c=t.child(l);i(c,r,e.forChild(o,c),l),o+=c.nodeSize}return}let u=0,s=[],a=null;for(let l=0;;){let c,f;for(;u<r.length&&r[u].to==o;){let v=r[u++];v.widget&&(c?(f||(f=[c])).push(v):c=v)}if(c)if(f){f.sort(hd);for(let v=0;v<f.length;v++)n(f[v],l,!!a)}else n(c,l,!!a);let d,g;if(a)g=-1,d=a,a=null;else if(l<t.childCount)g=l,d=t.child(l++);else break;for(let v=0;v<s.length;v++)s[v].to<=o&&s.splice(v--,1);for(;u<r.length&&r[u].from<=o&&r[u].to>o;)s.push(r[u++]);let h=o+d.nodeSize;if(d.isText){let v=h;u<r.length&&r[u].from<v&&(v=r[u].from);for(let M=0;M<s.length;M++)s[M].to<v&&(v=s[M].to);v<h&&(a=d.cut(v-o),d=d.cut(0,v-o),h=v,g=-1)}else for(;u<r.length&&r[u].to<h;)u++;let w=d.isInline&&!d.isLeaf?s.filter(v=>!v.inline):s.slice();i(d,w,e.forChild(o,d),g),o=h}}function pd(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function gd(t,e,n,i){for(let r=0,o=0;r<t.childCount&&o<=i;){let u=t.child(r++),s=o;if(o+=u.nodeSize,!u.isText)continue;let a=u.text;for(;r<t.childCount;){let l=t.child(r++);if(o+=l.nodeSize,!l.isText)break;a+=l.text}if(o>=n){if(o>=i&&a.slice(i-e.length-s,i-s)==e)return i-e.length;let l=s<i?a.lastIndexOf(e,i-s-1):-1;if(l>=0&&l+e.length+s>=n)return s+l;if(n==i&&a.length>=i+e.length-s&&a.slice(i-s,i-s+e.length)==e)return i}}return-1}function kr(t,e,n,i,r){let o=[];for(let u=0,s=0;u<t.length;u++){let a=t[u],l=s,c=s+=a.size;l>=n||c<=e?o.push(a):(l<e&&o.push(a.slice(0,e-l,i)),r&&(o.push(r),r=void 0),c>n&&o.push(a.slice(n-l,a.size,i)))}return o}function $r(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),o=r&&r.size==0,u=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(u<0)return null;let s=i.resolve(u),a,l;if(ji(n)){for(a=s;r&&!r.node;)r=r.parent;let c=r.node;if(r&&c.isAtom&&q.isSelectable(c)&&r.parent&&!(c.isInline&&$f(n.focusNode,n.focusOffset,r.dom))){let f=r.posBefore;l=new q(u==f?s:i.resolve(f))}}else{let c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;a=i.resolve(c)}if(!l){let c=e=="pointer"||t.state.selection.head<s.pos&&!o?1:-1;l=Vr(t,a,s,c)}return l}function Ys(t){return t.editable?t.hasFocus():ea(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function rt(t,e=!1){let n=t.state.selection;if(Qs(t,n),!!Ys(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ge){let i=t.domSelectionRange(),r=t.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&Rt(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bd(t);else{let{anchor:i,head:r}=n,o,u;Ko&&!(n instanceof K)&&(n.$from.parent.inlineContent||(o=Zo(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(u=Zo(t,n.to))),t.docView.setSelection(i,r,t.root,e),Ko&&(o&&Go(o),u&&Go(u)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_d(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Ko=xe||ge&&Ls<63;function Zo(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(xe&&r&&r.contentEditable=="false")return Wi(r);if((!r||r.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(r)return Wi(r);if(o)return Wi(o)}}function Wi(t){return t.contentEditable="true",xe&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Go(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _d(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Ys(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bd(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let i=t.cursorWrapper.dom,r=i.nodeName=="IMG";r?n.setStart(i.parentNode,ce(i)+1):n.setStart(i,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!r&&!t.state.selection.visible&&ve&&yt<=11&&(i.disabled=!0,i.disabled=!1)}function Qs(t,e){if(e instanceof q){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Xo(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Xo(t)}function Xo(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Vr(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||K.between(e,n,i)}function Yo(t){return t.editable&&!t.hasFocus()?!1:ea(t)}function ea(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function yd(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Rt(e.node,e.offset,n.anchorNode,n.anchorOffset)}function xr(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),o=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return o&&U.findFrom(o,e)}function lt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Qo(t,e,n){let i=t.state.selection;if(i instanceof K)if(n.indexOf("s")>-1){let{$head:r}=i,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let u=t.state.doc.resolve(r.pos+o.nodeSize*(e<0?-1:1));return lt(t,new K(i.$anchor,u))}else if(i.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let r=xr(t.state,e);return r&&r instanceof q?lt(t,r):!1}else if(!(Ie&&n.indexOf("m")>-1)){let r=i.$head,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,u;if(!o||o.isText)return!1;let s=e<0?r.pos-o.nodeSize:r.pos;return o.isAtom||(u=t.docView.descAt(s))&&!u.contentDOM?q.isSelectable(o)?lt(t,new q(e<0?t.state.doc.resolve(r.pos-o.nodeSize):r)):In?lt(t,new K(t.state.doc.resolve(e<0?s:s+o.nodeSize))):!1:!1}}else return!1;else{if(i instanceof q&&i.node.isInline)return lt(t,new K(e>0?i.$to:i.$from));{let r=xr(t.state,e);return r?lt(t,r):!1}}}function fi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function bn(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function qt(t,e){return e<0?kd(t):xd(t)}function kd(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,o,u=!1;for(qe&&n.nodeType==1&&i<fi(n)&&bn(n.childNodes[i],-1)&&(u=!0);;)if(i>0){if(n.nodeType!=1)break;{let s=n.childNodes[i-1];if(bn(s,-1))r=n,o=--i;else if(s.nodeType==3)n=s,i=n.nodeValue.length;else break}}else{if(ta(n))break;{let s=n.previousSibling;for(;s&&bn(s,-1);)r=n.parentNode,o=ce(s),s=s.previousSibling;if(s)n=s,i=fi(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}u?wr(t,n,i):r&&wr(t,r,o)}function xd(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r=fi(n),o,u;for(;;)if(i<r){if(n.nodeType!=1)break;let s=n.childNodes[i];if(bn(s,1))o=n,u=++i;else break}else{if(ta(n))break;{let s=n.nextSibling;for(;s&&bn(s,1);)o=s.parentNode,u=ce(s)+1,s=s.nextSibling;if(s)n=s,i=0,r=fi(n);else{if(n=n.parentNode,n==t.dom)break;i=r=0}}}o&&wr(t,o,u)}function ta(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function wd(t,e){for(;t&&e==t.childNodes.length&&!Fn(t);)e=ce(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function jd(t,e){for(;t&&!e&&!Fn(t);)e=ce(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function wr(t,e,n){if(e.nodeType!=3){let o,u;(u=wd(e,n))?(e=u,n=0):(o=jd(e,n))&&(e=o,n=o.nodeValue.length)}let i=t.domSelection();if(!i)return;if(ji(i)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),i.removeAllRanges(),i.addRange(o)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout(()=>{t.state==r&&rt(t)},50)}function eu(t,e){let n=t.state.doc.resolve(e);if(!(ge||Uf)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),u=(o.top+o.bottom)/2;if(u>r.top&&u<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),u=(o.top+o.bottom)/2;if(u>r.top&&u<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function tu(t,e,n){let i=t.state.selection;if(i instanceof K&&!i.empty||n.indexOf("s")>-1||Ie&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let u=xr(t.state,e);if(u&&u instanceof q)return lt(t,u)}if(!r.parent.inlineContent){let u=e<0?r:o,s=i instanceof Me?U.near(u,e):U.findFrom(u,e);return s?lt(t,s):!1}return!1}function nu(t,e){if(!(t.state.selection instanceof K))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let u=t.state.tr;return e<0?u.delete(n.pos-o.nodeSize,n.pos):u.delete(n.pos,n.pos+o.nodeSize),t.dispatch(u),!0}return!1}function iu(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Cd(t){if(!xe||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;iu(t,i,"true"),setTimeout(()=>iu(t,i,"false"),20)}return!1}function vd(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Dd(t,e){let n=e.keyCode,i=vd(e);if(n==8||Ie&&n==72&&i=="c")return nu(t,-1)||qt(t,-1);if(n==46&&!e.shiftKey||Ie&&n==68&&i=="c")return nu(t,1)||qt(t,1);if(n==13||n==27)return!0;if(n==37||Ie&&n==66&&i=="c"){let r=n==37?eu(t,t.state.selection.from)=="ltr"?-1:1:-1;return Qo(t,r,i)||qt(t,r)}else if(n==39||Ie&&n==70&&i=="c"){let r=n==39?eu(t,t.state.selection.from)=="ltr"?1:-1:1;return Qo(t,r,i)||qt(t,r)}else{if(n==38||Ie&&n==80&&i=="c")return tu(t,-1,i)||qt(t,-1);if(n==40||Ie&&n==78&&i=="c")return Cd(t)||tu(t,1,i)||qt(t,1);if(i==(Ie?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function na(t,e){t.someProp("transformCopied",g=>{e=g(e,t)});let n=[],{content:i,openStart:r,openEnd:o}=e;for(;r>1&&o>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,o--;let g=i.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),i=g.content}let u=t.someProp("clipboardSerializer")||un.fromSchema(t.state.schema),s=aa(),a=s.createElement("div");a.appendChild(u.serializeFragment(i,{document:s}));let l=a.firstChild,c,f=0;for(;l&&l.nodeType==1&&(c=sa[l.nodeName.toLowerCase()]);){for(let g=c.length-1;g>=0;g--){let h=s.createElement(c[g]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),f++}l=a.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${r} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",g=>g(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function ia(t,e,n,i,r){let o=r.parent.type.spec.code,u,s;if(!n&&!e)return null;let a=e&&(i||o||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,o||i,t)}),o)return e?new F(T.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):F.empty;let f=t.someProp("clipboardTextParser",d=>d(e,r,i,t));if(f)s=f;else{let d=r.marks(),{schema:g}=t.state,h=un.fromSchema(g);u=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let v=u.appendChild(document.createElement("p"));w&&v.appendChild(h.serializeNode(g.text(w,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),u=Ad(n),In&&Md(u);let l=u&&u.querySelector("[data-pm-slice]"),c=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let f=+c[3];f>0;f--){let d=u.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;u=d}if(s||(s=(t.someProp("clipboardParser")||t.someProp("domParser")||wn.fromSchema(t.state.schema)).parseSlice(u,{preserveWhitespace:!!(a||c),context:r,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!Sd.test(d.parentNode.nodeName)?{ignore:!0}:null}})),c)s=Od(ru(s,+c[1],+c[2]),c[4]);else if(s=F.maxOpen(Ed(s.content,r),!0),s.openStart||s.openEnd){let f=0,d=0;for(let g=s.content.firstChild;f<s.openStart&&!g.type.spec.isolating;f++,g=g.firstChild);for(let g=s.content.lastChild;d<s.openEnd&&!g.type.spec.isolating;d++,g=g.lastChild);s=ru(s,f,d)}return t.someProp("transformPasted",f=>{s=f(s,t)}),s}const Sd=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ed(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,u=[];if(t.forEach(s=>{if(!u)return;let a=r.findWrapping(s.type),l;if(!a)return u=null;if(l=u.length&&o.length&&oa(a,o,s,u[u.length-1],0))u[u.length-1]=l;else{u.length&&(u[u.length-1]=ua(u[u.length-1],o.length));let c=ra(s,a);u.push(c),r=r.matchType(c.type),o=a}}),u)return T.from(u)}return t}function ra(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,T.from(t));return t}function oa(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let o=oa(t,e,n,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(T.from(ra(n,t,r+1))))}}function ua(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ua(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(T.empty,!0);return t.copy(n.append(i))}function jr(t,e,n,i,r,o){let u=e<0?t.firstChild:t.lastChild,s=u.content;return t.childCount>1&&(o=0),r<i-1&&(s=jr(s,e,n,i,r+1,o)),r>=n&&(s=e<0?u.contentMatchAt(0).fillBefore(s,o<=r).append(s):s.append(u.contentMatchAt(u.childCount).fillBefore(T.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,u.copy(s))}function ru(t,e,n){return e<t.openStart&&(t=new F(jr(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new F(jr(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const sa={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ou=null;function aa(){return ou||(ou=document.implementation.createHTMLDocument("title"))}function Ad(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=aa().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t),r;if((r=i&&sa[i[1].toLowerCase()])&&(t=r.map(o=>"<"+o+">").join("")+t+r.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,r)for(let o=0;o<r.length;o++)n=n.querySelector(r[o])||n;return n}function Md(t){let e=t.querySelectorAll(ge?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}function Od(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return t}let{content:r,openStart:o,openEnd:u}=t;for(let s=i.length-2;s>=0;s-=2){let a=n.nodes[i[s]];if(!a||a.hasRequiredAttrs())break;r=T.from(a.create(i[s+1],r)),o++,u++}return new F(r,o,u)}const we={},je={},Td={touchstart:!0,touchmove:!0};class Nd{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Fd(t){for(let e in we){let n=we[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{Rd(t,i)&&!Hr(t,i)&&(t.editable||!(i.type in je))&&n(t,i)},Td[e]?{passive:!0}:void 0)}xe&&t.dom.addEventListener("input",()=>null),Cr(t)}function _t(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Id(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Cr(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>Hr(t,i))})}function Hr(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return i?i(t,e)||e.defaultPrevented:!1})}function Rd(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Bd(t,e){!Hr(t,e)&&we[e.type]&&(t.editable||!(e.type in je))&&we[e.type](t,e)}je.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!ca(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Pe&&ge&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Yt&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",r=>r(t,St(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",i=>i(t,n))||Dd(t,n)?n.preventDefault():_t(t,"key")};je.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};je.keypress=(t,e)=>{let n=e;if(ca(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ie&&n.metaKey)return;if(t.someProp("handleKeyPress",r=>r(t,n))){n.preventDefault();return}let i=t.state.selection;if(!(i instanceof K)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(n.charCode);!/[\r\n]/.test(r)&&!t.someProp("handleTextInput",o=>o(t,i.$from.pos,i.$to.pos,r))&&t.dispatch(t.state.tr.insertText(r).scrollIntoView()),n.preventDefault()}};function vi(t){return{left:t.clientX,top:t.clientY}}function zd(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function Ur(t,e,n,i,r){if(i==-1)return!1;let o=t.state.doc.resolve(i);for(let u=o.depth+1;u>0;u--)if(t.someProp(e,s=>u>o.depth?s(t,n,o.nodeAfter,o.before(u),r,!0):s(t,n,o.node(u),o.before(u),r,!1)))return!0;return!1}function Jt(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let i=t.state.tr.setSelection(e);i.setMeta("pointer",!0),t.dispatch(i)}function Pd(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return i&&i.isAtom&&q.isSelectable(i)?(Jt(t,new q(n)),!0):!1}function Ld(t,e){if(e==-1)return!1;let n=t.state.selection,i,r;n instanceof q&&(i=n.node);let o=t.state.doc.resolve(e);for(let u=o.depth+1;u>0;u--){let s=u>o.depth?o.nodeAfter:o.node(u);if(q.isSelectable(s)){i&&n.$from.depth>0&&u>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?r=o.before(n.$from.depth):r=o.before(u);break}}return r!=null?(Jt(t,q.create(t.state.doc,r)),!0):!1}function qd(t,e,n,i,r){return Ur(t,"handleClickOn",e,n,i)||t.someProp("handleClick",o=>o(t,e,i))||(r?Ld(t,n):Pd(t,n))}function $d(t,e,n,i){return Ur(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",r=>r(t,e,i))}function Vd(t,e,n,i){return Ur(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",r=>r(t,e,i))||Hd(t,n,i)}function Hd(t,e,n){if(n.button!=0)return!1;let i=t.state.doc;if(e==-1)return i.inlineContent?(Jt(t,K.create(i,0,i.content.size)),!0):!1;let r=i.resolve(e);for(let o=r.depth+1;o>0;o--){let u=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(u.inlineContent)Jt(t,K.create(i,s+1,s+1+u.content.size));else if(q.isSelectable(u))Jt(t,q.create(i,s));else continue;return!0}}function Wr(t){return di(t)}const la=Ie?"metaKey":"ctrlKey";we.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=Wr(t),r=Date.now(),o="singleClick";r-t.input.lastClick.time<500&&zd(n,t.input.lastClick)&&!n[la]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o};let u=t.posAtCoords(vi(n));u&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ud(t,u,n,!!i)):(o=="doubleClick"?$d:Vd)(t,u.pos,u.inside,n)?n.preventDefault():_t(t,"pointer"))};class Ud{constructor(e,n,i,r){this.view=e,this.pos=n,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[la],this.allowDefault=i.shiftKey;let o,u;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),u=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,u=c.depth?c.before():0}const s=r?null:i.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:l}=e.state;(i.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||l instanceof q&&l.from<=u&&l.to>u)&&(this.mightDrag={node:o,pos:u,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qe&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),_t(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>rt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(vi(e))),this.updateAllowDefault(e),this.allowDefault||!n?_t(this.view,"pointer"):qd(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xe&&this.mightDrag&&!this.mightDrag.node.isAtom||ge&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Jt(this.view,U.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):_t(this.view,"pointer")}move(e){this.updateAllowDefault(e),_t(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}we.touchstart=t=>{t.input.lastTouch=Date.now(),Wr(t),_t(t,"pointer")};we.touchmove=t=>{t.input.lastTouch=Date.now(),_t(t,"pointer")};we.contextmenu=t=>Wr(t);function ca(t,e){return t.composing?!0:xe&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Wd=Pe?5e3:-1;je.compositionstart=je.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof K&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),di(t,!0),t.markCursor=null;else if(di(t,!e.selection.empty),qe&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let r=i.focusNode,o=i.focusOffset;r&&r.nodeType==1&&o!=0;){let u=o<0?r.lastChild:r.childNodes[o-1];if(!u)break;if(u.nodeType==3){let s=t.domSelection();s&&s.collapse(u,u.nodeValue.length);break}else r=u,o=-1}}t.input.composing=!0}fa(t,Wd)};je.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,fa(t,20))};function fa(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>di(t),e))}function da(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Kd());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Jd(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Lf(e.focusNode,e.focusOffset),i=qf(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let r=i.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||i==o)return o;if(!r||!r.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let u=n.pmViewDesc;if(!(!u||!u.isText(n.nodeValue)))return i}}return n||i}function Kd(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function di(t,e=!1){if(!(Pe&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),da(t),e||t.docView&&t.docView.dirty){let n=$r(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Zd(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Dn=ve&&yt<15||Yt&&Wf<604;we.copy=je.cut=(t,e)=>{let n=e,i=t.state.selection,r=n.type=="cut";if(i.empty)return;let o=Dn?null:n.clipboardData,u=i.content(),{dom:s,text:a}=na(t,u);o?(n.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):Zd(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Gd(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Xd(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Sn(t,i.value,null,r,e):Sn(t,i.textContent,i.innerHTML,r,e)},50)}function Sn(t,e,n,i,r){let o=ia(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,r,o||F.empty)))return!0;if(!o)return!1;let u=Gd(o),s=u?t.state.tr.replaceSelectionWith(u,i):t.state.tr.replaceSelection(o);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ha(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}je.paste=(t,e)=>{let n=e;if(t.composing&&!Pe)return;let i=Dn?null:n.clipboardData,r=t.input.shiftKey&&t.input.lastKeyCode!=45;i&&Sn(t,ha(i),i.getData("text/html"),r,n)?n.preventDefault():Xd(t,n)};class ma{constructor(e,n,i){this.slice=e,this.move=n,this.node=i}}const pa=Ie?"altKey":"ctrlKey";we.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=t.state.selection,o=r.empty?null:t.posAtCoords(vi(n)),u;if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof q?r.to-1:r.to))){if(i&&i.mightDrag)u=q.create(t.state.doc,i.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(u=q.create(t.state.doc,f.posBefore))}}let s=(u||t.state.selection).content(),{dom:a,text:l,slice:c}=na(t,s);(!n.dataTransfer.files.length||!ge||Ls>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Dn?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Dn||n.dataTransfer.setData("text/plain",l),t.dragging=new ma(c,!n[pa],u)};we.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};je.dragover=je.dragenter=(t,e)=>e.preventDefault();je.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(vi(n));if(!r)return;let o=t.state.doc.resolve(r.pos),u=i&&i.slice;u?t.someProp("transformPasted",h=>{u=h(u,t)}):u=ia(t,ha(n.dataTransfer),Dn?null:n.dataTransfer.getData("text/html"),!1,o);let s=!!(i&&!n[pa]);if(t.someProp("handleDrop",h=>h(t,n,u||F.empty,s))){n.preventDefault();return}if(!u)return;n.preventDefault();let a=u?As(t.state.doc,o.pos,u):o.pos;a==null&&(a=o.pos);let l=t.state.tr;if(s){let{node:h}=i;h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(a),f=u.openStart==0&&u.openEnd==0&&u.content.childCount==1,d=l.doc;if(f?l.replaceRangeWith(c,c,u.content.firstChild):l.replaceRange(c,c,u),l.doc.eq(d))return;let g=l.doc.resolve(c);if(f&&q.isSelectable(u.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(u.content.firstChild))l.setSelection(new q(g));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((w,v,M,N)=>h=N),l.setSelection(Vr(t,g,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))};we.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&rt(t)},20))};we.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};we.beforeinput=(t,e)=>{if(ge&&Pe&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,St(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in je)we[t]=je[t];function En(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class hi{constructor(e,n){this.toDOM=e,this.spec=n||Nt,this.side=this.spec.side||0}map(e,n,i,r){let{pos:o,deleted:u}=e.mapResult(n.from+r,this.side<0?-1:1);return u?null:new Ae(o-i,o-i,this)}valid(){return!0}eq(e){return this==e||e instanceof hi&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&En(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xt{constructor(e,n){this.attrs=e,this.spec=n||Nt}map(e,n,i,r){let o=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-i,u=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-i;return o>=u?null:new Ae(o,u,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof xt&&En(this.attrs,e.attrs)&&En(this.spec,e.spec)}static is(e){return e.type instanceof xt}destroy(){}}class Jr{constructor(e,n){this.attrs=e,this.spec=n||Nt}map(e,n,i,r){let o=e.mapResult(n.from+r,1);if(o.deleted)return null;let u=e.mapResult(n.to+r,-1);return u.deleted||u.pos<=o.pos?null:new Ae(o.pos-i,u.pos-i,this)}valid(e,n){let{index:i,offset:r}=e.content.findIndex(n.from),o;return r==n.from&&!(o=e.child(i)).isText&&r+o.nodeSize==n.to}eq(e){return this==e||e instanceof Jr&&En(this.attrs,e.attrs)&&En(this.spec,e.spec)}destroy(){}}class Ae{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new Ae(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new Ae(e,e,new hi(n,i))}static inline(e,n,i,r){return new Ae(e,n,new xt(i,r))}static node(e,n,i,r){return new Ae(e,n,new Jr(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof xt}get widget(){return this.type instanceof hi}}const Ht=[],Nt={};class ne{constructor(e,n){this.local=e.length?e:Ht,this.children=n.length?n:Ht}static create(e,n){return n.length?mi(n,e,0,Nt):me}find(e,n,i){let r=[];return this.findInner(e??0,n??1e9,r,0,i),r}findInner(e,n,i,r,o){for(let u=0;u<this.local.length;u++){let s=this.local[u];s.from<=n&&s.to>=e&&(!o||o(s.spec))&&i.push(s.copy(s.from+r,s.to+r))}for(let u=0;u<this.children.length;u+=3)if(this.children[u]<n&&this.children[u+1]>e){let s=this.children[u]+1;this.children[u+2].findInner(e-s,n-s,i,r+s,o)}}map(e,n,i){return this==me||e.maps.length==0?this:this.mapInner(e,n,0,0,i||Nt)}mapInner(e,n,i,r,o){let u;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,i,r);a&&a.type.valid(n,a)?(u||(u=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?Yd(this.children,u||[],e,n,i,r,o):u?new ne(u.sort(Ft),Ht):me}add(e,n){return n.length?this==me?ne.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let r,o=0;e.forEach((s,a)=>{let l=a+i,c;if(c=_a(n,s,l)){for(r||(r=this.children.slice());o<r.length&&r[o]<a;)o+=3;r[o]==a?r[o+2]=r[o+2].addInner(s,c,l+1):r.splice(o,0,a,a+s.nodeSize,mi(c,s,l+1,Nt)),o+=3}});let u=ga(o?ba(n):n,-i);for(let s=0;s<u.length;s++)u[s].type.valid(e,u[s])||u.splice(s--,1);return new ne(u.length?this.local.concat(u).sort(Ft):this.local,r||this.children)}remove(e){return e.length==0||this==me?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,r=this.local;for(let o=0;o<i.length;o+=3){let u,s=i[o]+n,a=i[o+1]+n;for(let c=0,f;c<e.length;c++)(f=e[c])&&f.from>s&&f.to<a&&(e[c]=null,(u||(u=[])).push(f));if(!u)continue;i==this.children&&(i=this.children.slice());let l=i[o+2].removeInner(u,s+1);l!=me?i[o+2]=l:(i.splice(o,3),o-=3)}if(r.length){for(let o=0,u;o<e.length;o++)if(u=e[o])for(let s=0;s<r.length;s++)r[s].eq(u,n)&&(r==this.local&&(r=this.local.slice()),r.splice(s--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new ne(r,i):me}forChild(e,n){if(this==me)return this;if(n.isLeaf)return ne.empty;let i,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(i=this.children[s+2]);break}let o=e+1,u=o+n.content.size;for(let s=0;s<this.local.length;s++){let a=this.local[s];if(a.from<u&&a.to>o&&a.type instanceof xt){let l=Math.max(o,a.from)-o,c=Math.min(u,a.to)-o;l<c&&(r||(r=[])).push(a.copy(l,c))}}if(r){let s=new ne(r.sort(Ft),Ht);return i?new ft([s,i]):s}return i||me}eq(e){if(this==e)return!0;if(!(e instanceof ne)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Kr(this.localsInner(e))}localsInner(e){if(this==me)return Ht;if(e.inlineContent||!this.local.some(xt.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof xt||n.push(this.local[i]);return n}forEachSet(e){e(this)}}ne.empty=new ne([],[]);ne.removeOverlap=Kr;const me=ne.empty;class ft{constructor(e){this.members=e}map(e,n){const i=this.members.map(r=>r.map(e,n,Nt));return ft.from(i)}forChild(e,n){if(n.isLeaf)return ne.empty;let i=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,n);o!=me&&(o instanceof ft?i=i.concat(o.members):i.push(o))}return ft.from(i)}eq(e){if(!(e instanceof ft)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(!n)n=o;else{i&&(n=n.slice(),i=!1);for(let u=0;u<o.length;u++)n.push(o[u])}}return n?Kr(i?n:n.sort(Ft)):Ht}static from(e){switch(e.length){case 0:return me;case 1:return e[0];default:return new ft(e.every(n=>n instanceof ne)?e:e.reduce((n,i)=>n.concat(i instanceof ne?i:i.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Yd(t,e,n,i,r,o,u){let s=t.slice();for(let l=0,c=o;l<n.maps.length;l++){let f=0;n.maps[l].forEach((d,g,h,w)=>{let v=w-h-(g-d);for(let M=0;M<s.length;M+=3){let N=s[M+1];if(N<0||d>N+c-f)continue;let I=s[M]+c-f;g>=I?s[M+1]=d<=I?-2:-1:d>=c&&v&&(s[M]+=v,s[M+1]+=v)}f+=v}),c=n.maps[l].map(c,-1)}let a=!1;for(let l=0;l<s.length;l+=3)if(s[l+1]<0){if(s[l+1]==-2){a=!0,s[l+1]=-1;continue}let c=n.map(t[l]+o),f=c-r;if(f<0||f>=i.content.size){a=!0;continue}let d=n.map(t[l+1]+o,-1),g=d-r,{index:h,offset:w}=i.content.findIndex(f),v=i.maybeChild(h);if(v&&w==f&&w+v.nodeSize==g){let M=s[l+2].mapInner(n,v,c+1,t[l]+o+1,u);M!=me?(s[l]=f,s[l+1]=g,s[l+2]=M):(s[l+1]=-2,a=!0)}else a=!0}if(a){let l=Qd(s,t,e,n,r,o,u),c=mi(l,i,0,u);e=c.local;for(let f=0;f<s.length;f+=3)s[f+1]<0&&(s.splice(f,3),f-=3);for(let f=0,d=0;f<c.children.length;f+=3){let g=c.children[f];for(;d<s.length&&s[d]<g;)d+=3;s.splice(d,0,c.children[f],c.children[f+1],c.children[f+2])}}return new ne(e.sort(Ft),s)}function ga(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new Ae(r.from+e,r.to+e,r.type))}return n}function Qd(t,e,n,i,r,o,u){function s(a,l){for(let c=0;c<a.local.length;c++){let f=a.local[c].map(i,r,l);f?n.push(f):u.onRemove&&u.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)s(a.children[c+2],a.children[c]+l+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&s(t[a+2],e[a]+o+1);return n}function _a(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let o=0,u;o<t.length;o++)(u=t[o])&&u.from>n&&u.to<i&&((r||(r=[])).push(u),t[o]=null);return r}function ba(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function mi(t,e,n,i){let r=[],o=!1;e.forEach((s,a)=>{let l=_a(t,s,a+n);if(l){o=!0;let c=mi(l,s,n+a+1,i);c!=me&&r.push(a,a+s.nodeSize,c)}});let u=ga(o?ba(t):t,-n).sort(Ft);for(let s=0;s<u.length;s++)u[s].type.valid(e,u[s])||(i.onRemove&&i.onRemove(u[s].spec),u.splice(s--,1));return u.length||r.length?new ne(u,r):me}function Ft(t,e){return t.from-e.from||t.to-e.to}function Kr(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let o=e[r];if(o.from==i.from){o.to!=i.to&&(e==t&&(e=t.slice()),e[r]=o.copy(o.from,i.to),uu(e,r+1,o.copy(i.to,o.to)));continue}else{o.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,o.from),uu(e,r,i.copy(o.from,i.to)));break}}}return e}function uu(t,e,n){for(;e<t.length&&Ft(n,t[e])>0;)e++;t.splice(e,0,n)}function Ji(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=me&&e.push(i)}),t.cursorWrapper&&e.push(ne.create(t.state.doc,[t.cursorWrapper.deco])),ft.from(e)}const eh={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},th=ve&&yt<=11;class nh{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ih{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new nh,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);ve&&yt<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),th&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,eh)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Yo(this.view)){if(this.suppressingSelectionUpdates)return rt(this.view);if(ve&&yt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Rt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,i;for(let o=e.focusNode;o;o=vn(o))n.add(o);for(let o=e.anchorNode;o;o=vn(o))if(n.has(o)){i=o;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Yo(e)&&!this.ignoreSelectionChange(i),o=-1,u=-1,s=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let f=this.registerMutation(n[c],a);f&&(o=o<0?f.from:Math.min(f.from,o),u=u<0?f.to:Math.max(f.to,u),f.typeOver&&(s=!0))}if(qe&&a.length){let c=a.filter(f=>f.nodeName=="BR");if(c.length==2){let[f,d]=c;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of c){let g=d.parentNode;g&&g.nodeName=="LI"&&(!f||uh(e,f)!=g)&&d.remove()}}}let l=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ji(i)&&(l=$r(e))&&l.eq(U.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,rt(e),this.currentSelection.set(i),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,u),rh(e)),this.handleDOMChange(o,u,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||rt(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let f=e.addedNodes[c];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,o=e.nextSibling;if(ve&&yt<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:f,nextSibling:d}=e.addedNodes[c];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(r=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let u=r&&r.parentNode==e.target?ce(r)+1:0,s=i.localPosFromDOM(e.target,u,-1),a=o&&o.parentNode==e.target?ce(o):e.target.childNodes.length,l=i.localPosFromDOM(e.target,a,1);return{from:s,to:l}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let su=new WeakMap,au=!1;function rh(t){if(!su.has(t)&&(su.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qe,au)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),au=!0}}function lu(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,u=t.domAtPos(t.state.selection.anchor);return Rt(u.node,u.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}function oh(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return lu(t,r)}let n;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?lu(t,n):null}function uh(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let i=t.docView.nearestDesc(n,!0);if(i&&i.node.isBlock)return n}return null}function sh(t,e,n){let{node:i,fromOffset:r,toOffset:o,from:u,to:s}=t.docView.parseRange(e,n),a=t.domSelectionRange(),l,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(l=[{node:c,offset:a.anchorOffset}],ji(a)||l.push({node:a.focusNode,offset:a.focusOffset})),ge&&t.input.lastKeyCode===8)for(let v=o;v>r;v--){let M=i.childNodes[v-1],N=M.pmViewDesc;if(M.nodeName=="BR"&&!N){o=v;break}if(!N||N.size)break}let f=t.state.doc,d=t.someProp("domParser")||wn.fromSchema(t.state.schema),g=f.resolve(u),h=null,w=d.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:r,to:o,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:ah,context:g});if(l&&l[0].pos!=null){let v=l[0].pos,M=l[1]&&l[1].pos;M==null&&(M=v),h={anchor:v+u,head:M+u}}return{doc:w,sel:h,from:u,to:s}}function ah(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(xe&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||xe&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const lh=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ch(t,e,n,i,r){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let $=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,re=$r(t,$);if(re&&!t.state.selection.eq(re)){if(ge&&Pe&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",Dt=>Dt(t,St(13,"Enter"))))return;let Te=t.state.tr.setSelection(re);$=="pointer"?Te.setMeta("pointer",!0):$=="key"&&Te.scrollIntoView(),o&&Te.setMeta("composition",o),t.dispatch(Te)}return}let u=t.state.doc.resolve(e),s=u.sharedDepth(n);e=u.before(s+1),n=t.state.doc.resolve(n).after(s+1);let a=t.state.selection,l=sh(t,e,n),c=t.state.doc,f=c.slice(l.from,l.to),d,g;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,g="end"):(d=t.state.selection.from,g="start"),t.input.lastKeyCode=null;let h=hh(f.content,l.doc.content,l.from,d,g);if(h&&t.input.domChangeCount++,(Yt&&t.input.lastIOSEnter>Date.now()-225||Pe)&&r.some($=>$.nodeType==1&&!lh.test($.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",$=>$(t,St(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(i&&a instanceof K&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let $=cu(t,t.state.doc,l.sel);if($&&!$.eq(t.state.selection)){let re=t.state.tr.setSelection($);o&&re.setMeta("composition",o),t.dispatch(re)}}return}t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof K&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),ve&&yt<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>l.from&&l.doc.textBetween(h.start-l.from-1,h.start-l.from+1)==" "&&(h.start--,h.endA--,h.endB--);let w=l.doc.resolveNoCache(h.start-l.from),v=l.doc.resolveNoCache(h.endB-l.from),M=c.resolve(h.start),N=w.sameParent(v)&&w.parent.inlineContent&&M.end()>=h.endA,I;if((Yt&&t.input.lastIOSEnter>Date.now()-225&&(!N||r.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!N&&w.pos<l.doc.content.size&&!w.sameParent(v)&&(I=U.findFrom(l.doc.resolve(w.pos+1),1,!0))&&I.head==v.pos)&&t.someProp("handleKeyDown",$=>$(t,St(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&dh(c,h.start,h.endA,w,v)&&t.someProp("handleKeyDown",$=>$(t,St(8,"Backspace")))){Pe&&ge&&t.domObserver.suppressSelectionUpdates();return}ge&&Pe&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),Pe&&!N&&w.start()!=v.start()&&v.parentOffset==0&&w.depth==v.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==h.endA&&(h.endB-=2,v=l.doc.resolveNoCache(h.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function($){return $(t,St(13,"Enter"))})},20));let R=h.start,L=h.endA,z,G,ee;if(N){if(w.pos==v.pos)ve&&yt<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>rt(t),20)),z=t.state.tr.delete(R,L),G=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(ee=fh(w.parent.content.cut(w.parentOffset,v.parentOffset),M.parent.content.cut(M.parentOffset,h.endA-M.start()))))z=t.state.tr,ee.type=="add"?z.addMark(R,L,ee.mark):z.removeMark(R,L,ee.mark);else if(w.parent.child(w.index()).isText&&w.index()==v.index()-(v.textOffset?0:1)){let $=w.parent.textBetween(w.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",re=>re(t,R,L,$)))return;z=t.state.tr.insertText($,R,L)}}if(z||(z=t.state.tr.replace(R,L,l.doc.slice(h.start-l.from,h.endB-l.from))),l.sel){let $=cu(t,z.doc,l.sel);$&&!(ge&&Pe&&t.composing&&$.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&($.head==R||$.head==z.mapping.map(L)-1)||ve&&$.empty&&$.head==R)&&z.setSelection($)}G&&z.ensureMarks(G),o&&z.setMeta("composition",o),t.dispatch(z.scrollIntoView())}function cu(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Vr(t,e.resolve(n.anchor),e.resolve(n.head))}function fh(t,e){let n=t.firstChild.marks,i=e.firstChild.marks,r=n,o=i,u,s,a;for(let c=0;c<i.length;c++)r=i[c].removeFromSet(r);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(r.length==1&&o.length==0)s=r[0],u="add",a=c=>c.mark(s.addToSet(c.marks));else if(r.length==0&&o.length==1)s=o[0],u="remove",a=c=>c.mark(s.removeFromSet(c.marks));else return null;let l=[];for(let c=0;c<e.childCount;c++)l.push(a(e.child(c)));if(T.from(l).eq(t))return{mark:s,type:u}}function dh(t,e,n,i,r){if(n-e<=r.pos-i.pos||Ki(i,!0,!1)<r.pos)return!1;let o=t.resolve(e);if(!i.parent.isTextblock){let s=o.nodeAfter;return s!=null&&n==e+s.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let u=t.resolve(Ki(o,!0,!0));return!u.parent.isTextblock||u.pos>n||Ki(u,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(u.parent.content)}function Ki(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let o=t.node(i).maybeChild(t.indexAfter(i));for(;o&&!o.isLeaf;)o=o.firstChild,r++}return r}function hh(t,e,n,i,r){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:u,b:s}=t.findDiffEnd(e,n+t.size,n+e.size);if(r=="end"){let a=Math.max(0,o-Math.min(u,s));i-=u+a-o}if(u<o&&t.size<e.size){let a=i<=o&&i>=u?o-i:0;o-=a,o&&o<e.size&&fu(e.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-u),u=o}else if(s<o){let a=i<=o&&i>=s?o-i:0;o-=a,o&&o<t.size&&fu(t.textBetween(o-1,o+1))&&(o+=a?1:-1),u=o+(u-s),s=o}return{start:o,endA:u,endB:s}}function fu(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Y1{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Nd,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(gu),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=mu(this),hu(this),this.nodeViews=pu(this),this.docView=Wo(this.state.doc,du(this),Ji(this),this.dom,this),this.domObserver=new ih(this,(i,r,o,u)=>ch(this,i,r,o,u)),this.domObserver.start(),Fd(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Cr(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(gu),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var i;let r=this.state,o=!1,u=!1;e.storedMarks&&this.composing&&(da(this),u=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(s||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=pu(this);ph(g,this.nodeViews)&&(this.nodeViews=g,o=!0)}(s||n.handleDOMEvents!=this._props.handleDOMEvents)&&Cr(this),this.editable=mu(this),hu(this);let a=Ji(this),l=du(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,l,a);(f||!e.selection.eq(r.selection))&&(u=!0);let d=c=="preserve"&&u&&this.dom.style.overflowAnchor==null&&Zf(this);if(u){this.domObserver.stop();let g=f&&(ve||ge)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&mh(r.selection,e.selection);if(f){let h=ge?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Jd(this)),(o||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=Wo(e.doc,l,a,this.dom,this)),h&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&yd(this))?rt(this,g):(Qs(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&Gf(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof q){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Lo(this,n.getBoundingClientRect(),e)}else Lo(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}}updateDraggedNode(e,n){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let o=i.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==i.node&&(r=o)}this.dragging=new ma(e.slice,e.move,r<0?void 0:q.create(this.state.doc,r))}someProp(e,n){let i=this._props&&this._props[e],r;if(i!=null&&(r=n?n(i):i))return r;for(let u=0;u<this.directPlugins.length;u++){let s=this.directPlugins[u].props[e];if(s!=null&&(r=n?n(s):s))return r}let o=this.state.plugins;if(o)for(let u=0;u<o.length;u++){let s=o[u].props[e];if(s!=null&&(r=n?n(s):s))return r}}hasFocus(){if(ve){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xf(this.dom),rt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nd(this,e)}coordsAtPos(e,n=1){return Us(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let r=this.docView.posFromDOM(e,n,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return sd(this,n||this.state,e)}pasteHTML(e,n){return Sn(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Sn(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(Id(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ji(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zf())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Bd(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?xe&&this.root.nodeType===11&&Vf(this.dom.ownerDocument)==this.dom&&oh(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function du(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let i in n)i=="class"?e.class+=" "+n[i]:i=="style"?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(n[i]))}),e.translate||(e.translate="no"),[Ae.node(0,t.state.doc.content.size,e)]}function hu(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ae.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function mu(t){return!t.someProp("editable",e=>e(t.state)===!1)}function mh(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function pu(t){let e=Object.create(null);function n(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function ph(t,e){let n=0,i=0;for(let r in t){if(t[r]!=e[r])return!0;n++}for(let r in e)i++;return n!=i}function gu(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}class te extends U{constructor(e){super(e,e)}map(e,n){let i=e.resolve(n.map(this.head));return te.valid(i)?new te(i):U.near(i)}content(){return F.empty}eq(e){return e instanceof te&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new te(e.resolve(n.pos))}getBookmark(){return new Zr(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!gh(e)||!_h(e))return!1;let i=n.type.spec.allowGapCursor;if(i!=null)return i;let r=n.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,n,i=!1){e:for(;;){if(!i&&te.valid(e))return e;let r=e.pos,o=null;for(let u=e.depth;;u--){let s=e.node(u);if(n>0?e.indexAfter(u)<s.childCount:e.index(u)>0){o=s.child(n>0?e.indexAfter(u):e.index(u)-1);break}else if(u==0)return null;r+=n;let a=e.doc.resolve(r);if(te.valid(a))return a}for(;;){let u=n>0?o.firstChild:o.lastChild;if(!u){if(o.isAtom&&!o.isText&&!q.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*n),i=!1;continue e}break}o=u,r+=n;let s=e.doc.resolve(r);if(te.valid(s))return s}return null}}}te.prototype.visible=!1;te.findFrom=te.findGapCursorFrom;U.jsonID("gapcursor",te);class Zr{constructor(e){this.pos=e}map(e){return new Zr(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return te.valid(n)?new te(n):U.near(n)}}function gh(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),i=t.node(e);if(n==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(n-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function _h(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),i=t.node(e);if(n==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(n);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function bh(){return new Ct({props:{decorations:wh,createSelectionBetween(t,e,n){return e.pos==n.pos&&te.valid(n)?new te(n):null},handleClick:kh,handleKeyDown:yh,handleDOMEvents:{beforeinput:xh}}})}const yh=zs({ArrowLeft:Vn("horiz",-1),ArrowRight:Vn("horiz",1),ArrowUp:Vn("vert",-1),ArrowDown:Vn("vert",1)});function Vn(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,r,o){let u=i.selection,s=e>0?u.$to:u.$from,a=u.empty;if(u instanceof K){if(!o.endOfTextblock(n)||s.depth==0)return!1;a=!1,s=i.doc.resolve(e>0?s.after():s.before())}let l=te.findGapCursorFrom(s,e,a);return l?(r&&r(i.tr.setSelection(new te(l))),!0):!1}}function kh(t,e,n){if(!t||!t.editable)return!1;let i=t.state.doc.resolve(e);if(!te.valid(i))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return r&&r.inside>-1&&q.isSelectable(t.state.doc.nodeAt(r.inside))?!1:(t.dispatch(t.state.tr.setSelection(new te(i))),!0)}function xh(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof te))return!1;let{$from:n}=t.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!i)return!1;let r=T.empty;for(let u=i.length-1;u>=0;u--)r=T.from(i[u].createAndFill(null,r));let o=t.state.tr.replace(n.pos,n.pos,new F(r,0,0));return o.setSelection(K.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function wh(t){if(!(t.selection instanceof te))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ne.create(t.doc,[Ae.widget(t.selection.head,e,{key:"gapcursor"})])}function Kt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)ya(t,arguments[e]);return t}function ya(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)ya(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const Gr=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function jh(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const ka=(t,e,n)=>{let i=jh(t,n);if(!i)return!1;let r=wa(i);if(!r){let u=i.blockRange(),s=u&&xi(u);return s==null?!1:(e&&e(t.tr.lift(u,s).scrollIntoView()),!0)}let o=r.nodeBefore;if(Aa(t,r,e,-1))return!0;if(i.parent.content.size==0&&(Qt(o,"end")||q.isSelectable(o)))for(let u=i.depth;;u--){let s=Pr(t.doc,i.before(u),i.after(u),F.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Qt(o,"end")?U.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):q.create(a.doc,r.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(u==1||i.node(u-1).childCount>1)break}return o.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1};function Qt(t,e,n=!1){for(let i=t;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}const xa=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;o=wa(i)}let u=o&&o.nodeBefore;return!u||!q.isSelectable(u)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,o.pos-u.nodeSize)).scrollIntoView()),!0)};function wa(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ch(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const vh=(t,e,n)=>{let i=Ch(t,n);if(!i)return!1;let r=ja(i);if(!r)return!1;let o=r.nodeAfter;if(Aa(t,r,e,1))return!0;if(i.parent.content.size==0&&(Qt(o,"start")||q.isSelectable(o))){let u=Pr(t.doc,i.before(),i.after(),F.empty);if(u&&u.slice.size<u.to-u.from){if(e){let s=t.tr.step(u);s.setSelection(Qt(o,"start")?U.findFrom(s.doc.resolve(s.mapping.map(r.pos)),1):q.create(s.doc,s.mapping.map(r.pos))),e(s.scrollIntoView())}return!0}}return o.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},Dh=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;o=ja(i)}let u=o&&o.nodeAfter;return!u||!q.isSelectable(u)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,o.pos)).scrollIntoView()),!0)};function ja(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Sh=(t,e)=>{let n=t.selection,i=n instanceof q,r;if(i){if(n.node.isTextblock||!sn(t.doc,n.from))return!1;r=n.from}else if(r=Es(t.doc,n.from,-1),r==null)return!1;if(e){let o=t.tr.join(r);i&&o.setSelection(q.create(o.doc,r-t.doc.resolve(r).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Eh=(t,e)=>{let n=t.selection,i;if(n instanceof q){if(n.node.isTextblock||!sn(t.doc,n.to))return!1;i=n.to}else if(i=Es(t.doc,n.to,1),i==null)return!1;return e&&e(t.tr.join(i).scrollIntoView()),!0},Ca=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Xr(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const va=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),o=n.indexAfter(-1),u=Xr(r.contentMatchAt(o));if(!u||!r.canReplaceWith(o,o,u))return!1;if(e){let s=n.after(),a=t.tr.replaceWith(s,s,u.createAndFill());a.setSelection(U.near(a.doc.resolve(s),1)),e(a.scrollIntoView())}return!0},Da=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof Me||i.parent.inlineContent||r.parent.inlineContent)return!1;let o=Xr(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let u=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,s=t.tr.insert(u,o.createAndFill());s.setSelection(K.create(s.doc,u+1)),e(s.scrollIntoView())}return!0},Sa=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(gn(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let i=n.blockRange(),r=i&&xi(i);return r==null?!1:(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};function Ah(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!i.parentOffset||!gn(e.doc,i.pos)?!1:(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let o=r.parentOffset==r.parent.content.size,u=e.tr;(e.selection instanceof K||e.selection instanceof Me)&&u.deleteSelection();let s=i.depth==0?null:Xr(i.node(-1).contentMatchAt(i.indexAfter(-1))),a=o&&s?[{type:s}]:void 0,l=gn(u.doc,u.mapping.map(i.pos),1,a);if(!a&&!l&&gn(u.doc,u.mapping.map(i.pos),1,s?[{type:s}]:void 0)&&(s&&(a=[{type:s}]),l=!0),l&&(u.split(u.mapping.map(i.pos),1,a),!o&&!i.parentOffset&&i.parent.type!=s)){let c=u.mapping.map(i.before()),f=u.doc.resolve(c);s&&i.node(-1).canReplaceWith(f.index(),f.index()+1,s)&&u.setNodeMarkup(u.mapping.map(i.before()),s)}n(u.scrollIntoView())}return!0}}const Ea=Ah(),Mh=(t,e)=>{let{$from:n,to:i}=t.selection,r,o=n.sharedDepth(i);return o==0?!1:(r=n.before(o),e&&e(t.tr.setSelection(q.create(t.doc,r))),!0)},Oh=(t,e)=>(e&&e(t.tr.setSelection(new Me(t.doc))),!0);function Th(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,o=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||sn(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function Aa(t,e,n,i){let r=e.nodeBefore,o=e.nodeAfter,u,s,a=r.type.spec.isolating||o.type.spec.isolating;if(!a&&Th(t,e,n))return!0;let l=!a&&e.parent.canReplace(e.index(),e.index()+1);if(l&&(u=(s=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&s.matchType(u[0]||o.type).validEnd){if(n){let g=e.pos+o.nodeSize,h=T.empty;for(let M=u.length-1;M>=0;M--)h=T.from(u[M].create(null,h));h=T.from(r.copy(h));let w=t.tr.step(new he(e.pos-1,g,e.pos,g,new F(h,1,0),u.length,!0)),v=g+2*u.length;sn(w.doc,v)&&w.join(v),n(w.scrollIntoView())}return!0}let c=o.type.spec.isolating||i>0&&a?null:U.findFrom(e,1),f=c&&c.$from.blockRange(c.$to),d=f&&xi(f);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(f,d).scrollIntoView()),!0;if(l&&Qt(o,"start",!0)&&Qt(r,"end")){let g=r,h=[];for(;h.push(g),!g.isTextblock;)g=g.lastChild;let w=o,v=1;for(;!w.isTextblock;w=w.firstChild)v++;if(g.canReplace(g.childCount,g.childCount,w.content)){if(n){let M=T.empty;for(let I=h.length-1;I>=0;I--)M=T.from(h[I].copy(M));let N=t.tr.step(new he(e.pos-h.length,e.pos+o.nodeSize,e.pos+v,e.pos+o.nodeSize-v,new F(M,h.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function Ma(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(n&&n(e.tr.setSelection(K.create(e.doc,t<0?r.start(o):r.end(o)))),!0):!1}}const Nh=Ma(-1),Fh=Ma(1);function Ih(t,e=null){return function(n,i){let r=!1;for(let o=0;o<n.selection.ranges.length&&!r;o++){let{$from:{pos:u},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(u,s,(a,l)=>{if(r)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)r=!0;else{let c=n.doc.resolve(l),f=c.index();r=c.parent.canReplaceWith(f,f+1,t)}})}if(!r)return!1;if(i){let o=n.tr;for(let u=0;u<n.selection.ranges.length;u++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[u];o.setBlockType(s,a,t,e)}i(o.scrollIntoView())}return!0}}function Rh(t,e,n,i){for(let r=0;r<e.length;r++){let{$from:o,$to:u}=e[r],s=o.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(o.pos,u.pos,(a,l)=>{if(s)return!1;s=a.inlineContent&&a.type.allowsMarkType(n)}),s)return!0}return!1}function dt(t,e=null,n){return function(i,r){let{empty:o,$cursor:u,ranges:s}=i.selection;if(o&&!u||!Rh(i.doc,s,t))return!1;if(r)if(u)t.isInSet(i.storedMarks||u.marks())?r(i.tr.removeStoredMark(t)):r(i.tr.addStoredMark(t.create(e)));else{let a,l=i.tr;a=!s.some(c=>i.doc.rangeHasMark(c.$from.pos,c.$to.pos,t));for(let c=0;c<s.length;c++){let{$from:f,$to:d}=s[c];if(!a)l.removeMark(f.pos,d.pos,t);else{let g=f.pos,h=d.pos,w=f.nodeAfter,v=d.nodeBefore,M=w&&w.isText?/^\s*/.exec(w.text)[0].length:0,N=v&&v.isText?/\s*$/.exec(v.text)[0].length:0;g+M<h&&(g+=M,h-=N),l.addMark(g,h,t.create(e))}}r(l.scrollIntoView())}return!0}}function ht(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}let Zi=ht(Gr,ka,xa),_u=ht(Gr,vh,Dh);const nt={Enter:ht(Ca,Da,Sa,Ea),"Mod-Enter":va,Backspace:Zi,"Mod-Backspace":Zi,"Shift-Backspace":Zi,Delete:_u,"Mod-Delete":_u,"Mod-a":Oh},Oa={"Ctrl-h":nt.Backspace,"Alt-Backspace":nt["Mod-Backspace"],"Ctrl-d":nt.Delete,"Ctrl-Alt-Backspace":nt["Mod-Delete"],"Alt-Delete":nt["Mod-Delete"],"Alt-d":nt["Mod-Delete"],"Ctrl-a":Nh,"Ctrl-e":Fh};for(let t in nt)Oa[t]=nt[t];const Bh=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,zh=Bh?Oa:nt,yn="http://www.w3.org/2000/svg",Ph="http://www.w3.org/1999/xlink",vr="ProseMirror-icon";function Lh(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}function qh(t,e){let n=(t.nodeType==9?t:t.ownerDocument)||document,i=n.createElement("div");if(i.className=vr,e.path){let{path:r,width:o,height:u}=e,s="pm-icon-"+Lh(r).toString(16);n.getElementById(s)||$h(t,s,e);let a=i.appendChild(n.createElementNS(yn,"svg"));a.style.width=o/u+"em",a.appendChild(n.createElementNS(yn,"use")).setAttributeNS(Ph,"href",/([^#]*)/.exec(n.location.toString())[1]+"#"+s)}else if(e.dom)i.appendChild(e.dom.cloneNode(!0));else{let{text:r,css:o}=e;i.appendChild(n.createElement("span")).textContent=r||"",o&&(i.firstChild.style.cssText=o)}return i}function $h(t,e,n){let[i,r]=t.nodeType==9?[t,t.body]:[t.ownerDocument||document,t],o=i.getElementById(vr+"-collection");o||(o=i.createElementNS(yn,"svg"),o.id=vr+"-collection",o.style.display="none",r.insertBefore(o,r.firstChild));let u=i.createElementNS(yn,"symbol");u.id=e,u.setAttribute("viewBox","0 0 "+n.width+" "+n.height),u.appendChild(i.createElementNS(yn,"path")).setAttribute("d",n.path),o.appendChild(u)}const kn="ProseMirror-menu";class en{constructor(e){this.spec=e}render(e){let n=this.spec,i=n.render?n.render(e):n.icon?qh(e.root,n.icon):n.label?Kt("div",null,bu(e,n.label)):null;if(!i)throw new RangeError("MenuItem without icon or label property");if(n.title){const o=typeof n.title=="function"?n.title(e.state):n.title;i.setAttribute("title",bu(e,o))}n.class&&i.classList.add(n.class),n.css&&(i.style.cssText+=n.css),i.addEventListener("mousedown",o=>{o.preventDefault(),i.classList.contains(kn+"-disabled")||n.run(e.state,e.dispatch,e,o)});function r(o){if(n.select){let s=n.select(o);if(i.style.display=s?"":"none",!s)return!1}let u=!0;if(n.enable&&(u=n.enable(o)||!1,yu(i,kn+"-disabled",!u)),n.active){let s=u&&n.active(o)||!1;yu(i,kn+"-active",s)}return!0}return{dom:i,update:r}}}function bu(t,e){return t._props.translate?t._props.translate(e):e}function Vh(t,e){return n=>{let i=!1;for(let r=0;r<t.length;r++){let o=t[r](n);e[r].style.display=o?"":"none",o&&(i=!0)}return i}}function Hh(t,e){let n=document.createDocumentFragment(),i=[],r=[];for(let u=0;u<e.length;u++){let s=e[u],a=[],l=[];for(let c=0;c<s.length;c++){let{dom:f,update:d}=s[c].render(t),g=Kt("span",{class:kn+"item"},f);n.appendChild(g),l.push(g),a.push(d)}a.length&&(i.push(Vh(a,l)),u<e.length-1&&r.push(n.appendChild(Uh())))}function o(u){let s=!1,a=!1;for(let l=0;l<i.length;l++){let c=i[l](u);l&&(r[l-1].style.display=a&&c?"":"none"),a=c,c&&(s=!0)}return s}return{dom:n,update:o}}function Uh(){return Kt("span",{class:kn+"separator"})}function yu(t,e,n){n?t.classList.add(e):t.classList.remove(e)}const Hn="ProseMirror-menubar";function Wh(){if(typeof navigator>"u")return!1;let t=navigator.userAgent;return!/Edge\/\d/.test(t)&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t)}function Jh(t){return new Ct({view(e){return new Kh(e,t)}})}class Kh{constructor(e,n){this.editorView=e,this.options=n,this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.scrollHandler=null,this.wrapper=Kt("div",{class:Hn+"-wrapper"}),this.menu=this.wrapper.appendChild(Kt("div",{class:Hn})),this.menu.className=Hn,e.dom.parentNode&&e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom);let{dom:i,update:r}=Hh(this.editorView,this.options.content);if(this.contentUpdate=r,this.menu.appendChild(i),this.update(),n.floating&&!Wh()){this.updateFloat();let o=Xh(this.wrapper);this.scrollHandler=u=>{let s=this.editorView.root;(s.body||s).contains(this.wrapper)?this.updateFloat(u.target.getBoundingClientRect?u.target:void 0):o.forEach(a=>a.removeEventListener("scroll",this.scrollHandler))},o.forEach(u=>u.addEventListener("scroll",this.scrollHandler))}}update(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))}updateScrollCursor(){let e=this.editorView.root.getSelection();if(!e.focusNode)return;let n=e.getRangeAt(0).getClientRects(),i=n[Zh(e)?0:n.length-1];if(!i)return;let r=this.menu.getBoundingClientRect();if(i.top<r.bottom&&i.bottom>r.top){let o=Gh(this.wrapper);o&&(o.scrollTop-=r.bottom-i.top)}}updateFloat(e){let n=this.wrapper,i=n.getBoundingClientRect(),r=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(i.top>=r||i.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{let o=(n.offsetWidth-n.clientWidth)/2;this.menu.style.left=i.left+o+"px",this.menu.style.display=i.top>(this.editorView.dom.ownerDocument.defaultView||window).innerHeight?"none":"",e&&(this.menu.style.top=r+"px")}else if(i.top<r&&i.bottom>=this.menu.offsetHeight+10){this.floating=!0;let o=this.menu.getBoundingClientRect();this.menu.style.left=o.left+"px",this.menu.style.width=o.width+"px",e&&(this.menu.style.top=r+"px"),this.menu.style.position="fixed",this.spacer=Kt("div",{class:Hn+"-spacer",style:`height: ${o.height}px`}),n.insertBefore(this.spacer,this.menu)}}destroy(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}}function Zh(t){return t.anchorNode==t.focusNode?t.anchorOffset>t.focusOffset:t.anchorNode.compareDocumentPosition(t.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function Gh(t){for(let e=t.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}function Xh(t){let e=[t.ownerDocument.defaultView||window];for(let n=t.parentNode;n;n=n.parentNode)e.push(n);return e}class ot{constructor(e,n,i={}){this.match=e,this.match=e,this.handler=typeof n=="string"?Yh(n):n,this.undoable=i.undoable!==!1,this.inCode=i.inCode||!1}}function Yh(t){return function(e,n,i,r){let o=t;if(n[1]){let u=n[0].lastIndexOf(n[1]);o+=n[0].slice(u+n[1].length),i+=u;let s=i-r;s>0&&(o=n[0].slice(u-s,u)+o,i=r)}return e.tr.insertText(o,i,r)}}const Qh=500;function tn({rules:t}){let e=new Ct({state:{init(){return null},apply(n,i){let r=n.getMeta(this);return r||(n.selectionSet||n.docChanged?null:i)}},props:{handleTextInput(n,i,r,o){return ku(n,i,r,o,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:i}=n.state.selection;i&&ku(n,i.pos,i.pos,"",t,e)})}}},isInputRules:!0});return e}function ku(t,e,n,i,r,o){if(t.composing)return!1;let u=t.state,s=u.doc.resolve(e),a=s.parent.textBetween(Math.max(0,s.parentOffset-Qh),s.parentOffset,null,"")+i;for(let l=0;l<r.length;l++){let c=r[l];if(s.parent.type.spec.code){if(!c.inCode)continue}else if(c.inCode==="only")continue;let f=c.match.exec(a),d=f&&c.handler(u,f,e-(f[0].length-i.length),n);if(d)return c.undoable&&d.setMeta(o,{transform:d,from:e,to:n,text:i}),t.dispatch(d),!0}return!1}const xu=(t,e)=>{let n=t.plugins;for(let i=0;i<n.length;i++){let r=n[i],o;if(r.spec.isInputRules&&(o=r.getState(t))){if(e){let u=t.tr,s=o.transform;for(let a=s.steps.length-1;a>=0;a--)u.step(s.steps[a].invert(s.docs[a]));if(o.text){let a=u.doc.resolve(o.from).marks();u.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else u.delete(o.from,o.to);e(u)}return!0}}return!1};new ot(/--$/,"");new ot(/\.\.\.$/,"");new ot(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"");new ot(/"$/,"");new ot(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"");new ot(/'$/,"");function Ta(t,e,n=null,i){return new ot(t,(r,o,u,s)=>{let a=n instanceof Function?n(o):n,l=r.tr.delete(u,s),c=l.doc.resolve(u),f=c.blockRange(),d=f&&Ds(f,e,a);if(!d)return null;l.wrap(f,d);let g=l.doc.resolve(u-1).nodeBefore;return g&&g.type==e&&sn(l.doc,u-1)&&(!i||i(o,g))&&l.join(u-1),l})}function em(t,e,n=null){return new ot(t,(i,r,o,u)=>{let s=i.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?i.tr.delete(o,u).setBlockType(o,o,e,a):null})}var tm=(t,e)=>n=>{Array.isArray(t)||(t=[t]);for(let i=0,r=t.length;i<r;i++){const o=am(t[i])(n.selection);if(o){const u=im(o.pos,e)(n);if(u!==n)return u}}return n},Dr=(t,e=1)=>n=>{const i=U.findFrom(n.doc.resolve(t),e,!0);return i?n.setSelection(i):n},Sr=t=>!!(t instanceof it&&t.type&&t.type.spec.selectable),nm=t=>Sr(t)&&t.type.isLeaf,Gi=(t,e,n)=>nm(t)?n.setSelection(new q(n.doc.resolve(e))):Dr(e)(n),Er=(t,e,n)=>i=>{const r=typeof e=="number",{$from:o}=i.selection,u=r?i.doc.resolve(e):wu(i.selection)?i.doc.resolve(o.pos+1):o,{parent:s}=u;if(wu(i.selection),om(s)){const a=i;if(i=tm(s.type,t)(i),a!==i){const l=Sr(t)?u.before(u.depth):u.pos;return Gi(t,l,i)}}if(ju(u,t)){i.insert(u.pos,t);const a=r?u.pos:Sr(t)?i.selection.$anchor.pos-1:i.selection.$anchor.pos;return Ar(Gi(t,a,i))}for(let a=u.depth;a>0;a--){const l=u.after(a),c=i.doc.resolve(l);if(ju(c,t))return i.insert(l,t),Ar(Gi(t,l,i))}return i},wu=t=>t instanceof q,Na=(t,e)=>Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t,Ar=t=>Object.assign(Object.create(t),t).setTime(Date.now()),im=(t,e)=>n=>{const i=n.doc.nodeAt(t),r=n.doc.resolve(t);if(!i)return n;if(rm(r,e)){n=n.replaceWith(t,t+i.nodeSize,e);const o=n.selection.$from.pos-1;return n=Dr(Math.max(o,0),-1)(n),n=Dr(n.selection.$from.start())(n),Ar(n)}return n},rm=(t,e)=>{const n=t.node(t.depth);return n&&n.type.validContent(e instanceof T?e:T.from(e))},ju=(t,e)=>{const n=t.index();return e instanceof T?t.parent.canReplace(n,n,e):e instanceof it?t.parent.canReplaceWith(n,n,e.type):!1},om=t=>!t||t.type.name==="paragraph"&&t.nodeSize===2,Fa=t=>({$from:e,$to:n},i=!1)=>{if(i&&!e.sameParent(n)){let r=Math.min(e.depth,n.depth);for(;r>=0;){const o=e.node(r);if(n.node(r)===o&&t(o))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:o};r=r-1}return}return um(e,t)},um=(t,e)=>{for(let n=t.depth;n>0;n--){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}},sm=t=>e=>!!Fa(t)(e),am=t=>e=>Fa(n=>Na(t,n))(e),Ia=t=>e=>sm(n=>Na(t,n))(e);const lm=["ol",0],cm=["ul",0],fm=["li",0],Ra={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM(t){return t.attrs.order==1?lm:["ol",{start:t.attrs.order},0]}},Ba={parseDOM:[{tag:"ul"}],toDOM(){return cm}},za={parseDOM:[{tag:"li"}],toDOM(){return fm},defining:!0};function dm(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,u=r.blockRange(o),s=!1,a=u;if(!u)return!1;if(u.depth>=2&&r.node(u.depth-1).type.compatibleContent(t)&&u.startIndex==0){if(r.index(u.depth-1)==0)return!1;let c=n.doc.resolve(u.start-2);a=new oi(c,c,u.depth),u.endIndex<u.parent.childCount&&(u=new oi(r,n.doc.resolve(o.end(u.depth)),u.depth)),s=!0}let l=Ds(a,t,e,u);return l?(i&&i(hm(n.tr,u,l,s,t).scrollIntoView()),!0):!1}}function hm(t,e,n,i,r){let o=T.empty;for(let c=n.length-1;c>=0;c--)o=T.from(n[c].type.create(n[c].attrs,o));t.step(new he(e.start-(i?2:0),e.end,e.start,e.end,new F(o,0,0),n.length,!0));let u=0;for(let c=0;c<n.length;c++)n[c].type==r&&(u=c+1);let s=n.length-u,a=e.start+n.length-(i?2:0),l=e.parent;for(let c=e.startIndex,f=e.endIndex,d=!0;c<f;c++,d=!1)!d&&gn(t.doc,a,s)&&(t.split(a,s),a+=2*s),a+=l.child(c).nodeSize;return t}function mm(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,u=>u.childCount>0&&u.firstChild.type==t);return o?n?i.node(o.depth-1).type==t?pm(e,n,t,o):gm(e,n,o):!0:!1}}function pm(t,e,n,i){let r=t.tr,o=i.end,u=i.$to.end(i.depth);o<u&&(r.step(new he(o-1,u,o,u,new F(T.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new oi(r.doc.resolve(i.$from.pos),r.doc.resolve(u),i.depth));const s=xi(i);if(s==null)return!1;r.lift(i,s);let a=r.mapping.map(o,-1)-1;return sn(r.doc,a)&&r.join(a),e(r.scrollIntoView()),!0}function gm(t,e,n){let i=t.tr,r=n.parent;for(let g=n.end,h=n.endIndex-1,w=n.startIndex;h>w;h--)g-=r.child(h).nodeSize,i.delete(g-1,g+1);let o=i.doc.resolve(n.start),u=o.nodeAfter;if(i.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let s=n.startIndex==0,a=n.endIndex==r.childCount,l=o.node(-1),c=o.index(-1);if(!l.canReplace(c+(s?0:1),c+1,u.content.append(a?T.empty:T.from(r))))return!1;let f=o.pos,d=f+u.nodeSize;return i.step(new he(f-(s?1:0),d+(a?1:0),f+1,d-1,new F((s?T.empty:T.from(r.copy(T.empty))).append(a?T.empty:T.from(r.copy(T.empty))),s?0:1,a?0:1),s?0:1)),e(i.scrollIntoView()),!0}function _m(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,l=>l.childCount>0&&l.firstChild.type==t);if(!o)return!1;let u=o.startIndex;if(u==0)return!1;let s=o.parent,a=s.child(u-1);if(a.type!=t)return!1;if(n){let l=a.lastChild&&a.lastChild.type==s.type,c=T.from(l?t.create():null),f=new F(T.from(t.create(null,T.from(s.type.create(null,c)))),l?3:1,0),d=o.start,g=o.end;n(e.tr.step(new he(d-(l?3:1),g,d,g,f,1,!0)).scrollIntoView())}return!0}}const Cu={};function bm(t){let e=Cu[t];if(e)return e;e=Cu[t]=[];for(let n=0;n<128;n++){const i=String.fromCharCode(n);e.push(i)}for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);e[i]="%"+("0"+i.toString(16).toUpperCase()).slice(-2)}return e}function nn(t,e){typeof e!="string"&&(e=nn.defaultChars);const n=bm(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(i){let r="";for(let o=0,u=i.length;o<u;o+=3){const s=parseInt(i.slice(o+1,o+3),16);if(s<128){r+=n[s];continue}if((s&224)===192&&o+3<u){const a=parseInt(i.slice(o+4,o+6),16);if((a&192)===128){const l=s<<6&1984|a&63;l<128?r+="":r+=String.fromCharCode(l),o+=3;continue}}if((s&240)===224&&o+6<u){const a=parseInt(i.slice(o+4,o+6),16),l=parseInt(i.slice(o+7,o+9),16);if((a&192)===128&&(l&192)===128){const c=s<<12&61440|a<<6&4032|l&63;c<2048||c>=55296&&c<=57343?r+="":r+=String.fromCharCode(c),o+=6;continue}}if((s&248)===240&&o+9<u){const a=parseInt(i.slice(o+4,o+6),16),l=parseInt(i.slice(o+7,o+9),16),c=parseInt(i.slice(o+10,o+12),16);if((a&192)===128&&(l&192)===128&&(c&192)===128){let f=s<<18&1835008|a<<12&258048|l<<6&4032|c&63;f<65536||f>1114111?r+="":(f-=65536,r+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),o+=9;continue}}r+=""}return r})}nn.defaultChars=";/?:@&=+$,#";nn.componentChars="";const vu={};function ym(t){let e=vu[t];if(e)return e;e=vu[t]=[];for(let n=0;n<128;n++){const i=String.fromCharCode(n);/^[0-9a-z]$/i.test(i)?e.push(i):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function Bn(t,e,n){typeof e!="string"&&(n=e,e=Bn.defaultChars),typeof n>"u"&&(n=!0);const i=ym(e);let r="";for(let o=0,u=t.length;o<u;o++){const s=t.charCodeAt(o);if(n&&s===37&&o+2<u&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3))){r+=t.slice(o,o+3),o+=2;continue}if(s<128){r+=i[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<u){const a=t.charCodeAt(o+1);if(a>=56320&&a<=57343){r+=encodeURIComponent(t[o]+t[o+1]),o++;continue}}r+="%EF%BF%BD";continue}r+=encodeURIComponent(t[o])}return r}Bn.defaultChars=";/?:@&=+$,-_.!~*'()#";Bn.componentChars="-_.!~*'()";function Yr(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function pi(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const km=/^([a-z0-9.+-]+:)/i,xm=/:[0-9]*$/,wm=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,jm=["<",">",'"',"`"," ","\r",`
`,"	"],Cm=["{","}","|","\\","^","`"].concat(jm),vm=["'"].concat(Cm),Du=["%","/","?",";","#"].concat(vm),Su=["/","?","#"],Dm=255,Eu=/^[+a-z0-9A-Z_-]{0,63}$/,Sm=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Au={javascript:!0,"javascript:":!0},Mu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Qr(t,e){if(t&&t instanceof pi)return t;const n=new pi;return n.parse(t,e),n}pi.prototype.parse=function(t,e){let n,i,r,o=t;if(o=o.trim(),!e&&t.split("#").length===1){const l=wm.exec(o);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let u=km.exec(o);if(u&&(u=u[0],n=u.toLowerCase(),this.protocol=u,o=o.substr(u.length)),(e||u||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(r=o.substr(0,2)==="//",r&&!(u&&Au[u])&&(o=o.substr(2),this.slashes=!0)),!Au[u]&&(r||u&&!Mu[u])){let l=-1;for(let h=0;h<Su.length;h++)i=o.indexOf(Su[h]),i!==-1&&(l===-1||i<l)&&(l=i);let c,f;l===-1?f=o.lastIndexOf("@"):f=o.lastIndexOf("@",l),f!==-1&&(c=o.slice(0,f),o=o.slice(f+1),this.auth=c),l=-1;for(let h=0;h<Du.length;h++)i=o.indexOf(Du[h]),i!==-1&&(l===-1||i<l)&&(l=i);l===-1&&(l=o.length),o[l-1]===":"&&l--;const d=o.slice(0,l);o=o.slice(l),this.parseHost(d),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const h=this.hostname.split(/\./);for(let w=0,v=h.length;w<v;w++){const M=h[w];if(M&&!M.match(Eu)){let N="";for(let I=0,R=M.length;I<R;I++)M.charCodeAt(I)>127?N+="x":N+=M[I];if(!N.match(Eu)){const I=h.slice(0,w),R=h.slice(w+1),L=M.match(Sm);L&&(I.push(L[1]),R.unshift(L[2])),R.length&&(o=R.join(".")+o),this.hostname=I.join(".");break}}}}this.hostname.length>Dm&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=o.indexOf("#");s!==-1&&(this.hash=o.substr(s),o=o.slice(0,s));const a=o.indexOf("?");return a!==-1&&(this.search=o.substr(a),o=o.slice(0,a)),o&&(this.pathname=o),Mu[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};pi.prototype.parseHost=function(t){let e=xm.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const Em=Object.freeze(Object.defineProperty({__proto__:null,decode:nn,encode:Bn,format:Yr,parse:Qr},Symbol.toStringTag,{value:"Module"})),Pa=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,La=/[\0-\x1F\x7F-\x9F]/,Am=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,eo=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,qa=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,$a=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Mm=Object.freeze(Object.defineProperty({__proto__:null,Any:Pa,Cc:La,Cf:Am,P:eo,S:qa,Z:$a},Symbol.toStringTag,{value:"Module"})),Om=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),Tm=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var Xi;const Nm=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Fm=(Xi=String.fromCodePoint)!==null&&Xi!==void 0?Xi:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function Im(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Nm.get(t))!==null&&e!==void 0?e:t}var ue;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(ue||(ue={}));const Rm=32;var bt;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(bt||(bt={}));function Mr(t){return t>=ue.ZERO&&t<=ue.NINE}function Bm(t){return t>=ue.UPPER_A&&t<=ue.UPPER_F||t>=ue.LOWER_A&&t<=ue.LOWER_F}function zm(t){return t>=ue.UPPER_A&&t<=ue.UPPER_Z||t>=ue.LOWER_A&&t<=ue.LOWER_Z||Mr(t)}function Pm(t){return t===ue.EQUALS||zm(t)}var oe;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(oe||(oe={}));var mt;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(mt||(mt={}));class Lm{constructor(e,n,i){this.decodeTree=e,this.emitCodePoint=n,this.errors=i,this.state=oe.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=mt.Strict}startEntity(e){this.decodeMode=e,this.state=oe.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case oe.EntityStart:return e.charCodeAt(n)===ue.NUM?(this.state=oe.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=oe.NamedEntity,this.stateNamedEntity(e,n));case oe.NumericStart:return this.stateNumericStart(e,n);case oe.NumericDecimal:return this.stateNumericDecimal(e,n);case oe.NumericHex:return this.stateNumericHex(e,n);case oe.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|Rm)===ue.LOWER_X?(this.state=oe.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=oe.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,i,r){if(n!==i){const o=i-n;this.result=this.result*Math.pow(r,o)+parseInt(e.substr(n,o),r),this.consumed+=o}}stateNumericHex(e,n){const i=n;for(;n<e.length;){const r=e.charCodeAt(n);if(Mr(r)||Bm(r))n+=1;else return this.addToNumericResult(e,i,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,i,n,16),-1}stateNumericDecimal(e,n){const i=n;for(;n<e.length;){const r=e.charCodeAt(n);if(Mr(r))n+=1;else return this.addToNumericResult(e,i,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,i,n,10),-1}emitNumericEntity(e,n){var i;if(this.consumed<=n)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ue.SEMI)this.consumed+=1;else if(this.decodeMode===mt.Strict)return 0;return this.emitCodePoint(Im(this.result),this.consumed),this.errors&&(e!==ue.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:i}=this;let r=i[this.treeIndex],o=(r&bt.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const u=e.charCodeAt(n);if(this.treeIndex=qm(i,r,this.treeIndex+Math.max(1,o),u),this.treeIndex<0)return this.result===0||this.decodeMode===mt.Attribute&&(o===0||Pm(u))?0:this.emitNotTerminatedNamedEntity();if(r=i[this.treeIndex],o=(r&bt.VALUE_LENGTH)>>14,o!==0){if(u===ue.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==mt.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:i}=this,r=(i[n]&bt.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,i){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[e]&~bt.VALUE_LENGTH:r[e+1],i),n===3&&this.emitCodePoint(r[e+2],i),i}end(){var e;switch(this.state){case oe.NamedEntity:return this.result!==0&&(this.decodeMode!==mt.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case oe.NumericDecimal:return this.emitNumericEntity(0,2);case oe.NumericHex:return this.emitNumericEntity(0,3);case oe.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case oe.EntityStart:return 0}}}function Va(t){let e="";const n=new Lm(t,i=>e+=Fm(i));return function(r,o){let u=0,s=0;for(;(s=r.indexOf("&",s))>=0;){e+=r.slice(u,s),n.startEntity(o);const l=n.write(r,s+1);if(l<0){u=s+n.end();break}u=s+l,s=l===0?u+1:u}const a=e+r.slice(u);return e="",a}}function qm(t,e,n,i){const r=(e&bt.BRANCH_LENGTH)>>7,o=e&bt.JUMP_TABLE;if(r===0)return o!==0&&i===o?n:-1;if(o){const a=i-o;return a<0||a>=r?-1:t[n+a]-1}let u=n,s=u+r-1;for(;u<=s;){const a=u+s>>>1,l=t[a];if(l<i)u=a+1;else if(l>i)s=a-1;else return t[a+r]}return-1}const $m=Va(Om);Va(Tm);function Ha(t,e=mt.Legacy){return $m(t,e)}function Vm(t){return Object.prototype.toString.call(t)}function to(t){return Vm(t)==="[object String]"}const Hm=Object.prototype.hasOwnProperty;function Um(t,e){return Hm.call(t,e)}function Di(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(i){t[i]=n[i]})}}),t}function Ua(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function no(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function gi(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const Wa=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Wm=/&([a-z#][a-z0-9]{1,31});/gi,Jm=new RegExp(Wa.source+"|"+Wm.source,"gi"),Km=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Zm(t,e){if(e.charCodeAt(0)===35&&Km.test(e)){const i=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return no(i)?gi(i):t}const n=Ha(t);return n!==t?n:t}function Gm(t){return t.indexOf("\\")<0?t:t.replace(Wa,"$1")}function rn(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Jm,function(e,n,i){return n||Zm(e,i)})}const Xm=/[&<>"]/,Ym=/[&<>"]/g,Qm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function e0(t){return Qm[t]}function jt(t){return Xm.test(t)?t.replace(Ym,e0):t}const t0=/[.?*+^$[\]\\(){}|-]/g;function n0(t){return t.replace(t0,"\\$&")}function Q(t){switch(t){case 9:case 32:return!0}return!1}function An(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Mn(t){return eo.test(t)||qa.test(t)}function On(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Si(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const i0={mdurl:Em,ucmicro:Mm},r0=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Ua,assign:Di,escapeHtml:jt,escapeRE:n0,fromCodePoint:gi,has:Um,isMdAsciiPunct:On,isPunctChar:Mn,isSpace:Q,isString:to,isValidEntityCode:no,isWhiteSpace:An,lib:i0,normalizeReference:Si,unescapeAll:rn,unescapeMd:Gm},Symbol.toStringTag,{value:"Module"}));function o0(t,e,n){let i,r,o,u;const s=t.posMax,a=t.pos;for(t.pos=e+1,i=1;t.pos<s;){if(o=t.src.charCodeAt(t.pos),o===93&&(i--,i===0)){r=!0;break}if(u=t.pos,t.md.inline.skipToken(t),o===91){if(u===t.pos-1)i++;else if(n)return t.pos=a,-1}}let l=-1;return r&&(l=t.pos),t.pos=a,l}function u0(t,e,n){let i,r=e;const o={ok:!1,pos:0,str:""};if(t.charCodeAt(r)===60){for(r++;r<n;){if(i=t.charCodeAt(r),i===10||i===60)return o;if(i===62)return o.pos=r+1,o.str=rn(t.slice(e+1,r)),o.ok=!0,o;if(i===92&&r+1<n){r+=2;continue}r++}return o}let u=0;for(;r<n&&(i=t.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(t.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(u++,u>32))return o;if(i===41){if(u===0)break;u--}r++}return e===r||u!==0||(o.str=rn(t.slice(e,r)),o.pos=r,o.ok=!0),o}function s0(t,e,n,i){let r,o=e;const u={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(i)u.str=i.str,u.marker=i.marker;else{if(o>=n)return u;let s=t.charCodeAt(o);if(s!==34&&s!==39&&s!==40)return u;e++,o++,s===40&&(s=41),u.marker=s}for(;o<n;){if(r=t.charCodeAt(o),r===u.marker)return u.pos=o+1,u.str+=rn(t.slice(e,o)),u.ok=!0,u;if(r===40&&u.marker===41)return u;r===92&&o+1<n&&o++,o++}return u.can_continue=!0,u.str+=rn(t.slice(e,o)),u}const a0=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:u0,parseLinkLabel:o0,parseLinkTitle:s0},Symbol.toStringTag,{value:"Module"})),Xe={};Xe.code_inline=function(t,e,n,i,r){const o=t[e];return"<code"+r.renderAttrs(o)+">"+jt(o.content)+"</code>"};Xe.code_block=function(t,e,n,i,r){const o=t[e];return"<pre"+r.renderAttrs(o)+"><code>"+jt(t[e].content)+`</code></pre>
`};Xe.fence=function(t,e,n,i,r){const o=t[e],u=o.info?rn(o.info).trim():"";let s="",a="";if(u){const c=u.split(/(\s+)/g);s=c[0],a=c.slice(2).join("")}let l;if(n.highlight?l=n.highlight(o.content,s,a)||jt(o.content):l=jt(o.content),l.indexOf("<pre")===0)return l+`
`;if(u){const c=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[];c<0?f.push(["class",n.langPrefix+s]):(f[c]=f[c].slice(),f[c][1]+=" "+n.langPrefix+s);const d={attrs:f};return`<pre><code${r.renderAttrs(d)}>${l}</code></pre>
`}return`<pre><code${r.renderAttrs(o)}>${l}</code></pre>
`};Xe.image=function(t,e,n,i,r){const o=t[e];return o.attrs[o.attrIndex("alt")][1]=r.renderInlineAsText(o.children,n,i),r.renderToken(t,e,n)};Xe.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};Xe.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Xe.text=function(t,e){return jt(t[e].content)};Xe.html_block=function(t,e){return t[e].content};Xe.html_inline=function(t,e){return t[e].content};function an(){this.rules=Di({},Xe)}an.prototype.renderAttrs=function(e){let n,i,r;if(!e.attrs)return"";for(r="",n=0,i=e.attrs.length;n<i;n++)r+=" "+jt(e.attrs[n][0])+'="'+jt(e.attrs[n][1])+'"';return r};an.prototype.renderToken=function(e,n,i){const r=e[n];let o="";if(r.hidden)return"";r.block&&r.nesting!==-1&&n&&e[n-1].hidden&&(o+=`
`),o+=(r.nesting===-1?"</":"<")+r.tag,o+=this.renderAttrs(r),r.nesting===0&&i.xhtmlOut&&(o+=" /");let u=!1;if(r.block&&(u=!0,r.nesting===1&&n+1<e.length)){const s=e[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===r.tag)&&(u=!1)}return o+=u?`>
`:">",o};an.prototype.renderInline=function(t,e,n){let i="";const r=this.rules;for(let o=0,u=t.length;o<u;o++){const s=t[o].type;typeof r[s]<"u"?i+=r[s](t,o,e,n,this):i+=this.renderToken(t,o,e)}return i};an.prototype.renderInlineAsText=function(t,e,n){let i="";for(let r=0,o=t.length;r<o;r++)switch(t[r].type){case"text":i+=t[r].content;break;case"image":i+=this.renderInlineAsText(t[r].children,e,n);break;case"html_inline":case"html_block":i+=t[r].content;break;case"softbreak":case"hardbreak":i+=`
`;break}return i};an.prototype.render=function(t,e,n){let i="";const r=this.rules;for(let o=0,u=t.length;o<u;o++){const s=t[o].type;s==="inline"?i+=this.renderInline(t[o].children,e,n):typeof r[s]<"u"?i+=r[s](t,o,e,n,this):i+=this.renderToken(t,o,e,n)}return i};function De(){this.__rules__=[],this.__cache__=null}De.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};De.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(i){e.indexOf(i)<0&&e.push(i)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(i){i.enabled&&(n&&i.alt.indexOf(n)<0||t.__cache__[n].push(i.fn))})})};De.prototype.at=function(t,e,n){const i=this.__find__(t),r=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__[i].fn=e,this.__rules__[i].alt=r.alt||[],this.__cache__=null};De.prototype.before=function(t,e,n,i){const r=this.__find__(t),o=i||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(r,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};De.prototype.after=function(t,e,n,i){const r=this.__find__(t),o=i||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(r+1,0,{name:e,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};De.prototype.push=function(t,e,n){const i=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null};De.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(i){const r=this.__find__(i);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+i)}this.__rules__[r].enabled=!0,n.push(i)},this),this.__cache__=null,n};De.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};De.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(i){const r=this.__find__(i);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+i)}this.__rules__[r].enabled=!1,n.push(i)},this),this.__cache__=null,n};De.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function $e(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}$e.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let i=0,r=n.length;i<r;i++)if(n[i][0]===e)return i;return-1};$e.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};$e.prototype.attrSet=function(e,n){const i=this.attrIndex(e),r=[e,n];i<0?this.attrPush(r):this.attrs[i]=r};$e.prototype.attrGet=function(e){const n=this.attrIndex(e);let i=null;return n>=0&&(i=this.attrs[n][1]),i};$e.prototype.attrJoin=function(e,n){const i=this.attrIndex(e);i<0?this.attrPush([e,n]):this.attrs[i][1]=this.attrs[i][1]+" "+n};function Ja(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}Ja.prototype.Token=$e;const l0=/\r\n?|\n/g,c0=/\0/g;function f0(t){let e;e=t.src.replace(l0,`
`),e=e.replace(c0,""),t.src=e}function d0(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function h0(t){const e=t.tokens;for(let n=0,i=e.length;n<i;n++){const r=e[n];r.type==="inline"&&t.md.inline.parse(r.content,t.md,t.env,r.children)}}function m0(t){return/^<a[>\s]/i.test(t)}function p0(t){return/^<\/a\s*>/i.test(t)}function g0(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,i=e.length;n<i;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let r=e[n].children,o=0;for(let u=r.length-1;u>=0;u--){const s=r[u];if(s.type==="link_close"){for(u--;r[u].level!==s.level&&r[u].type!=="link_open";)u--;continue}if(s.type==="html_inline"&&(m0(s.content)&&o>0&&o--,p0(s.content)&&o++),!(o>0)&&s.type==="text"&&t.md.linkify.test(s.content)){const a=s.content;let l=t.md.linkify.match(a);const c=[];let f=s.level,d=0;l.length>0&&l[0].index===0&&u>0&&r[u-1].type==="text_special"&&(l=l.slice(1));for(let g=0;g<l.length;g++){const h=l[g].url,w=t.md.normalizeLink(h);if(!t.md.validateLink(w))continue;let v=l[g].text;l[g].schema?l[g].schema==="mailto:"&&!/^mailto:/i.test(v)?v=t.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=t.md.normalizeLinkText(v):v=t.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const M=l[g].index;if(M>d){const L=new t.Token("text","",0);L.content=a.slice(d,M),L.level=f,c.push(L)}const N=new t.Token("link_open","a",1);N.attrs=[["href",w]],N.level=f++,N.markup="linkify",N.info="auto",c.push(N);const I=new t.Token("text","",0);I.content=v,I.level=f,c.push(I);const R=new t.Token("link_close","a",-1);R.level=--f,R.markup="linkify",R.info="auto",c.push(R),d=l[g].lastIndex}if(d<a.length){const g=new t.Token("text","",0);g.content=a.slice(d),g.level=f,c.push(g)}e[n].children=r=Ua(r,u,c)}}}}const Ka=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,_0=/\((c|tm|r)\)/i,b0=/\((c|tm|r)\)/ig,y0={c:"",r:"",tm:""};function k0(t,e){return y0[e.toLowerCase()]}function x0(t){let e=0;for(let n=t.length-1;n>=0;n--){const i=t[n];i.type==="text"&&!e&&(i.content=i.content.replace(b0,k0)),i.type==="link_open"&&i.info==="auto"&&e--,i.type==="link_close"&&i.info==="auto"&&e++}}function w0(t){let e=0;for(let n=t.length-1;n>=0;n--){const i=t[n];i.type==="text"&&!e&&Ka.test(i.content)&&(i.content=i.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),i.type==="link_open"&&i.info==="auto"&&e--,i.type==="link_close"&&i.info==="auto"&&e++}}function j0(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(_0.test(t.tokens[e].content)&&x0(t.tokens[e].children),Ka.test(t.tokens[e].content)&&w0(t.tokens[e].children))}const C0=/['"]/,Ou=/['"]/g,Tu="";function Un(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function v0(t,e){let n;const i=[];for(let r=0;r<t.length;r++){const o=t[r],u=t[r].level;for(n=i.length-1;n>=0&&!(i[n].level<=u);n--);if(i.length=n+1,o.type!=="text")continue;let s=o.content,a=0,l=s.length;e:for(;a<l;){Ou.lastIndex=a;const c=Ou.exec(s);if(!c)break;let f=!0,d=!0;a=c.index+1;const g=c[0]==="'";let h=32;if(c.index-1>=0)h=s.charCodeAt(c.index-1);else for(n=r-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){h=t[n].content.charCodeAt(t[n].content.length-1);break}let w=32;if(a<l)w=s.charCodeAt(a);else for(n=r+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){w=t[n].content.charCodeAt(0);break}const v=On(h)||Mn(String.fromCharCode(h)),M=On(w)||Mn(String.fromCharCode(w)),N=An(h),I=An(w);if(I?f=!1:M&&(N||v||(f=!1)),N?d=!1:v&&(I||M||(d=!1)),w===34&&c[0]==='"'&&h>=48&&h<=57&&(d=f=!1),f&&d&&(f=v,d=M),!f&&!d){g&&(o.content=Un(o.content,c.index,Tu));continue}if(d)for(n=i.length-1;n>=0;n--){let R=i[n];if(i[n].level<u)break;if(R.single===g&&i[n].level===u){R=i[n];let L,z;g?(L=e.md.options.quotes[2],z=e.md.options.quotes[3]):(L=e.md.options.quotes[0],z=e.md.options.quotes[1]),o.content=Un(o.content,c.index,z),t[R.token].content=Un(t[R.token].content,R.pos,L),a+=z.length-1,R.token===r&&(a+=L.length-1),s=o.content,l=s.length,i.length=n;continue e}}f?i.push({token:r,pos:c.index,single:g,level:u}):d&&g&&(o.content=Un(o.content,c.index,Tu))}}}function D0(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!C0.test(t.tokens[e].content)||v0(t.tokens[e].children,t)}function S0(t){let e,n;const i=t.tokens,r=i.length;for(let o=0;o<r;o++){if(i[o].type!=="inline")continue;const u=i[o].children,s=u.length;for(e=0;e<s;e++)u[e].type==="text_special"&&(u[e].type="text");for(e=n=0;e<s;e++)u[e].type==="text"&&e+1<s&&u[e+1].type==="text"?u[e+1].content=u[e].content+u[e+1].content:(e!==n&&(u[n]=u[e]),n++);e!==n&&(u.length=n)}}const Yi=[["normalize",f0],["block",d0],["inline",h0],["linkify",g0],["replacements",j0],["smartquotes",D0],["text_join",S0]];function io(){this.ruler=new De;for(let t=0;t<Yi.length;t++)this.ruler.push(Yi[t][0],Yi[t][1])}io.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,i=e.length;n<i;n++)e[n](t)};io.prototype.State=Ja;function Ye(t,e,n,i){this.src=t,this.md=e,this.env=n,this.tokens=i,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const r=this.src;for(let o=0,u=0,s=0,a=0,l=r.length,c=!1;u<l;u++){const f=r.charCodeAt(u);if(!c)if(Q(f)){s++,f===9?a+=4-a%4:a++;continue}else c=!0;(f===10||u===l-1)&&(f!==10&&u++,this.bMarks.push(o),this.eMarks.push(u),this.tShift.push(s),this.sCount.push(a),this.bsCount.push(0),c=!1,s=0,a=0,o=u+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ye.prototype.push=function(t,e,n){const i=new $e(t,e,n);return i.block=!0,n<0&&this.level--,i.level=this.level,n>0&&this.level++,this.tokens.push(i),i};Ye.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Ye.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Ye.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const i=this.src.charCodeAt(e);if(!Q(i))break}return e};Ye.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!Q(this.src.charCodeAt(--e)))return e+1;return e};Ye.prototype.skipChars=function(e,n){for(let i=this.src.length;e<i&&this.src.charCodeAt(e)===n;e++);return e};Ye.prototype.skipCharsBack=function(e,n,i){if(e<=i)return e;for(;e>i;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Ye.prototype.getLines=function(e,n,i,r){if(e>=n)return"";const o=new Array(n-e);for(let u=0,s=e;s<n;s++,u++){let a=0;const l=this.bMarks[s];let c=l,f;for(s+1<n||r?f=this.eMarks[s]+1:f=this.eMarks[s];c<f&&a<i;){const d=this.src.charCodeAt(c);if(Q(d))d===9?a+=4-(a+this.bsCount[s])%4:a++;else if(c-l<this.tShift[s])a++;else break;c++}a>i?o[u]=new Array(a-i+1).join(" ")+this.src.slice(c,f):o[u]=this.src.slice(c,f)}return o.join("")};Ye.prototype.Token=$e;const E0=65536;function Qi(t,e){const n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];return t.src.slice(n,i)}function Nu(t){const e=[],n=t.length;let i=0,r=t.charCodeAt(i),o=!1,u=0,s="";for(;i<n;)r===124&&(o?(s+=t.substring(u,i-1),u=i):(e.push(s+t.substring(u,i)),s="",u=i+1)),o=r===92,i++,r=t.charCodeAt(i);return e.push(s+t.substring(u)),e}function A0(t,e,n,i){if(e+2>n)return!1;let r=e+1;if(t.sCount[r]<t.blkIndent||t.sCount[r]-t.blkIndent>=4)return!1;let o=t.bMarks[r]+t.tShift[r];if(o>=t.eMarks[r])return!1;const u=t.src.charCodeAt(o++);if(u!==124&&u!==45&&u!==58||o>=t.eMarks[r])return!1;const s=t.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58&&!Q(s)||u===45&&Q(s))return!1;for(;o<t.eMarks[r];){const R=t.src.charCodeAt(o);if(R!==124&&R!==45&&R!==58&&!Q(R))return!1;o++}let a=Qi(t,e+1),l=a.split("|");const c=[];for(let R=0;R<l.length;R++){const L=l[R].trim();if(!L){if(R===0||R===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(L))return!1;L.charCodeAt(L.length-1)===58?c.push(L.charCodeAt(0)===58?"center":"right"):L.charCodeAt(0)===58?c.push("left"):c.push("")}if(a=Qi(t,e).trim(),a.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;l=Nu(a),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();const f=l.length;if(f===0||f!==c.length)return!1;if(i)return!0;const d=t.parentType;t.parentType="table";const g=t.md.block.ruler.getRules("blockquote"),h=t.push("table_open","table",1),w=[e,0];h.map=w;const v=t.push("thead_open","thead",1);v.map=[e,e+1];const M=t.push("tr_open","tr",1);M.map=[e,e+1];for(let R=0;R<l.length;R++){const L=t.push("th_open","th",1);c[R]&&(L.attrs=[["style","text-align:"+c[R]]]);const z=t.push("inline","",0);z.content=l[R].trim(),z.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let N,I=0;for(r=e+2;r<n&&!(t.sCount[r]<t.blkIndent);r++){let R=!1;for(let z=0,G=g.length;z<G;z++)if(g[z](t,r,n,!0)){R=!0;break}if(R||(a=Qi(t,r).trim(),!a)||t.sCount[r]-t.blkIndent>=4||(l=Nu(a),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),I+=f-l.length,I>E0))break;if(r===e+2){const z=t.push("tbody_open","tbody",1);z.map=N=[e+2,0]}const L=t.push("tr_open","tr",1);L.map=[r,r+1];for(let z=0;z<f;z++){const G=t.push("td_open","td",1);c[z]&&(G.attrs=[["style","text-align:"+c[z]]]);const ee=t.push("inline","",0);ee.content=l[z]?l[z].trim():"",ee.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return N&&(t.push("tbody_close","tbody",-1),N[1]=r),t.push("table_close","table",-1),w[1]=r,t.parentType=d,t.line=r,!0}function M0(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let i=e+1,r=i;for(;i<n;){if(t.isEmpty(i)){i++;continue}if(t.sCount[i]-t.blkIndent>=4){i++,r=i;continue}break}t.line=r;const o=t.push("code_block","code",0);return o.content=t.getLines(e,r,4+t.blkIndent,!1)+`
`,o.map=[e,t.line],!0}function O0(t,e,n,i){let r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||r+3>o)return!1;const u=t.src.charCodeAt(r);if(u!==126&&u!==96)return!1;let s=r;r=t.skipChars(r,u);let a=r-s;if(a<3)return!1;const l=t.src.slice(s,r),c=t.src.slice(r,o);if(u===96&&c.indexOf(String.fromCharCode(u))>=0)return!1;if(i)return!0;let f=e,d=!1;for(;f++,!(f>=n||(r=s=t.bMarks[f]+t.tShift[f],o=t.eMarks[f],r<o&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(r)===u&&!(t.sCount[f]-t.blkIndent>=4)&&(r=t.skipChars(r,u),!(r-s<a)&&(r=t.skipSpaces(r),!(r<o)))){d=!0;break}a=t.sCount[e],t.line=f+(d?1:0);const g=t.push("fence","code",0);return g.info=c,g.content=t.getLines(e+1,f,a,!0),g.markup=l,g.map=[e,t.line],!0}function T0(t,e,n,i){let r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];const u=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(r)!==62)return!1;if(i)return!0;const s=[],a=[],l=[],c=[],f=t.md.block.ruler.getRules("blockquote"),d=t.parentType;t.parentType="blockquote";let g=!1,h;for(h=e;h<n;h++){const I=t.sCount[h]<t.blkIndent;if(r=t.bMarks[h]+t.tShift[h],o=t.eMarks[h],r>=o)break;if(t.src.charCodeAt(r++)===62&&!I){let L=t.sCount[h]+1,z,G;t.src.charCodeAt(r)===32?(r++,L++,G=!1,z=!0):t.src.charCodeAt(r)===9?(z=!0,(t.bsCount[h]+L)%4===3?(r++,L++,G=!1):G=!0):z=!1;let ee=L;for(s.push(t.bMarks[h]),t.bMarks[h]=r;r<o;){const $=t.src.charCodeAt(r);if(Q($))$===9?ee+=4-(ee+t.bsCount[h]+(G?1:0))%4:ee++;else break;r++}g=r>=o,a.push(t.bsCount[h]),t.bsCount[h]=t.sCount[h]+1+(z?1:0),l.push(t.sCount[h]),t.sCount[h]=ee-L,c.push(t.tShift[h]),t.tShift[h]=r-t.bMarks[h];continue}if(g)break;let R=!1;for(let L=0,z=f.length;L<z;L++)if(f[L](t,h,n,!0)){R=!0;break}if(R){t.lineMax=h,t.blkIndent!==0&&(s.push(t.bMarks[h]),a.push(t.bsCount[h]),c.push(t.tShift[h]),l.push(t.sCount[h]),t.sCount[h]-=t.blkIndent);break}s.push(t.bMarks[h]),a.push(t.bsCount[h]),c.push(t.tShift[h]),l.push(t.sCount[h]),t.sCount[h]=-1}const w=t.blkIndent;t.blkIndent=0;const v=t.push("blockquote_open","blockquote",1);v.markup=">";const M=[e,0];v.map=M,t.md.block.tokenize(t,e,h);const N=t.push("blockquote_close","blockquote",-1);N.markup=">",t.lineMax=u,t.parentType=d,M[1]=t.line;for(let I=0;I<c.length;I++)t.bMarks[I+e]=s[I],t.tShift[I+e]=c[I],t.sCount[I+e]=l[I],t.bsCount[I+e]=a[I];return t.blkIndent=w,!0}function N0(t,e,n,i){const r=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.bMarks[e]+t.tShift[e];const u=t.src.charCodeAt(o++);if(u!==42&&u!==45&&u!==95)return!1;let s=1;for(;o<r;){const l=t.src.charCodeAt(o++);if(l!==u&&!Q(l))return!1;l===u&&s++}if(s<3)return!1;if(i)return!0;t.line=e+1;const a=t.push("hr","hr",0);return a.map=[e,t.line],a.markup=Array(s+1).join(String.fromCharCode(u)),!0}function Fu(t,e){const n=t.eMarks[e];let i=t.bMarks[e]+t.tShift[e];const r=t.src.charCodeAt(i++);if(r!==42&&r!==45&&r!==43)return-1;if(i<n){const o=t.src.charCodeAt(i);if(!Q(o))return-1}return i}function Iu(t,e){const n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];let r=n;if(r+1>=i)return-1;let o=t.src.charCodeAt(r++);if(o<48||o>57)return-1;for(;;){if(r>=i)return-1;if(o=t.src.charCodeAt(r++),o>=48&&o<=57){if(r-n>=10)return-1;continue}if(o===41||o===46)break;return-1}return r<i&&(o=t.src.charCodeAt(r),!Q(o))?-1:r}function F0(t,e){const n=t.level+2;for(let i=e+2,r=t.tokens.length-2;i<r;i++)t.tokens[i].level===n&&t.tokens[i].type==="paragraph_open"&&(t.tokens[i+2].hidden=!0,t.tokens[i].hidden=!0,i+=2)}function I0(t,e,n,i){let r,o,u,s,a=e,l=!0;if(t.sCount[a]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[a]-t.listIndent>=4&&t.sCount[a]<t.blkIndent)return!1;let c=!1;i&&t.parentType==="paragraph"&&t.sCount[a]>=t.blkIndent&&(c=!0);let f,d,g;if((g=Iu(t,a))>=0){if(f=!0,u=t.bMarks[a]+t.tShift[a],d=Number(t.src.slice(u,g-1)),c&&d!==1)return!1}else if((g=Fu(t,a))>=0)f=!1;else return!1;if(c&&t.skipSpaces(g)>=t.eMarks[a])return!1;if(i)return!0;const h=t.src.charCodeAt(g-1),w=t.tokens.length;f?(s=t.push("ordered_list_open","ol",1),d!==1&&(s.attrs=[["start",d]])):s=t.push("bullet_list_open","ul",1);const v=[a,0];s.map=v,s.markup=String.fromCharCode(h);let M=!1;const N=t.md.block.ruler.getRules("list"),I=t.parentType;for(t.parentType="list";a<n;){o=g,r=t.eMarks[a];const R=t.sCount[a]+g-(t.bMarks[a]+t.tShift[a]);let L=R;for(;o<r;){const D=t.src.charCodeAt(o);if(D===9)L+=4-(L+t.bsCount[a])%4;else if(D===32)L++;else break;o++}const z=o;let G;z>=r?G=1:G=L-R,G>4&&(G=1);const ee=R+G;s=t.push("list_item_open","li",1),s.markup=String.fromCharCode(h);const $=[a,0];s.map=$,f&&(s.info=t.src.slice(u,g-1));const re=t.tight,Te=t.tShift[a],Dt=t.sCount[a],zt=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=ee,t.tight=!0,t.tShift[a]=z-t.bMarks[a],t.sCount[a]=L,z>=r&&t.isEmpty(a+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,a,n,!0),(!t.tight||M)&&(l=!1),M=t.line-a>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=zt,t.tShift[a]=Te,t.sCount[a]=Dt,t.tight=re,s=t.push("list_item_close","li",-1),s.markup=String.fromCharCode(h),a=t.line,$[1]=a,a>=n||t.sCount[a]<t.blkIndent||t.sCount[a]-t.blkIndent>=4)break;let Pt=!1;for(let D=0,m=N.length;D<m;D++)if(N[D](t,a,n,!0)){Pt=!0;break}if(Pt)break;if(f){if(g=Iu(t,a),g<0)break;u=t.bMarks[a]+t.tShift[a]}else if(g=Fu(t,a),g<0)break;if(h!==t.src.charCodeAt(g-1))break}return f?s=t.push("ordered_list_close","ol",-1):s=t.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(h),v[1]=a,t.line=a,t.parentType=I,l&&F0(t,w),!0}function R0(t,e,n,i){let r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],u=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(r)!==91)return!1;function s(N){const I=t.lineMax;if(N>=I||t.isEmpty(N))return null;let R=!1;if(t.sCount[N]-t.blkIndent>3&&(R=!0),t.sCount[N]<0&&(R=!0),!R){const G=t.md.block.ruler.getRules("reference"),ee=t.parentType;t.parentType="reference";let $=!1;for(let re=0,Te=G.length;re<Te;re++)if(G[re](t,N,I,!0)){$=!0;break}if(t.parentType=ee,$)return null}const L=t.bMarks[N]+t.tShift[N],z=t.eMarks[N];return t.src.slice(L,z+1)}let a=t.src.slice(r,o+1);o=a.length;let l=-1;for(r=1;r<o;r++){const N=a.charCodeAt(r);if(N===91)return!1;if(N===93){l=r;break}else if(N===10){const I=s(u);I!==null&&(a+=I,o=a.length,u++)}else if(N===92&&(r++,r<o&&a.charCodeAt(r)===10)){const I=s(u);I!==null&&(a+=I,o=a.length,u++)}}if(l<0||a.charCodeAt(l+1)!==58)return!1;for(r=l+2;r<o;r++){const N=a.charCodeAt(r);if(N===10){const I=s(u);I!==null&&(a+=I,o=a.length,u++)}else if(!Q(N))break}const c=t.md.helpers.parseLinkDestination(a,r,o);if(!c.ok)return!1;const f=t.md.normalizeLink(c.str);if(!t.md.validateLink(f))return!1;r=c.pos;const d=r,g=u,h=r;for(;r<o;r++){const N=a.charCodeAt(r);if(N===10){const I=s(u);I!==null&&(a+=I,o=a.length,u++)}else if(!Q(N))break}let w=t.md.helpers.parseLinkTitle(a,r,o);for(;w.can_continue;){const N=s(u);if(N===null)break;a+=N,r=o,o=a.length,u++,w=t.md.helpers.parseLinkTitle(a,r,o,w)}let v;for(r<o&&h!==r&&w.ok?(v=w.str,r=w.pos):(v="",r=d,u=g);r<o;){const N=a.charCodeAt(r);if(!Q(N))break;r++}if(r<o&&a.charCodeAt(r)!==10&&v)for(v="",r=d,u=g;r<o;){const N=a.charCodeAt(r);if(!Q(N))break;r++}if(r<o&&a.charCodeAt(r)!==10)return!1;const M=Si(a.slice(1,l));return M?(i||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[M]>"u"&&(t.env.references[M]={title:v,href:f}),t.line=u),!0):!1}const B0=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],z0="[a-zA-Z_:][a-zA-Z0-9:._-]*",P0="[^\"'=<>`\\x00-\\x20]+",L0="'[^']*'",q0='"[^"]*"',$0="(?:"+P0+"|"+L0+"|"+q0+")",V0="(?:\\s+"+z0+"(?:\\s*=\\s*"+$0+")?)",Za="<[A-Za-z][A-Za-z0-9\\-]*"+V0+"*\\s*\\/?>",Ga="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",H0="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",U0="<[?][\\s\\S]*?[?]>",W0="<![A-Za-z][^>]*>",J0="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",K0=new RegExp("^(?:"+Za+"|"+Ga+"|"+H0+"|"+U0+"|"+W0+"|"+J0+")"),Z0=new RegExp("^(?:"+Za+"|"+Ga+")"),$t=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+B0.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Z0.source+"\\s*$"),/^$/,!1]];function G0(t,e,n,i){let r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(r)!==60)return!1;let u=t.src.slice(r,o),s=0;for(;s<$t.length&&!$t[s][0].test(u);s++);if(s===$t.length)return!1;if(i)return $t[s][2];let a=e+1;if(!$t[s][1].test(u)){for(;a<n&&!(t.sCount[a]<t.blkIndent);a++)if(r=t.bMarks[a]+t.tShift[a],o=t.eMarks[a],u=t.src.slice(r,o),$t[s][1].test(u)){u.length!==0&&a++;break}}t.line=a;const l=t.push("html_block","",0);return l.map=[e,a],l.content=t.getLines(e,a,t.blkIndent,!0),!0}function X0(t,e,n,i){let r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let u=t.src.charCodeAt(r);if(u!==35||r>=o)return!1;let s=1;for(u=t.src.charCodeAt(++r);u===35&&r<o&&s<=6;)s++,u=t.src.charCodeAt(++r);if(s>6||r<o&&!Q(u))return!1;if(i)return!0;o=t.skipSpacesBack(o,r);const a=t.skipCharsBack(o,35,r);a>r&&Q(t.src.charCodeAt(a-1))&&(o=a),t.line=e+1;const l=t.push("heading_open","h"+String(s),1);l.markup="########".slice(0,s),l.map=[e,t.line];const c=t.push("inline","",0);c.content=t.src.slice(r,o).trim(),c.map=[e,t.line],c.children=[];const f=t.push("heading_close","h"+String(s),-1);return f.markup="########".slice(0,s),!0}function Y0(t,e,n){const i=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const r=t.parentType;t.parentType="paragraph";let o=0,u,s=e+1;for(;s<n&&!t.isEmpty(s);s++){if(t.sCount[s]-t.blkIndent>3)continue;if(t.sCount[s]>=t.blkIndent){let g=t.bMarks[s]+t.tShift[s];const h=t.eMarks[s];if(g<h&&(u=t.src.charCodeAt(g),(u===45||u===61)&&(g=t.skipChars(g,u),g=t.skipSpaces(g),g>=h))){o=u===61?1:2;break}}if(t.sCount[s]<0)continue;let d=!1;for(let g=0,h=i.length;g<h;g++)if(i[g](t,s,n,!0)){d=!0;break}if(d)break}if(!o)return!1;const a=t.getLines(e,s,t.blkIndent,!1).trim();t.line=s+1;const l=t.push("heading_open","h"+String(o),1);l.markup=String.fromCharCode(u),l.map=[e,t.line];const c=t.push("inline","",0);c.content=a,c.map=[e,t.line-1],c.children=[];const f=t.push("heading_close","h"+String(o),-1);return f.markup=String.fromCharCode(u),t.parentType=r,!0}function Q0(t,e,n){const i=t.md.block.ruler.getRules("paragraph"),r=t.parentType;let o=e+1;for(t.parentType="paragraph";o<n&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3||t.sCount[o]<0)continue;let l=!1;for(let c=0,f=i.length;c<f;c++)if(i[c](t,o,n,!0)){l=!0;break}if(l)break}const u=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o;const s=t.push("paragraph_open","p",1);s.map=[e,t.line];const a=t.push("inline","",0);return a.content=u,a.map=[e,t.line],a.children=[],t.push("paragraph_close","p",-1),t.parentType=r,!0}const Wn=[["table",A0,["paragraph","reference"]],["code",M0],["fence",O0,["paragraph","reference","blockquote","list"]],["blockquote",T0,["paragraph","reference","blockquote","list"]],["hr",N0,["paragraph","reference","blockquote","list"]],["list",I0,["paragraph","reference","blockquote"]],["reference",R0],["html_block",G0,["paragraph","reference","blockquote"]],["heading",X0,["paragraph","reference","blockquote"]],["lheading",Y0],["paragraph",Q0]];function Ei(){this.ruler=new De;for(let t=0;t<Wn.length;t++)this.ruler.push(Wn[t][0],Wn[t][1],{alt:(Wn[t][2]||[]).slice()})}Ei.prototype.tokenize=function(t,e,n){const i=this.ruler.getRules(""),r=i.length,o=t.md.options.maxNesting;let u=e,s=!1;for(;u<n&&(t.line=u=t.skipEmptyLines(u),!(u>=n||t.sCount[u]<t.blkIndent));){if(t.level>=o){t.line=n;break}const a=t.line;let l=!1;for(let c=0;c<r;c++)if(l=i[c](t,u,n,!1),l){if(a>=t.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");t.tight=!s,t.isEmpty(t.line-1)&&(s=!0),u=t.line,u<n&&t.isEmpty(u)&&(s=!0,u++,t.line=u)}};Ei.prototype.parse=function(t,e,n,i){if(!t)return;const r=new this.State(t,e,n,i);this.tokenize(r,r.line,r.lineMax)};Ei.prototype.State=Ye;function zn(t,e,n,i){this.src=t,this.env=n,this.md=e,this.tokens=i,this.tokens_meta=Array(i.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}zn.prototype.pushPending=function(){const t=new $e("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};zn.prototype.push=function(t,e,n){this.pending&&this.pushPending();const i=new $e(t,e,n);let r=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(r),i};zn.prototype.scanDelims=function(t,e){const n=this.posMax,i=this.src.charCodeAt(t),r=t>0?this.src.charCodeAt(t-1):32;let o=t;for(;o<n&&this.src.charCodeAt(o)===i;)o++;const u=o-t,s=o<n?this.src.charCodeAt(o):32,a=On(r)||Mn(String.fromCharCode(r)),l=On(s)||Mn(String.fromCharCode(s)),c=An(r),f=An(s),d=!f&&(!l||c||a),g=!c&&(!a||f||l);return{can_open:d&&(e||!g||a),can_close:g&&(e||!d||l),length:u}};zn.prototype.Token=$e;function ep(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function tp(t,e){let n=t.pos;for(;n<t.posMax&&!ep(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const np=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function ip(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,i=t.posMax;if(n+3>i||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const r=t.pending.match(np);if(!r)return!1;const o=r[1],u=t.md.linkify.matchAtStart(t.src.slice(n-o.length));if(!u)return!1;let s=u.url;if(s.length<=o.length)return!1;s=s.replace(/\*+$/,"");const a=t.md.normalizeLink(s);if(!t.md.validateLink(a))return!1;if(!e){t.pending=t.pending.slice(0,-o.length);const l=t.push("link_open","a",1);l.attrs=[["href",a]],l.markup="linkify",l.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(s);const f=t.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return t.pos+=s.length-o.length,!0}function rp(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const i=t.pending.length-1,r=t.posMax;if(!e)if(i>=0&&t.pending.charCodeAt(i)===32)if(i>=1&&t.pending.charCodeAt(i-1)===32){let o=i-1;for(;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<r&&Q(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const ro=[];for(let t=0;t<256;t++)ro.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){ro[t.charCodeAt(0)]=1});function op(t,e){let n=t.pos;const i=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=i))return!1;let r=t.src.charCodeAt(n);if(r===10){for(e||t.push("hardbreak","br",0),n++;n<i&&(r=t.src.charCodeAt(n),!!Q(r));)n++;return t.pos=n,!0}let o=t.src[n];if(r>=55296&&r<=56319&&n+1<i){const s=t.src.charCodeAt(n+1);s>=56320&&s<=57343&&(o+=t.src[n+1],n++)}const u="\\"+o;if(!e){const s=t.push("text_special","",0);r<256&&ro[r]!==0?s.content=o:s.content=u,s.markup=u,s.info="escape"}return t.pos=n+1,!0}function up(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const r=n;n++;const o=t.posMax;for(;n<o&&t.src.charCodeAt(n)===96;)n++;const u=t.src.slice(r,n),s=u.length;if(t.backticksScanned&&(t.backticks[s]||0)<=r)return e||(t.pending+=u),t.pos+=s,!0;let a=n,l;for(;(l=t.src.indexOf("`",a))!==-1;){for(a=l+1;a<o&&t.src.charCodeAt(a)===96;)a++;const c=a-l;if(c===s){if(!e){const f=t.push("code_inline","code",0);f.markup=u,f.content=t.src.slice(n,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=a,!0}t.backticks[c]=l}return t.backticksScanned=!0,e||(t.pending+=u),t.pos+=s,!0}function sp(t,e){const n=t.pos,i=t.src.charCodeAt(n);if(e||i!==126)return!1;const r=t.scanDelims(t.pos,!0);let o=r.length;const u=String.fromCharCode(i);if(o<2)return!1;let s;o%2&&(s=t.push("text","",0),s.content=u,o--);for(let a=0;a<o;a+=2)s=t.push("text","",0),s.content=u+u,t.delimiters.push({marker:i,length:0,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return t.pos+=r.length,!0}function Ru(t,e){let n;const i=[],r=e.length;for(let o=0;o<r;o++){const u=e[o];if(u.marker!==126||u.end===-1)continue;const s=e[u.end];n=t.tokens[u.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[s.token-1].type==="text"&&t.tokens[s.token-1].content==="~"&&i.push(s.token-1)}for(;i.length;){const o=i.pop();let u=o+1;for(;u<t.tokens.length&&t.tokens[u].type==="s_close";)u++;u--,o!==u&&(n=t.tokens[u],t.tokens[u]=t.tokens[o],t.tokens[o]=n)}}function ap(t){const e=t.tokens_meta,n=t.tokens_meta.length;Ru(t,t.delimiters);for(let i=0;i<n;i++)e[i]&&e[i].delimiters&&Ru(t,e[i].delimiters)}const Xa={tokenize:sp,postProcess:ap};function lp(t,e){const n=t.pos,i=t.src.charCodeAt(n);if(e||i!==95&&i!==42)return!1;const r=t.scanDelims(t.pos,i===42);for(let o=0;o<r.length;o++){const u=t.push("text","",0);u.content=String.fromCharCode(i),t.delimiters.push({marker:i,length:r.length,token:t.tokens.length-1,end:-1,open:r.can_open,close:r.can_close})}return t.pos+=r.length,!0}function Bu(t,e){const n=e.length;for(let i=n-1;i>=0;i--){const r=e[i];if(r.marker!==95&&r.marker!==42||r.end===-1)continue;const o=e[r.end],u=i>0&&e[i-1].end===r.end+1&&e[i-1].marker===r.marker&&e[i-1].token===r.token-1&&e[r.end+1].token===o.token+1,s=String.fromCharCode(r.marker),a=t.tokens[r.token];a.type=u?"strong_open":"em_open",a.tag=u?"strong":"em",a.nesting=1,a.markup=u?s+s:s,a.content="";const l=t.tokens[o.token];l.type=u?"strong_close":"em_close",l.tag=u?"strong":"em",l.nesting=-1,l.markup=u?s+s:s,l.content="",u&&(t.tokens[e[i-1].token].content="",t.tokens[e[r.end+1].token].content="",i--)}}function cp(t){const e=t.tokens_meta,n=t.tokens_meta.length;Bu(t,t.delimiters);for(let i=0;i<n;i++)e[i]&&e[i].delimiters&&Bu(t,e[i].delimiters)}const Ya={tokenize:lp,postProcess:cp};function fp(t,e){let n,i,r,o,u="",s="",a=t.pos,l=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const c=t.pos,f=t.posMax,d=t.pos+1,g=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(g<0)return!1;let h=g+1;if(h<f&&t.src.charCodeAt(h)===40){for(l=!1,h++;h<f&&(n=t.src.charCodeAt(h),!(!Q(n)&&n!==10));h++);if(h>=f)return!1;if(a=h,r=t.md.helpers.parseLinkDestination(t.src,h,t.posMax),r.ok){for(u=t.md.normalizeLink(r.str),t.md.validateLink(u)?h=r.pos:u="",a=h;h<f&&(n=t.src.charCodeAt(h),!(!Q(n)&&n!==10));h++);if(r=t.md.helpers.parseLinkTitle(t.src,h,t.posMax),h<f&&a!==h&&r.ok)for(s=r.str,h=r.pos;h<f&&(n=t.src.charCodeAt(h),!(!Q(n)&&n!==10));h++);}(h>=f||t.src.charCodeAt(h)!==41)&&(l=!0),h++}if(l){if(typeof t.env.references>"u")return!1;if(h<f&&t.src.charCodeAt(h)===91?(a=h+1,h=t.md.helpers.parseLinkLabel(t,h),h>=0?i=t.src.slice(a,h++):h=g+1):h=g+1,i||(i=t.src.slice(d,g)),o=t.env.references[Si(i)],!o)return t.pos=c,!1;u=o.href,s=o.title}if(!e){t.pos=d,t.posMax=g;const w=t.push("link_open","a",1),v=[["href",u]];w.attrs=v,s&&v.push(["title",s]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=h,t.posMax=f,!0}function dp(t,e){let n,i,r,o,u,s,a,l,c="";const f=t.pos,d=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const g=t.pos+2,h=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(h<0)return!1;if(o=h+1,o<d&&t.src.charCodeAt(o)===40){for(o++;o<d&&(n=t.src.charCodeAt(o),!(!Q(n)&&n!==10));o++);if(o>=d)return!1;for(l=o,s=t.md.helpers.parseLinkDestination(t.src,o,t.posMax),s.ok&&(c=t.md.normalizeLink(s.str),t.md.validateLink(c)?o=s.pos:c=""),l=o;o<d&&(n=t.src.charCodeAt(o),!(!Q(n)&&n!==10));o++);if(s=t.md.helpers.parseLinkTitle(t.src,o,t.posMax),o<d&&l!==o&&s.ok)for(a=s.str,o=s.pos;o<d&&(n=t.src.charCodeAt(o),!(!Q(n)&&n!==10));o++);else a="";if(o>=d||t.src.charCodeAt(o)!==41)return t.pos=f,!1;o++}else{if(typeof t.env.references>"u")return!1;if(o<d&&t.src.charCodeAt(o)===91?(l=o+1,o=t.md.helpers.parseLinkLabel(t,o),o>=0?r=t.src.slice(l,o++):o=h+1):o=h+1,r||(r=t.src.slice(g,h)),u=t.env.references[Si(r)],!u)return t.pos=f,!1;c=u.href,a=u.title}if(!e){i=t.src.slice(g,h);const w=[];t.md.inline.parse(i,t.md,t.env,w);const v=t.push("image","img",0),M=[["src",c],["alt",""]];v.attrs=M,v.children=w,v.content=i,a&&M.push(["title",a])}return t.pos=o,t.posMax=d,!0}const hp=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,mp=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function pp(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const i=t.pos,r=t.posMax;for(;;){if(++n>=r)return!1;const u=t.src.charCodeAt(n);if(u===60)return!1;if(u===62)break}const o=t.src.slice(i+1,n);if(mp.test(o)){const u=t.md.normalizeLink(o);if(!t.md.validateLink(u))return!1;if(!e){const s=t.push("link_open","a",1);s.attrs=[["href",u]],s.markup="autolink",s.info="auto";const a=t.push("text","",0);a.content=t.md.normalizeLinkText(o);const l=t.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return t.pos+=o.length+2,!0}if(hp.test(o)){const u=t.md.normalizeLink("mailto:"+o);if(!t.md.validateLink(u))return!1;if(!e){const s=t.push("link_open","a",1);s.attrs=[["href",u]],s.markup="autolink",s.info="auto";const a=t.push("text","",0);a.content=t.md.normalizeLinkText(o);const l=t.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return t.pos+=o.length+2,!0}return!1}function gp(t){return/^<a[>\s]/i.test(t)}function _p(t){return/^<\/a\s*>/i.test(t)}function bp(t){const e=t|32;return e>=97&&e<=122}function yp(t,e){if(!t.md.options.html)return!1;const n=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==60||i+2>=n)return!1;const r=t.src.charCodeAt(i+1);if(r!==33&&r!==63&&r!==47&&!bp(r))return!1;const o=t.src.slice(i).match(K0);if(!o)return!1;if(!e){const u=t.push("html_inline","",0);u.content=o[0],gp(u.content)&&t.linkLevel++,_p(u.content)&&t.linkLevel--}return t.pos+=o[0].length,!0}const kp=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xp=/^&([a-z][a-z0-9]{1,31});/i;function wp(t,e){const n=t.pos,i=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=i)return!1;if(t.src.charCodeAt(n+1)===35){const o=t.src.slice(n).match(kp);if(o){if(!e){const u=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),s=t.push("text_special","",0);s.content=no(u)?gi(u):gi(65533),s.markup=o[0],s.info="entity"}return t.pos+=o[0].length,!0}}else{const o=t.src.slice(n).match(xp);if(o){const u=Ha(o[0]);if(u!==o[0]){if(!e){const s=t.push("text_special","",0);s.content=u,s.markup=o[0],s.info="entity"}return t.pos+=o[0].length,!0}}}return!1}function zu(t){const e={},n=t.length;if(!n)return;let i=0,r=-2;const o=[];for(let u=0;u<n;u++){const s=t[u];if(o.push(0),(t[i].marker!==s.marker||r!==s.token-1)&&(i=u),r=s.token,s.length=s.length||0,!s.close)continue;e.hasOwnProperty(s.marker)||(e[s.marker]=[-1,-1,-1,-1,-1,-1]);const a=e[s.marker][(s.open?3:0)+s.length%3];let l=i-o[i]-1,c=l;for(;l>a;l-=o[l]+1){const f=t[l];if(f.marker===s.marker&&f.open&&f.end<0){let d=!1;if((f.close||s.open)&&(f.length+s.length)%3===0&&(f.length%3!==0||s.length%3!==0)&&(d=!0),!d){const g=l>0&&!t[l-1].open?o[l-1]+1:0;o[u]=u-l+g,o[l]=g,s.open=!1,f.end=u,f.close=!1,c=-1,r=-2;break}}}c!==-1&&(e[s.marker][(s.open?3:0)+(s.length||0)%3]=c)}}function jp(t){const e=t.tokens_meta,n=t.tokens_meta.length;zu(t.delimiters);for(let i=0;i<n;i++)e[i]&&e[i].delimiters&&zu(e[i].delimiters)}function Cp(t){let e,n,i=0;const r=t.tokens,o=t.tokens.length;for(e=n=0;e<o;e++)r[e].nesting<0&&i--,r[e].level=i,r[e].nesting>0&&i++,r[e].type==="text"&&e+1<o&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==n&&(r[n]=r[e]),n++);e!==n&&(r.length=n)}const er=[["text",tp],["linkify",ip],["newline",rp],["escape",op],["backticks",up],["strikethrough",Xa.tokenize],["emphasis",Ya.tokenize],["link",fp],["image",dp],["autolink",pp],["html_inline",yp],["entity",wp]],tr=[["balance_pairs",jp],["strikethrough",Xa.postProcess],["emphasis",Ya.postProcess],["fragments_join",Cp]];function Pn(){this.ruler=new De;for(let t=0;t<er.length;t++)this.ruler.push(er[t][0],er[t][1]);this.ruler2=new De;for(let t=0;t<tr.length;t++)this.ruler2.push(tr[t][0],tr[t][1])}Pn.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),i=n.length,r=t.md.options.maxNesting,o=t.cache;if(typeof o[e]<"u"){t.pos=o[e];return}let u=!1;if(t.level<r){for(let s=0;s<i;s++)if(t.level++,u=n[s](t,!0),t.level--,u){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;u||t.pos++,o[e]=t.pos};Pn.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,i=t.posMax,r=t.md.options.maxNesting;for(;t.pos<i;){const o=t.pos;let u=!1;if(t.level<r){for(let s=0;s<n;s++)if(u=e[s](t,!1),u){if(o>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(u){if(t.pos>=i)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Pn.prototype.parse=function(t,e,n,i){const r=new this.State(t,e,n,i);this.tokenize(r);const o=this.ruler2.getRules(""),u=o.length;for(let s=0;s<u;s++)o[s](r)};Pn.prototype.State=zn;function vp(t){const e={};t=t||{},e.src_Any=Pa.source,e.src_Cc=La.source,e.src_Z=$a.source,e.src_P=eo.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Or(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function Ai(t){return Object.prototype.toString.call(t)}function Dp(t){return Ai(t)==="[object String]"}function Sp(t){return Ai(t)==="[object Object]"}function Ep(t){return Ai(t)==="[object RegExp]"}function Pu(t){return Ai(t)==="[object Function]"}function Ap(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Qa={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Mp(t){return Object.keys(t||{}).reduce(function(e,n){return e||Qa.hasOwnProperty(n)},!1)}const Op={"http:":{validate:function(t,e,n){const i=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(i)?i.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const i=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(i)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:i.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const i=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(i)?i.match(n.re.mailto)[0].length:0}}},Tp="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Np="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Fp(t){t.__index__=-1,t.__text_cache__=""}function Ip(t){return function(e,n){const i=e.slice(n);return t.test(i)?i.match(t)[0].length:0}}function Lu(){return function(t,e){e.normalize(t)}}function _i(t){const e=t.re=vp(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(Tp),n.push(e.src_xn),e.src_tlds=n.join("|");function i(s){return s.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(i(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(i(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(i(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(i(e.tpl_host_fuzzy_test),"i");const r=[];t.__compiled__={};function o(s,a){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+a)}Object.keys(t.__schemas__).forEach(function(s){const a=t.__schemas__[s];if(a===null)return;const l={validate:null,link:null};if(t.__compiled__[s]=l,Sp(a)){Ep(a.validate)?l.validate=Ip(a.validate):Pu(a.validate)?l.validate=a.validate:o(s,a),Pu(a.normalize)?l.normalize=a.normalize:a.normalize?o(s,a):l.normalize=Lu();return}if(Dp(a)){r.push(s);return}o(s,a)}),r.forEach(function(s){t.__compiled__[t.__schemas__[s]]&&(t.__compiled__[s].validate=t.__compiled__[t.__schemas__[s]].validate,t.__compiled__[s].normalize=t.__compiled__[t.__schemas__[s]].normalize)}),t.__compiled__[""]={validate:null,normalize:Lu()};const u=Object.keys(t.__compiled__).filter(function(s){return s.length>0&&t.__compiled__[s]}).map(Ap).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+u+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+u+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),Fp(t)}function Rp(t,e){const n=t.__index__,i=t.__last_index__,r=t.__text_cache__.slice(n,i);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=i+e,this.raw=r,this.text=r,this.url=r}function Tr(t,e){const n=new Rp(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Oe(t,e){if(!(this instanceof Oe))return new Oe(t,e);e||Mp(t)&&(e=t,t={}),this.__opts__=Or({},Qa,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Or({},Op,t),this.__compiled__={},this.__tlds__=Np,this.__tlds_replaced__=!1,this.re={},_i(this)}Oe.prototype.add=function(e,n){return this.__schemas__[e]=n,_i(this),this};Oe.prototype.set=function(e){return this.__opts__=Or(this.__opts__,e),this};Oe.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,i,r,o,u,s,a,l,c;if(this.re.schema_test.test(e)){for(a=this.re.schema_search,a.lastIndex=0;(n=a.exec(e))!==null;)if(o=this.testSchemaAt(e,n[2],a.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(i=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(u=i.index+i[1].length,(this.__index__<0||u<this.__index__)&&(this.__schema__="",this.__index__=u,this.__last_index__=i.index+i[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(r=e.match(this.re.email_fuzzy))!==null&&(u=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||u<this.__index__||u===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=u,this.__last_index__=s))),this.__index__>=0};Oe.prototype.pretest=function(e){return this.re.pretest.test(e)};Oe.prototype.testSchemaAt=function(e,n,i){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,i,this):0};Oe.prototype.match=function(e){const n=[];let i=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(Tr(this,i)),i=this.__last_index__);let r=i?e.slice(i):e;for(;this.test(r);)n.push(Tr(this,i)),r=r.slice(this.__last_index__),i+=this.__last_index__;return n.length?n:null};Oe.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const i=this.testSchemaAt(e,n[2],n[0].length);return i?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i,Tr(this,0)):null};Oe.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(i,r,o){return i!==o[r-1]}).reverse(),_i(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,_i(this),this)};Oe.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Oe.prototype.onCompile=function(){};const Zt=2147483647,We=36,oo=1,Tn=26,Bp=38,zp=700,el=72,tl=128,nl="-",Pp=/^xn--/,Lp=/[^\0-\x7F]/,qp=/[\x2E\u3002\uFF0E\uFF61]/g,$p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},nr=We-oo,Je=Math.floor,ir=String.fromCharCode;function ct(t){throw new RangeError($p[t])}function Vp(t,e){const n=[];let i=t.length;for(;i--;)n[i]=e(t[i]);return n}function il(t,e){const n=t.split("@");let i="";n.length>1&&(i=n[0]+"@",t=n[1]),t=t.replace(qp,".");const r=t.split("."),o=Vp(r,e).join(".");return i+o}function rl(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((r&1023)<<10)+(o&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}const Hp=t=>String.fromCodePoint(...t),Up=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:We},qu=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},ol=function(t,e,n){let i=0;for(t=n?Je(t/zp):t>>1,t+=Je(t/e);t>nr*Tn>>1;i+=We)t=Je(t/nr);return Je(i+(nr+1)*t/(t+Bp))},ul=function(t){const e=[],n=t.length;let i=0,r=tl,o=el,u=t.lastIndexOf(nl);u<0&&(u=0);for(let s=0;s<u;++s)t.charCodeAt(s)>=128&&ct("not-basic"),e.push(t.charCodeAt(s));for(let s=u>0?u+1:0;s<n;){const a=i;for(let c=1,f=We;;f+=We){s>=n&&ct("invalid-input");const d=Up(t.charCodeAt(s++));d>=We&&ct("invalid-input"),d>Je((Zt-i)/c)&&ct("overflow"),i+=d*c;const g=f<=o?oo:f>=o+Tn?Tn:f-o;if(d<g)break;const h=We-g;c>Je(Zt/h)&&ct("overflow"),c*=h}const l=e.length+1;o=ol(i-a,l,a==0),Je(i/l)>Zt-r&&ct("overflow"),r+=Je(i/l),i%=l,e.splice(i++,0,r)}return String.fromCodePoint(...e)},sl=function(t){const e=[];t=rl(t);const n=t.length;let i=tl,r=0,o=el;for(const a of t)a<128&&e.push(ir(a));const u=e.length;let s=u;for(u&&e.push(nl);s<n;){let a=Zt;for(const c of t)c>=i&&c<a&&(a=c);const l=s+1;a-i>Je((Zt-r)/l)&&ct("overflow"),r+=(a-i)*l,i=a;for(const c of t)if(c<i&&++r>Zt&&ct("overflow"),c===i){let f=r;for(let d=We;;d+=We){const g=d<=o?oo:d>=o+Tn?Tn:d-o;if(f<g)break;const h=f-g,w=We-g;e.push(ir(qu(g+h%w,0))),f=Je(h/w)}e.push(ir(qu(f,0))),o=ol(r,l,s===u),r=0,++s}++r,++i}return e.join("")},Wp=function(t){return il(t,function(e){return Pp.test(e)?ul(e.slice(4).toLowerCase()):e})},Jp=function(t){return il(t,function(e){return Lp.test(e)?"xn--"+sl(e):e})},al={version:"2.3.1",ucs2:{decode:rl,encode:Hp},decode:ul,encode:sl,toASCII:Jp,toUnicode:Wp},Kp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Zp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Gp={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Xp={default:Kp,zero:Zp,commonmark:Gp},Yp=/^(vbscript|javascript|file|data):/,Qp=/^data:image\/(gif|png|jpeg|webp);/;function eg(t){const e=t.trim().toLowerCase();return Yp.test(e)?Qp.test(e):!0}const ll=["http:","https:","mailto:"];function tg(t){const e=Qr(t,!0);if(e.hostname&&(!e.protocol||ll.indexOf(e.protocol)>=0))try{e.hostname=al.toASCII(e.hostname)}catch{}return Bn(Yr(e))}function ng(t){const e=Qr(t,!0);if(e.hostname&&(!e.protocol||ll.indexOf(e.protocol)>=0))try{e.hostname=al.toUnicode(e.hostname)}catch{}return nn(Yr(e),nn.defaultChars+"%")}function ze(t,e){if(!(this instanceof ze))return new ze(t,e);e||to(t)||(e=t||{},t="default"),this.inline=new Pn,this.block=new Ei,this.core=new io,this.renderer=new an,this.linkify=new Oe,this.validateLink=eg,this.normalizeLink=tg,this.normalizeLinkText=ng,this.utils=r0,this.helpers=Di({},a0),this.options={},this.configure(t),e&&this.set(e)}ze.prototype.set=function(t){return Di(this.options,t),this};ze.prototype.configure=function(t){const e=this;if(to(t)){const n=t;if(t=Xp[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};ze.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(r){n=n.concat(this[r].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const i=t.filter(function(r){return n.indexOf(r)<0});if(i.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+i);return this};ze.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(r){n=n.concat(this[r].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const i=t.filter(function(r){return n.indexOf(r)<0});if(i.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+i);return this};ze.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};ze.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};ze.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};ze.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};ze.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};const Y=new Br({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>({params:t.getAttribute("data-params")||""})}],toDOM(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM(t){return["ol",{start:t.attrs.order==1?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:t=>({tight:t.hasAttribute("data-tight")})}],toDOM(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:t=>t.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function ig(t,e){if(t.isText&&e.isText&&Z.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}class rg{constructor(e,n){this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:Z.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let n=this.top(),i=n.content,r=i[i.length-1],o=this.schema.text(e,n.marks),u;r&&(u=ig(r,o))?i[i.length-1]=u:i.push(o)}openMark(e){let n=this.top();n.marks=e.addToSet(n.marks)}closeMark(e){let n=this.top();n.marks=e.removeFromSet(n.marks)}parseTokens(e){for(let n=0;n<e.length;n++){let i=e[n],r=this.tokenHandlers[i.type];if(!r)throw new Error("Token type `"+i.type+"` not supported by Markdown parser");r(this,i,e,n)}}addNode(e,n,i){let r=this.top(),o=e.createAndFill(n,i,r?r.marks:[]);return o?(this.push(o),o):null}openNode(e,n){this.stack.push({type:e,attrs:n,content:[],marks:Z.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function cn(t,e,n,i){return t.getAttrs?t.getAttrs(e,n,i):t.attrs instanceof Function?t.attrs(e):t.attrs}function rr(t,e){return t.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function $u(t){return t[t.length-1]==`
`?t.slice(0,t.length-1):t}function or(){}function og(t,e){let n=Object.create(null);for(let i in e){let r=e[i];if(r.block){let o=t.nodeType(r.block);rr(r,i)?n[i]=(u,s,a,l)=>{u.openNode(o,cn(r,s,a,l)),u.addText($u(s.content)),u.closeNode()}:(n[i+"_open"]=(u,s,a,l)=>u.openNode(o,cn(r,s,a,l)),n[i+"_close"]=u=>u.closeNode())}else if(r.node){let o=t.nodeType(r.node);n[i]=(u,s,a,l)=>u.addNode(o,cn(r,s,a,l))}else if(r.mark){let o=t.marks[r.mark];rr(r,i)?n[i]=(u,s,a,l)=>{u.openMark(o.create(cn(r,s,a,l))),u.addText($u(s.content)),u.closeMark(o)}:(n[i+"_open"]=(u,s,a,l)=>u.openMark(o.create(cn(r,s,a,l))),n[i+"_close"]=u=>u.closeMark(o))}else if(r.ignore)rr(r,i)?n[i]=or:(n[i+"_open"]=or,n[i+"_close"]=or);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(r))}return n.text=(i,r)=>i.addText(r.content),n.inline=(i,r)=>i.parseTokens(r.children),n.softbreak=n.softbreak||(i=>i.addText(" ")),n}class uo{constructor(e,n,i){this.schema=e,this.tokenizer=n,this.tokens=i,this.tokenHandlers=og(e,i)}parse(e,n={}){let i=new rg(this.schema,this.tokenHandlers),r;i.parseTokens(this.tokenizer.parse(e,n));do r=i.closeNode();while(i.stack.length);return r||this.schema.topNodeType.createAndFill()}}function Vu(t,e){for(;++e<t.length;)if(t[e].type!="list_item_open")return t[e].hidden;return!1}new uo(Y,ze("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(t,e,n)=>({tight:Vu(e,n)})},ordered_list:{block:"ordered_list",getAttrs:(t,e,n)=>({order:+t.attrGet("start")||1,tight:Vu(e,n)})},heading:{block:"heading",getAttrs:t=>({level:+t.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:t=>({params:t.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:t=>({src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:t=>({href:t.attrGet("href"),title:t.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const ug={open:"",close:"",mixable:!0};class cl{constructor(e,n,i={}){this.nodes=e,this.marks=n,this.options=i}serialize(e,n={}){n=Object.assign({},this.options,n);let i=new sg(this.nodes,this.marks,n);return i.renderContent(e),i.out}}class sg{constructor(e,n,i){this.nodes=e,this.marks=n,this.options=i,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let n=this.delim,i=/\s+$/.exec(n);i&&(n=n.slice(0,n.length-i[0].length));for(let r=1;r<e;r++)this.out+=n+`
`}this.closed=null}}getMark(e){let n=this.marks[e];if(!n){if(this.options.strict!==!1)throw new Error(`Mark type \`${e}\` not supported by Markdown renderer`);n=ug}return n}wrapBlock(e,n,i,r){let o=this.delim;this.write(n??e),this.delim+=e,r(),this.delim=o,this.closeBlock(i)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,n=!0){let i=e.split(`
`);for(let r=0;r<i.length;r++)this.write(),!n&&i[r][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(i[r],this.atBlockStart):i[r],r!=i.length-1&&(this.out+=`
`)}render(e,n,i){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,n,i);else{if(this.options.strict!==!1)throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((n,i,r)=>this.render(n,e,r))}renderInline(e,n=!0){this.atBlockStart=n;let i=[],r="",o=(u,s,a)=>{let l=u?u.marks:[];u&&u.type.name===this.options.hardBreakNodeName&&(l=l.filter(w=>{if(a+1==e.childCount)return!1;let v=e.child(a+1);return w.isInSet(v.marks)&&(!v.isText||/\S/.test(v.text))}));let c=r;if(r="",u&&u.isText&&l.some(w=>{let v=this.getMark(w.type.name);return v&&v.expelEnclosingWhitespace&&!w.isInSet(i)})){let[w,v,M]=/^(\s*)(.*)$/m.exec(u.text);v&&(c+=v,u=M?u.withText(M):null,u||(l=i))}if(u&&u.isText&&l.some(w=>{let v=this.getMark(w.type.name);return v&&v.expelEnclosingWhitespace&&(a==e.childCount-1||!w.isInSet(e.child(a+1).marks))})){let[w,v,M]=/^(.*?)(\s*)$/m.exec(u.text);M&&(r=M,u=v?u.withText(v):null,u||(l=i))}let f=l.length?l[l.length-1]:null,d=f&&this.getMark(f.type.name).escape===!1,g=l.length-(d?1:0);e:for(let w=0;w<g;w++){let v=l[w];if(!this.getMark(v.type.name).mixable)break;for(let M=0;M<i.length;M++){let N=i[M];if(!this.getMark(N.type.name).mixable)break;if(v.eq(N)){w>M?l=l.slice(0,M).concat(v).concat(l.slice(M,w)).concat(l.slice(w+1,g)):M>w&&(l=l.slice(0,w).concat(l.slice(w+1,M)).concat(v).concat(l.slice(M,g)));continue e}}}let h=0;for(;h<Math.min(i.length,g)&&l[h].eq(i[h]);)++h;for(;h<i.length;)this.text(this.markString(i.pop(),!1,e,a),!1);if(c&&this.text(c),u){for(;i.length<g;){let w=l[i.length];i.push(w),this.text(this.markString(w,!0,e,a),!1),this.atBlockStart=!1}d&&u.isText?this.text(this.markString(f,!0,e,a)+u.text+this.markString(f,!1,e,a+1),!1):this.render(u,e,a),this.atBlockStart=!1}u!=null&&u.isText&&u.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(o),o(null,0,e.childCount),this.atBlockStart=!1}renderList(e,n,i){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let r=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,o=this.inTightList;this.inTightList=r,e.forEach((u,s,a)=>{a&&r&&this.flushClose(1),this.wrapBlock(n,i(a),e,()=>this.render(u,e,a))}),this.inTightList=o}esc(e,n=!1){return e=e.replace(/[`*\\~\[\]_]/g,(i,r)=>i=="_"&&r>0&&r+1<e.length&&e[r-1].match(/\w/)&&e[r+1].match(/\w/)?i:"\\"+i),n&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let n=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return n[0]+e+n[1]}repeat(e,n){let i="";for(let r=0;r<n;r++)i+=e;return i}markString(e,n,i,r){let o=this.getMark(e.type.name),u=n?o.open:o.close;return typeof u=="string"?u:u(this,e,i,r)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}}const ag=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function lg(t,e){const n=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==94||e||i+2>=n)return!1;t.pos=i+1;let r=!1;for(;t.pos<n;){if(t.src.charCodeAt(t.pos)===94){r=!0;break}t.md.inline.skipToken(t)}if(!r||i+1===t.pos)return t.pos=i,!1;const o=t.src.slice(i+1,t.pos);if(o.match(/(^|[^\\])(\\\\)*\s/))return t.pos=i,!1;t.posMax=t.pos,t.pos=i+1;const u=t.push("sup_open","sup",1);u.markup="^";const s=t.push("text","",0);s.content=o.replace(ag,"$1");const a=t.push("sup_close","sup",-1);return a.markup="^",t.pos=t.posMax+1,t.posMax=n,!0}function cg(t){t.inline.ruler.after("emphasis","sup",lg)}var fg=(t="")=>new Ct({props:{decorations:e=>{const n=[],i=(r,o)=>{e.doc.content.size===2&&n.push(Ae.node(o,o+r.nodeSize,{class:"empty-node","data-placeholder":t}))};return e.doc.descendants(i),ne.create(e.doc,n)}}});const Nn=(t,e)=>{const{from:n,to:i,empty:r}=t.selection;if(r)return!!e.isInSet(t.tr.storedMarks||t.selection.$from.marks());let o=!1;return t.doc.nodesBetween(n,i,u=>{o=o||e.isInSet(u.marks)}),o},ur=(t,e)=>{const{code:n}=t.schema.marks,i=e>=0&&t.doc.nodeAt(e);return i?!!i.marks.filter(r=>r.type===n).length:!1},dg=(t,e,n)=>{const{doc:i,schema:{marks:r}}=t;let o=!1;const u=s=>s.type===r.code||s.type===r.link;return i.nodesBetween(e,n,s=>{o=o||s.marks.filter(u).length>0}),o},hg=(t,e,n)=>{const{doc:i,schema:{marks:r}}=t;let o=!1;const u=s=>s.type===r.code;return i.nodesBetween(e,n,s=>{o=o||s.marks.filter(u).length>0}),o};function so(t,e=!1){const n=t.handler;return t.handler=(i,r,o,u)=>{const s=e?dg(i,o,u):hg(i,o,u);if(!(i.selection.$from.parent.type.spec.code||s))return n(i,r,o,u)},t}const _e=(t,e,n=!1)=>so(new ot(t,e),n),Ln="";function fl(t){const e=n=>n.isText?!!n.textContent.trim():n.type.name!=="hardBreak";if(t.isInline)return e(t);if(t.isBlock&&(t.isLeaf||t.isAtom))return!0;if(!t.childCount)return!1;for(let n=0;n<t.childCount;n++){const i=t.child(n);if(fl(i))return!0}return!1}function Hu(t){return!t||t.type.name==="paragraph"&&!t.textContent&&!t.childCount}function mg(t){if(t&&t.textContent)return!1;if(!t||!t.childCount||t.childCount===1&&Hu(t.firstChild))return!0;const e=[],n=[];return t.forEach(i=>{i.isInline?n.push(i):e.push(i)}),!n.length&&!e.filter(i=>!!i.childCount&&!(i.childCount===1&&Hu(i.firstChild))||i.isAtom).length}const pg=(...t)=>e=>t.reduceRight((n,i)=>i(n),e);function gg(t){return t.content}function dl(t,e,n){const i=[];for(let r=0,o=t.childCount;r<o;r++){const u=t.child(r),s=u.isLeaf?e(u,n,r):e(u.copy(dl(u.content,e,u)),n,r);s&&(s?i.push(...gg(s)):Array.isArray(s)?i.push(...s):i.push(s))}return T.fromArray(i)}function _g(t,e){const n=dl(t.content,e);return new F(n,t.openStart,t.openEnd)}function bg(t){const{selection:e,doc:n}=t;return n.nodeSize-e.$to.pos-2===e.$to.depth}function yg(t){const{selection:e}=t;return e instanceof K&&!e.empty?!0:!bg(t)}function kg(t){const{selection:e}=t;return e.$from.pos===e.$from.depth}function xg(t){const{selection:e}=t;return e instanceof K&&!e.empty?!0:!kg(t)}const wg=3;function hl(t,e){return Ta(t,e,{},(n,i)=>i.type===e)}const ml=(t,e,n,i,r)=>{const{hardBreak:o}=t.schema.nodes;if(t.doc.resolve(i).nodeAfter.type!==o||t.doc.resolve(i).depth>1)return null;let u=t.tr.delete(i,r).split(i),s=u.doc.nodeAt(i+1);u.doc.nodesBetween(i,i+s.nodeSize,(f,d)=>{f.type===o&&(u=u.split(d+1).delete(d,d+1))});const{list_item:a}=t.schema.nodes,l=u.doc.resolve(i+2);let c=l.blockRange(l);return u=u.wrap(c,[{type:e},{type:a}]),u};function jg(t){const e=hl(/^\s*([\*\-]) $/,t.nodes.bullet_list),n=_e(new RegExp(`${Ln}\\s*([\\*\\-]) $`),(i,r,o,u)=>ml(i,t.nodes.bullet_list,"bullet",o,u),!0);return[e,n]}function Cg(t){const e=hl(/^(1)[\.\)] $/,t.nodes.ordered_list),n=_e(new RegExp(`${Ln}(1)[\\.\\)] $`),(i,r,o,u)=>ml(i,t.nodes.ordered_list,"numbered",o,u),!0);return[e,n]}function vg(t){const e=[];if(t.nodes.bullet_list&&e.push(...jg(t)),t.nodes.ordered_list&&e.push(...Cg(t)),e.length!==0)return tn({rules:e})}const pl=t=>{const{$from:e}=t.selection,{list_item:n,paragraph:i}=t.schema.nodes;return Ia(n)(t.selection)&&e.parent.type===i},gl=(t,e)=>{const{bullet_list:n,ordered_list:i}=e;let r=0;for(let o=t.depth-1;o>0;o--){const u=t.node(o);(u.type===n||u.type===i)&&(r+=1)}return r};function Dg(t,e){return n=>(i,r)=>n(i,o=>{const u=i.doc.resolve(e.start),s=i.doc.resolve(e.end),a=o.doc.resolve(o.mapping.map(e.end-1));a.nodeBefore&&a.nodeAfter&&a.nodeBefore.type===a.nodeAfter.type&&s.nodeAfter&&s.nodeAfter.type===t&&s.parent.type===u.parent.type&&o.join(a.pos),r&&r(o.scrollIntoView())})}function _l(){return function(t,e){const{list_item:n}=t.schema.nodes,{$from:i,$to:r}=t.selection;if(pl(t)){let o=i.blockRange(r,u=>u.childCount>0&&u.firstChild.type===n);return o?pg(Dg(n,o),mm)(n)(t,e):!1}return!1}}function bl(t){return function(e,n){const i=e.selection,r=i.$from,o=i.$to,u=i.node;if(u&&u.isBlock||r.depth<2||!r.sameParent(o))return!1;const s=r.node(-1);if(s.type!==t)return!1;if(s.content.content.length<=1&&r.parent.content.size===0&&s.content.size!==0){if(r.depth===2||r.node(-3).type!==t||r.index(-2)!==r.node(-2).childCount-1)return!1;if(n){let f=T.empty;const d=r.index(-1)>0;for(let h=r.depth-(d?1:2);h>=r.depth-3;h--)f=T.from(r.node(h).copy(f));f=f.append(T.from(t.createAndFill()));const g=e.tr.replace(r.before(d?void 0:-1),r.after(-3),new F(f,d?3:2,2));g.setSelection(e.selection.constructor.near(g.doc.resolve(r.pos+(d?3:2)))),n(g.scrollIntoView())}return!0}const a=o.pos===r.end()?s.contentMatchAt(0).defaultType:void 0,l=e.tr.delete(r.pos,o.pos),c=a&&[void 0,{type:a}];return n&&n(l.split(r.pos,2,c).scrollIntoView()),!0}}const Sg=(t,e)=>{const{selection:n}=t;if(n.empty){const{$from:i}=n,{list_item:r}=t.schema.nodes,o=i.node(i.depth),u=i.node(i.depth-1);if(u&&u.type===r){const s=fl(u);return mg(o)&&!s?_l()(t,e):bl(r)(t,e)}}return!1};function Eg(t,e){let n,i=e.tr.selection.$to.pos;do{const r=e.doc.resolve(i);if(n=gl(r,e.schema.nodes),n>wg)return!1;i++}while(n>=t);return!0}function Ag(){return function(t,e){const{list_item:n}=t.schema.nodes;if(pl(t)){const i=gl(t.selection.$from,t.schema.nodes);return Eg(i,t)&&_m(n)(t,e),!0}return!1}}const Mi=new Xl(void 0,{fuzzyLink:!1});Mi.add("sourcetree:","http:");const yl="app|biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|"),Mg="a[cdefgilmnoqrtuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrtuvwxyz]|n[acefgilopruz]|om|p[aefghkmnrtw]|qa|r[eosuw]|s[abcdegijklmnrtuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]";yl.push(Mg);Mi.tlds(yl,!1);function Og(t){return _e(t,(e,n,i,r)=>{const{schema:o}=e;if(e.doc.rangeHasMark(i,r,o.marks.link))return null;const[u]=n,s=kl(u.url),a=o.mark("link",{href:s});return e.tr.addMark(i-(u.input.length-u.lastIndex),r-(u.input.length-u.lastIndex),a).insertText(" ")})}class Tg{exec(e){if(e.endsWith(" ")){const n=e.slice(0,e.length-1).split(" "),i=n[n.length-1],r=Mi.match(i);if(r&&r.length>0){const o=r[r.length-1];return o.input=i,o.length=o.lastIndex-o.index+1,[o]}}return null}}const Ng=[/^https?:\/\//im,/^ftps?:\/\//im,/^\//im,/^mailto:/im,/^skype:/im,/^callto:/im,/^facetime:/im,/^git:/im,/^irc6?:/im,/^news:/im,/^nntp:/im,/^feed:/im,/^cvs:/im,/^svn:/im,/^mvn:/im,/^ssh:/im,/^scp:\/\//im,/^sftp:\/\//im,/^itms:/im,/^notes:/im,/^hipchat:\/\//im,/^sourcetree:/im,/^urn:/im,/^tel:/im,/^xmpp:/im,/^telnet:/im,/^vnc:/im,/^rdp:/im,/^whatsapp:/im,/^slack:/im,/^sips?:/im,/^magnet:/im],Fg=t=>Ng.some(e=>e.test(t.trim())===!0);function Ig(t){const e=t&&Mi.match(t);return e&&e[0]}function kl(t){if(!t)return"";if(Fg(t))return t;const e=Ig(t);return e&&e.url||""}function Rg(t){if(!t.marks.link)return;const e=Og(new Tg),n=_e(/(^|[^!])\[(.*?)\]\((\S+)\)$/,(i,r,o,u)=>{const{schema:s}=i,[,a,l,c]=r,f=kl(c),d=s.mark("link",{href:f});return i.tr.replaceWith(o+a.length,u,s.text(l,[d]))});return tn({rules:[e,n]})}const Bg=(t,e,n,i,r)=>(r.doc.nodesBetween(r.mapping.map(t),r.mapping.map(e),(o,u)=>{if(!o.isText)return!0;const s=Math.max(u,r.mapping.map(t)),a=Math.min(u+o.nodeSize,r.mapping.map(e));return r.addMark(s,a,i),!0}),r),zg=()=>(t,e)=>{const{code:n}=t.schema.marks,{empty:i,$cursor:r}=t.selection;if(!i||!r)return!1;const{storedMarks:o}=t.tr;if(n){const u=Nn(t,n.create()),s=t.doc.rangeHasMark(r.pos,r.pos,n),a=t.doc.rangeHasMark(r.pos,r.pos+1,n),l=!s&&!a&&(!o||!!o.length),c=!s&&a&&(!o||!o.length);if(!u&&c)return e&&e(t.tr.addStoredMark(n.create())),!0;if(u&&l)return e&&e(t.tr.removeStoredMark(n)),!0}return!1},Pg=()=>(t,e)=>{const{code:n}=t.schema.marks,{empty:i,$cursor:r}=t.selection;if(!i||!r)return!1;const{storedMarks:o}=t.tr;if(n){const u=n&&Nn(t,n.create()),s=ur(t,r.pos),a=ur(t,r.pos-1),l=ur(t,r.pos-2),c=s&&!a&&Array.isArray(o),f=a&&!l&&(o===null||Array.isArray(o)&&!!o.length),d=(c&&Array.isArray(o)&&!o.length||!c&&o===null)&&!a&&l,g=!s&&a&&Array.isArray(o)&&!o.length;if(!u&&d){const w=t.tr.setSelection(U.near(t.doc.resolve(r.pos-1)));return e&&e(w.removeStoredMark(n)),!0}if(!u&&g)return e&&e(t.tr.addStoredMark(n.create())),!0;if(u&&f){const w=t.tr.setSelection(U.near(t.doc.resolve(r.pos-1)));return e&&e(w.addStoredMark(n.create())),!0}const h=r.index(r.depth-1)===0;if(u&&(c||!r.nodeBefore&&h))return e&&e(t.tr.removeStoredMark(n)),!0}return!1},ao=(t,e,n,i,r,o)=>{const{hard_break:u,code_block:s,list_item:a}=t.schema.nodes,l=t.doc.resolve(i);if(l.nodeAfter.type!==u||l.depth>1&&!(e===s&&Ia(a)(t.selection)))return null;let c=t.tr.delete(i,r).split(i),f=c.doc.nodeAt(i+1),d=!1;c.doc.nodesBetween(i,i+f.nodeSize,(N,I)=>{!d&&N.type===u&&(d=!0,c=c.split(I+1).delete(I,I+1))}),d&&(f=c.doc.nodeAt(i+1));const{blockquote:g,paragraph:h}=t.schema.nodes;let w,v;e===g?(v=3,w=[h.create({},f.content)]):(v=2,w=f.content);const M=e.create(o,w);return c=c.setSelection(new q(c.doc.resolve(i+1))).replaceSelectionWith(M).setSelection(new K(c.doc.resolve(i+v))),c};function Lg(t,e){if(!t.selection.empty)return t.tr;const n=t.schema.nodes.code_block,i=t.selection.$from,r=i.before(),o=i.end(),u=_g(t.doc.slice(i.pos,o),l=>l.type===t.schema.nodes.hard_break?t.schema.text(`
`):l.isText?l.mark([]):l.isInline?l.attrs.text?t.schema.text(l.attrs.text):null:l.content.childCount?l.content:null),s=t.tr.replaceRange(i.pos,o,u);if(i.parentOffset>=3)return s.split(i.pos,void 0,[{type:n,attrs:e}]);const a=[];return s.setNodeMarkup(r,n,e,a)}function qg(t){if(!t.selection)return!1;const{$from:e}=t.selection,n=e.parent;if(!n.isTextblock||n.type===t.schema.nodes.code_block)return!1;const i=e.depth-1,r=e.node(i),o=e.index(i);return r.canReplaceWith(o,o+1,t.schema.nodes.code_block)}const $g=(t,e)=>{const{$cursor:n}=t.selection;if(n&&!n.nodeBefore&&!n.nodeAfter&&n.pos===1){const{tr:i,schema:r}=t,{paragraph:o}=r.nodes,{parent:u}=n;return i.setNodeMarkup(0,o,u.attrs,[]),e&&e(i),!0}return!1};function xl(t){const{selection:{$from:e}}=t,n=e.node(e.depth),i=!!n&&n.type===t.schema.nodes.code_block,r=t.selection instanceof q;return e.depth>1||r||i}const Vg=(t,e)=>!yg(t)&&xl(t)?(wl(!0)(t,e),!0):!1,Hg=(t,e)=>!xg(t)&&xl(t)?(wl(!1)(t,e),!0):!1;function Ug(t){const e=t.selection.$from.node(1);return e.isTextblock&&e.type!==t.schema.nodes.code_block&&e.nodeSize===2}function Wg(t,e){const{$from:n,$to:i}=t.selection;let r;return e?r=i.end(0):r=n.start(0),r}function Jg(t,e){const{$from:n,$to:i}=t.selection;let r;return e?(r=i.end(i.depth),r=i.depth>0?r+1:r):(r=n.start(n.depth),r=n.depth>0?r-1:r),r}function wl(t=!0){return function(e,n){const i=e.schema.nodes.paragraph;if(!i)return!1;let r;if(e.selection instanceof K){if(Ug(e))return!1;r=Wg(e,t)}else r=Jg(e,t);const o=e.tr.insert(r,i.createAndFill());return o.setSelection(K.create(o.doc,r+1)),n&&n(o),!0}}const Kg=6;function Zg(t){return{level:t[1].length}}function Gg(t,e){return em(new RegExp("^(#{1,"+e+"})\\s$"),t,Zg)}function Xg(t){return Ta(/^\s*>\s$/,t)}function Yg(t){const e=so(Gg(t.nodes.heading,Kg),!0),n=_e(new RegExp(`${Ln}(#{1,6})\\s$`),(i,r,o,u)=>{const s=r[1].length;return ao(i,t.nodes.heading,`heading${s}`,o,u,{level:s})},!0);return[e,n]}function Qg(t){const e=so(Xg(t.nodes.blockquote),!0),n=_e(new RegExp(`${Ln}\\s*>\\s$`),(i,r,o,u)=>ao(i,t.nodes.blockquote,"blockquote",o,u),!0);return[e,n]}function e1(t){const e=_e(/((^`{3,})|(\s`{3,}))(\S*)$/,(i,r,o,u)=>{const s={};r[4]&&(s.language=r[4]);const a=r[0][0]===" "?o+1:o;if(qg(i))return Lg(i,s).delete(a,u).scrollIntoView();let{tr:l}=i;l=l.delete(a,u);const c=i.schema.nodes.code_block.createChecked();return Er(c)(l)},!0),n=_e(new RegExp(`((${Ln}\`{3,})|(\\s\`{3,}))(\\S*)$`),(i,r,o,u)=>{const s={};return r[4]&&(s.language=r[4]),ao(i,t.nodes.code_block,"codeblock",o,u,s)},!0);return[e,n]}function t1(t){const e=[];if(t.nodes.heading&&e.push(...Yg(t)),t.nodes.blockquote&&e.push(...Qg(t)),t.nodes.code_block&&e.push(...e1(t)),e.length!==0)return tn({rules:e})}function n1(t){return _e(/^(?:---|___|\*\*\*)\s$/,(e,n,i,r)=>{if(!n[0])return null;let o=e.tr.delete(i,r);const u=i;return o=Er(t.create(),u)(o),o=Er(e.schema.nodes.paragraph.create(),o.mapping.map(u+1))(o),o})}function i1(t){if(!t.nodes.horizontal_rule)return tn({rules:[]});const e=n1(t.nodes.horizontal_rule);return tn({rules:[e]})}const sr=typeof navigator<"u"?/Mac/.test(navigator.platform):!1;function r1(t){let e=zh;function n(u,s){e[u]=s}n("Mod-z",ht(xu,li)),n("Shift-Mod-z",Cn);const i=ht(xu,$g,Gr,ka,xa);if(n("Backspace",i),n("Mod-Backspace",i),sr||n("Mod-y",Cn),n("Alt-ArrowUp",Sh),n("Alt-ArrowDown",Eh),n("Escape",Mh),n("ArrowLeft",Pg()),n("ArrowRight",zg()),n("ArrowDown",Vg),n("ArrowUp",Hg),t.marks.strong&&(n("Mod-b",dt(t.marks.strong)),n("Mod-B",dt(t.marks.strong))),t.marks.em&&(n("Mod-i",dt(t.marks.em)),n("Mod-I",dt(t.marks.em))),t.marks.superscript&&n("Shift-Mod-.",dt(t.marks.superscript)),t.nodes.hard_break){let u=t.nodes.hard_break,s=ht(va,(a,l)=>(l(a.tr.insertText(" ").replaceSelectionWith(u.create()).scrollIntoView()),!0));n("Mod-Enter",s),n("Shift-Enter",s),sr&&n("Ctrl-Enter",s)}const r=sr?"Mod-Enter":"Ctrl-Enter",o=[Ca,Da,Sa,Ea];return t.nodes.list_item&&(o.unshift(Sg),o.unshift(bl(t.nodes.list_item)),n("Tab",Ag()),n("Shift-Tab",_l())),n("Enter",ht.apply(null,o)),n(r,ht.apply(null,o)),Bf(e)}const Uu={"**":["_","~~","^"],"*":["__","~~","^"],"^":["*","_"],__:["*","~~","^"],_:["**","~~","^"],"~~":["__","_","**","*","^"]},jl=(t,e)=>{for(let n=0;n<Uu[t].length;n++){const i=Uu[t][n];if(i===e)return!0;const r=e.length-i.length;if(e.substr(r,e.length)===i)return jl(i,e.substr(0,r))}return!1};function on(t,e,n,i){return(r,o,u,s)=>{const[,a,l]=o,c=s,f=l?u+a.length:u,d=r.doc.resolve(u+a.length).nodeBefore;if(a&&a.length>0&&!jl(i,a)&&!(d&&d.type===r.schema.nodes.hard_break)||r.schema.marks.code&&r.schema.marks.code.isInSet(r.doc.resolve(f+1).marks()))return null;let g;if(r.doc.nodesBetween(f,c,w=>w.type===e.nodes.hard_break?(g=!0,!1):!g),g||r.doc.resolve(f).sameParent(r.doc.resolve(c))&&!r.doc.resolve(f).parent.type.allowsMarkType(t))return null;let h=r.tr.addMark(f,c,t.create());return n>1&&(h=h.delete(c-(n-1),c)),h.delete(f,f+n).removeStoredMark(t)}}function o1(t,e){return(n,i,r,o)=>{if(i[1]&&i[1].length>0&&[c=>c==="(",c=>{const f=n.doc.resolve(r+c.length).nodeBefore;return f&&f.type===n.schema.nodes.hard_break||!1}].every(c=>!c(i[1]))||n.doc.resolve(r).sameParent(n.doc.resolve(o))&&!n.doc.resolve(r).parent.type.allowsMarkType(t))return null;let u=n.tr;n.selection.from!==n.selection.to&&(u.delete(n.selection.from,n.selection.to),o-=n.selection.to-n.selection.from);const s=o-i[2].length+1,a=n.schema.marks.code.create();return Bg(s,o,!1,a,u).setStoredMarks([a]).delete(s,s+e.length).removeStoredMark(t)}}const u1=/(\S*)(\_\_([^\_\s](\_(?!\_)|[^\_])*[^\_\s]|[^\_\s])\_\_)$/,s1=/(\S*)(\*\*([^\*\s](\*(?!\*)|[^\*])*[^\*\s]|[^\*\s])\*\*)$/,a1=/(\S*[^\s\_]*)(\_([^\s\_][^\_]*[^\s\_]|[^\s\_])\_)$/,l1=/(\S*[^\s\*]*)(\*([^\s\*][^\*]*[^\s\*]|[^\s\*])\*)$/,c1=/(\S*)(\~\~([^\s\~](\~(?!\~)|[^\~])*[^\s\~]|[^\s\~])\~\~)$/,f1=/(\S*)(`[^\s][^`]*`)$/,d1=/(\S*[^\s^]*)(\^([^\s^][^^]*[^\s^]|[^\s^])\^)$/;function h1(t){const n=_e(u1,on(t.marks.strong,t,2,"__")),i=_e(s1,on(t.marks.strong,t,2,"**"));return[n,i]}function m1(t){const n=_e(a1,on(t.marks.em,t,1,"_")),i=_e(l1,on(t.marks.em,t,1,"*"));return[n,i]}function p1(t){return[_e(c1,on(t.marks.strike,t,2,"~~"))]}function g1(t){return[_e(d1,on(t.marks.superscript,t,1,"^"))]}function _1(t){return[_e(f1,o1(t.marks.code,"`"))]}function b1(t){const e=[];if(t.marks.strong&&e.push(...h1(t)),t.marks.em&&e.push(...m1(t)),t.marks.superscript&&e.push(...g1(t)),t.marks.strike&&e.push(...p1(t)),t.marks.code&&e.push(..._1(t)),e.length!==0)return tn({rules:e})}const Jn="ProseMirror-prompt";function y1(t,e){let n=t.parentNode,i=n.appendChild(document.createElement("div"));i.style.left=t.offsetLeft+t.offsetWidth+2+"px",i.style.top=t.offsetTop-5+"px",i.className="ProseMirror-invalid",i.textContent=e,setTimeout(()=>n.removeChild(i),1500)}function k1(t,e){return Object.keys(t).filter((i,r)=>{let o=t[i],u=e[r],s=o.read(u),a=o.validate(s);return a&&y1(u,a),!a}).reduce((i,r,o)=>{let u=t[r],s=e[o],a=u.read(s);return i[r]=u.clean(a),i},{})}function x1(t){let e=document.body.appendChild(document.createElement("div"));e.className=Jn;const n=()=>{window.removeEventListener("mousedown",i),e.parentNode&&e.parentNode.removeChild(e)};let i=d=>{e.contains(d.target)||n()};setTimeout(()=>window.addEventListener("mousedown",i),50);let r=[];Object.values(t.fields).map(d=>r.push(d.render()));let o=document.createElement("button");o.type="submit",o.className="button tiny button--save-link "+Jn+"-submit",o.textContent="Create Link";let u=document.createElement("button");u.type="button",u.className="button tiny hollow secondary"+Jn+"-cancel",u.textContent="Cancel",u.addEventListener("click",n);let s=e.appendChild(document.createElement("form"));if(t.title){const d=document.createElement("h5");d.className="sub-block-title",s.appendChild(d).textContent=t.title}r.forEach(d=>{s.appendChild(document.createElement("div")).appendChild(d)});let a=s.appendChild(document.createElement("div"));a.className=Jn+"-buttons",a.appendChild(o),a.appendChild(document.createTextNode(" ")),a.appendChild(u);let l=e.getBoundingClientRect();e.style.top=(window.innerHeight-l.height)/2+"px",e.style.left=(window.innerWidth-l.width)/2+"px";let c=()=>{let d=k1(t.fields,r);d&&(n(),t.callback(d))};s.addEventListener("submit",d=>{d.preventDefault(),c()}),s.addEventListener("keydown",d=>{d.key==="Esc"?(d.preventDefault(),n()):d.key==="Enter"&&!(d.ctrlKey||d.metaKey||d.shiftKey)?(d.preventDefault(),c()):d.key==="Tab"&&window.setTimeout(()=>{e.contains(document.activeElement)||n()},500)});let f=s.elements[0];f&&f.focus()}class w1{constructor(e){this.options=e}read(e){return e.value}validateType(){}validate(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)}clean(e){return this.options.clean?this.options.clean(e):e}}class j1 extends w1{render(){let e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.className=this.options.class,e.value=this.options.value||"",e.autocomplete="off",e}}const Cl=(t,e)=>{const n={label:e.title,run:t};return Object.keys(e).reduce((i,r)=>(i[r]=e[r],i),n),(!e.enable||e.enable===!0)&&!e.select&&(n[e.enable?"enable":"select"]=i=>t(i)),new en(n)},ar=(t,e)=>{const n={active(i){return Nn(i,t)},enable:!0};return Object.keys(e).reduce((i,r)=>(i[r]=e[r],i),n),Cl(dt(t),n)},Nr=(t,e,n)=>{const{$from:i}=t.selection;let r,o=i.depth;for(;o>0;){const u=i.node(o);({...n},u.attrs.level&&u.attrs.level);const s=e.name===u.type.name,a=Object.keys(n).reduce((l,c)=>n[c]!==u.attrs[c]?!1:l,!0);s&&a&&(r=o),o-=1}return r},Wu=(t,e)=>(n,i)=>{const o=Nr(n,t,e)?n.schema.nodes.paragraph:t;return Ih(o,e)(n,i)},Ne={width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",path:""},Fe={strong:{...Ne,path:"M6.935 4.44A1.5 1.5 0 0 1 7.996 4h4.383C15.017 4 17 6.182 17 8.625a4.63 4.63 0 0 1-.865 2.682c1.077.827 1.866 2.12 1.866 3.813C18 18.232 15.3 20 13.12 20H8a1.5 1.5 0 0 1-1.5-1.5l-.004-13c0-.397.158-.779.44-1.06ZM9.5 10.25h2.88c.903 0 1.62-.76 1.62-1.625S13.281 7 12.38 7H9.498l.002 3.25Zm0 3V17h3.62c.874 0 1.88-.754 1.88-1.88 0-1.13-.974-1.87-1.88-1.87H9.5Z"},em:{...Ne,path:"M9.75 4h8.504a.75.75 0 0 1 .102 1.493l-.102.006h-3.197L10.037 18.5h4.213a.75.75 0 0 1 .742.648l.007.102a.75.75 0 0 1-.648.743L14.25 20h-9.5a.747.747 0 0 1-.746-.75c0-.38.28-.694.645-.743l.101-.007h3.685l.021-.065L13.45 5.499h-3.7a.75.75 0 0 1-.742-.648L9 4.75a.75.75 0 0 1 .648-.743L9.751 4h8.503-8.503Z"},code:{...Ne,path:"m8.066 18.943 6.5-14.5a.75.75 0 0 1 1.404.518l-.036.096-6.5 14.5a.75.75 0 0 1-1.404-.518l.036-.096 6.5-14.5-6.5 14.5ZM2.22 11.47l4.25-4.25a.75.75 0 0 1 1.133.976l-.073.085L3.81 12l3.72 3.719a.75.75 0 0 1-.976 1.133l-.084-.073-4.25-4.25a.75.75 0 0 1-.073-.976l.073-.084 4.25-4.25-4.25 4.25Zm14.25-4.25a.75.75 0 0 1 .976-.073l.084.073 4.25 4.25a.75.75 0 0 1 .073.976l-.073.085-4.25 4.25a.75.75 0 0 1-1.133-.977l.073-.084L20.19 12l-3.72-3.72a.75.75 0 0 1 0-1.06Z"},link:{...Ne,path:"M9.25 7a.75.75 0 0 1 .11 1.492l-.11.008H7a3.5 3.5 0 0 0-.206 6.994L7 15.5h2.25a.75.75 0 0 1 .11 1.492L9.25 17H7a5 5 0 0 1-.25-9.994L7 7h2.25ZM17 7a5 5 0 0 1 .25 9.994L17 17h-2.25a.75.75 0 0 1-.11-1.492l.11-.008H17a3.5 3.5 0 0 0 .206-6.994L17 8.5h-2.25a.75.75 0 0 1-.11-1.492L14.75 7H17ZM7 11.25h10a.75.75 0 0 1 .102 1.493L17 12.75H7a.75.75 0 0 1-.102-1.493L7 11.25h10H7Z"},undo:{...Ne,path:"M4.75 2a.75.75 0 0 1 .743.648l.007.102v5.69l4.574-4.56a6.41 6.41 0 0 1 8.879-.179l.186.18a6.41 6.41 0 0 1 0 9.063l-8.846 8.84a.75.75 0 0 1-1.06-1.062l8.845-8.838a4.91 4.91 0 0 0-6.766-7.112l-.178.17L6.562 9.5h5.688a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743L12.25 11h-7.5a.75.75 0 0 1-.743-.648L4 10.25v-7.5A.75.75 0 0 1 4.75 2Z"},redo:{...Ne,path:"M19.25 2a.75.75 0 0 0-.743.648l-.007.102v5.69l-4.574-4.56a6.41 6.41 0 0 0-8.878-.179l-.186.18a6.41 6.41 0 0 0 0 9.063l8.845 8.84a.75.75 0 0 0 1.06-1.062l-8.845-8.838a4.91 4.91 0 0 1 6.766-7.112l.178.17L17.438 9.5H11.75a.75.75 0 0 0-.743.648L11 10.25c0 .38.282.694.648.743l.102.007h7.5a.75.75 0 0 0 .743-.648L20 10.25v-7.5a.75.75 0 0 0-.75-.75Z"},bulletList:{...Ne,path:"M3.25 17.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5Zm3.5.5h14.5a.75.75 0 0 1 .102 1.494l-.102.006H6.75a.75.75 0 0 1-.102-1.493L6.75 18h14.5-14.5Zm-3.5-7a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5Zm3.5.5h14.5a.75.75 0 0 1 .102 1.494L21.25 13H6.75a.75.75 0 0 1-.102-1.493l.102-.007h14.5-14.5Zm-3.5-7A1.25 1.25 0 1 1 3.25 7a1.25 1.25 0 0 1 0-2.499Zm3.5.5h14.5a.75.75 0 0 1 .102 1.494l-.102.006H6.75a.75.75 0 0 1-.102-1.493L6.75 5h14.5-14.5Z"},orderedList:{...Ne,path:"M6 2.75a.75.75 0 0 0-1.434-.307l-.002.003a1.45 1.45 0 0 1-.067.132 4.126 4.126 0 0 1-.238.384c-.217.313-.524.663-.906.902a.75.75 0 1 0 .794 1.272c.125-.078.243-.161.353-.248V7.25a.75.75 0 0 0 1.5 0v-4.5ZM20.5 18.75a.75.75 0 0 0-.75-.75h-9a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 .75-.75ZM20.5 12.244a.75.75 0 0 0-.75-.75h-9a.75.75 0 1 0 0 1.5h9a.75.75 0 0 0 .75-.75ZM20.5 5.75a.75.75 0 0 0-.75-.75h-9a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 .75-.75ZM5.15 10.52c-.3-.053-.676.066-.87.26a.75.75 0 1 1-1.06-1.06c.556-.556 1.43-.812 2.192-.677.397.07.805.254 1.115.605.316.358.473.825.473 1.352 0 .62-.271 1.08-.606 1.42-.278.283-.63.511-.906.689l-.08.051a5.88 5.88 0 0 0-.481.34H6.25a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75c0-1.314.984-1.953 1.575-2.337l.06-.04c.318-.205.533-.345.69-.504.134-.136.175-.238.175-.369 0-.223-.061-.318-.098-.36a.42.42 0 0 0-.251-.12ZM2.97 21.28s.093.084.004.005l.006.005.013.013a1.426 1.426 0 0 0 .15.125c.095.07.227.158.397.243.341.17.83.329 1.46.329.64 0 1.196-.181 1.601-.54.408-.36.61-.857.595-1.359A1.775 1.775 0 0 0 6.77 19c.259-.305.412-.685.426-1.101a1.73 1.73 0 0 0-.595-1.36C6.196 16.181 5.64 16 5 16c-.63 0-1.119.158-1.46.33a2.592 2.592 0 0 0-.51.334 1.426 1.426 0 0 0-.037.033l-.013.013-.006.005-.002.003H2.97l-.001.002a.75.75 0 0 0 1.048 1.072 1.1 1.1 0 0 1 .192-.121c.159-.08.42-.171.79-.171.36 0 .536.1.608.164.07.061.09.127.088.187a.325.325 0 0 1-.123.23c-.089.077-.263.169-.573.169a.75.75 0 0 0 0 1.5c.31 0 .484.092.573.168.091.08.121.166.123.231a.232.232 0 0 1-.088.187c-.072.064-.247.164-.608.164a1.75 1.75 0 0 1-.79-.17 1.1 1.1 0 0 1-.192-.122.75.75 0 0 0-1.048 1.072Zm.002-4.563-.001.002c.007-.006.2-.168 0-.002Z"},h1:{...Ne,path:"M19.59 5.081a.746.746 0 0 0-.809.084.751.751 0 0 0-.249.367c-.69 2.051-2.057 3.409-3.168 4.075a.75.75 0 0 0 .772 1.286c.774-.464 1.623-1.18 2.364-2.146v9.503a.75.75 0 0 0 1.5 0V5.772a.75.75 0 0 0-.41-.69ZM3.5 5.75a.75.75 0 0 0-1.5 0v12.5a.75.75 0 0 0 1.5 0V12.5H10v5.75a.75.75 0 0 0 1.5 0V5.75a.75.75 0 0 0-1.5 0V11H3.5V5.75Z"},h2:{...Ne,path:"M4.5 5.75a.75.75 0 0 0-1.5 0v12.5a.75.75 0 0 0 1.5 0V12.5H11v5.75a.75.75 0 0 0 1.5 0V5.75a.75.75 0 0 0-1.5 0V11H4.5V5.75Zm10.921 2.085c.23-.46.913-1.335 2.58-1.335.842 0 1.459.26 1.86.639.397.376.64.921.64 1.611 0 1.963-1.3 3.068-2.958 4.343l-.212.163C15.825 14.409 14 15.806 14 18.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 0-1.5h-5.66c.315-1.252 1.427-2.11 2.866-3.218C20.05 13.057 22 11.537 22 8.75c0-1.06-.383-2.015-1.11-2.702C20.166 5.364 19.158 5 18 5c-2.333 0-3.484 1.291-3.92 2.165a.75.75 0 0 0 1.341.67Z"},h3:{...Ne,path:"M3.5 5.75a.75.75 0 0 0-1.5 0v12.5a.75.75 0 0 0 1.5 0V12.5H10v5.75a.75.75 0 0 0 1.5 0V5.75a.75.75 0 0 0-1.5 0V11H3.5V5.75Zm11.92 2.085c.23-.46.914-1.335 2.58-1.335.843 0 1.46.26 1.86.639.398.376.64.921.64 1.611 0 .606-.161 1.026-.384 1.332-.228.314-.555.554-.953.735-.816.37-1.802.433-2.383.433a.75.75 0 0 0 0 1.5c.581 0 1.567.063 2.383.433.398.18.725.42.953.735.223.306.384.726.384 1.332 0 1.086-.914 2.25-2.5 2.25-1.727 0-2.348-.76-2.553-1.276a.75.75 0 1 0-1.394.552C14.508 17.926 15.727 19 18 19c2.414 0 4-1.836 4-3.75 0-.894-.245-1.63-.67-2.214A3.679 3.679 0 0 0 20.144 12a3.679 3.679 0 0 0 1.186-1.036c.425-.584.67-1.32.67-2.214 0-1.06-.383-2.015-1.11-2.702C20.165 5.364 19.157 5 18 5c-2.334 0-3.484 1.291-3.92 2.165a.75.75 0 1 0 1.34.67Z"},image:{...Ne,path:"M18.75 4A3.25 3.25 0 0 1 22 7.25v11.5A3.25 3.25 0 0 1 18.75 22H7.25A3.25 3.25 0 0 1 4 18.75v-6.248c.474.198.977.34 1.5.422v5.826c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116l5.822 5.702c.067-.186.104-.386.104-.595V7.25a1.75 1.75 0 0 0-1.75-1.75h-5.826a6.457 6.457 0 0 0-.422-1.5h6.248Zm-6.191 10.644l-.084.07l-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686a.75.75 0 0 0-.966-.071ZM16.252 7.5a2.252 2.252 0 1 1 0 4.504a2.252 2.252 0 0 1 0-4.504ZM6.5 1a5.5 5.5 0 1 1 0 11a5.5 5.5 0 0 1 0-11Zm9.752 8a.752.752 0 1 0 0 1.504a.752.752 0 0 0 0-1.504ZM6.5 3l-.09.007a.5.5 0 0 0-.402.402L6 3.5V6H3.498l-.09.008a.5.5 0 0 0-.402.402l-.008.09l.008.09a.5.5 0 0 0 .402.402l.09.008H6v2.503l.008.09a.5.5 0 0 0 .402.402l.09.009l.09-.009a.5.5 0 0 0 .402-.402L7 9.503V7h2.505l.09-.008a.5.5 0 0 0 .402-.402l.008-.09l-.008-.09a.5.5 0 0 0-.403-.402L9.504 6H7V3.5l-.008-.09a.5.5 0 0 0-.402-.403L6.5 3Z"}},Ju=(t,e)=>Cl(dm(t,e.attrs),e),C1=(t,e)=>new en({title:"Upload image",icon:Fe.image,enable(){return!0},run(){return e(),!0}}),lr=(t,e)=>{const{level:n=1}=e;return new en({title:`Heading ${n}`,icon:e.icon,active(i){return Nr(i,t,{level:n})},enable(){return!0},run(i,r,o){return Nr(i,t,{level:n})?(Wu(t,{level:n})(i,r),!0):(Wu(t,{level:n})(o.state,o.dispatch),o.focus(),!1)}})},v1=t=>new en({title:"Add or remove link",icon:Fe.link,active(e){return Nn(e,t)},enable(e){return!e.selection.empty},run(e,n,i){return Nn(e,t)?(dt(t)(e,n),!0):(x1({title:"Create a link",fields:{href:new j1({label:"https://example.com",class:"small",required:!0})},callback(r){dt(t,r)(i.state,i.dispatch),i.focus()}}),!1)}}),D1=(t,{enabledMenuOptions:e=["strong","em","code","link","undo","redo","bulletList","orderedList"],onImageUpload:n=()=>{}})=>{const i={strong:ar(t.marks.strong,{title:"Toggle strong style",icon:Fe.strong}),em:ar(t.marks.em,{title:"Toggle emphasis",icon:Fe.em}),code:ar(t.marks.code,{title:"Toggle code font",icon:Fe.code}),link:v1(t.marks.link),bulletList:Ju(t.nodes.bullet_list,{title:"Wrap in bullet list",icon:Fe.bulletList}),orderedList:Ju(t.nodes.ordered_list,{title:"Wrap in ordered list",icon:Fe.orderedList}),undo:new en({title:"Undo last change",run:li,enable:r=>li(r),icon:Fe.undo}),redo:new en({title:"Redo last undone change",run:Cn,enable:r=>Cn(r),icon:Fe.redo}),h1:lr(t.nodes.heading,{level:1,icon:Fe.h1}),h2:lr(t.nodes.heading,{level:2,icon:Fe.h2}),h3:lr(t.nodes.heading,{level:3,icon:Fe.h3}),imageUpload:C1(t.nodes.image,n)};return[e.filter(r=>!!i[r]).map(r=>i[r])]};function vl(t,e){return Object.keys(e).reduce((n,i)=>{const r=e[i],o=r.block||r.node,u=r.mark;return(o&&t.nodes[o]||u&&t.marks[u])&&(n[i]=r),n},{})}const bi={nodes:{blockquote:"blockquote",paragraph:"paragraph",code_block:["code","fence"],list_item:"list"},marks:{em:"emphasis",superscript:"sup",strong:"text",link:["link","autolink","reference","linkify"],strike:"strikethrough",code:"backticks"}},Dl={blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},softbreak:{node:"hard_break"},hardbreak:{node:"hard_break"},code_block:{block:"code_block"},fence:{block:"code_block",attrs:t=>({language:t.info&&t.info.trim()||null})},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",attrs:t=>({order:+t.attrGet("order")||1})},image:{node:"image",getAttrs:t=>{const e=t.attrGet("src"),n=e.match(/cw_image_height=(\d+)px/);return{src:e,title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null,height:n?`${n[1]}px`:null}}}},Sl={em:{mark:"em"},sup:{mark:"superscript"},strong:{mark:"strong"},link:{mark:"link",attrs:t=>({href:t.attrGet("href"),title:t.attrGet("title")||null})},code_inline:{mark:"code"},s:{mark:"strike"}},Ku={nodes:{...bi.nodes},marks:{...bi.marks}},S1={...Dl,...Sl,mention:{node:"mention",getAttrs:({mention:t})=>{const{userId:e,userFullName:n}=t;return{userId:e,userFullName:n}}}},lo=Yu("commonmark",{html:!1,linkify:!1});lo.enable(["entity","escape"]);lo.disable(["table","hr","heading","lheading"],!0);class El{constructor(e,n=lo){["nodes","marks"].forEach(i=>{for(const r in Ku[i])e[i][r]&&n.enable(Ku[i][r])}),this.markdownParser=new uo(e,n,vl(e,S1))}encode(e){throw new Error("This is not implemented yet")}parse(e){return this.markdownParser.parse(e)}}const Zu={nodes:{...bi.nodes,rule:"hr",heading:["heading"],image:"image"},marks:{...bi.marks}},E1={...Dl,...Sl,hr:{node:"horizontal_rule"},heading:{block:"heading",attrs:t=>({level:+t.tag.slice(1)})},mention:{node:"mention",getAttrs:({mention:t})=>{const{userId:e,userFullName:n}=t;return{userId:e,userFullName:n}}}},Al=Yu("commonmark",{html:!1,linkify:!0,breaks:!0}).use(cg);Al.enable(["entity","escape","hr"]);class Q1{constructor(e,n=Al){["nodes","marks"].forEach(i=>{for(const r in Zu[i])e[i][r]&&n.enable(Zu[i][r])}),this.markdownParser=new uo(e,n,vl(e,E1))}encode(e){throw new Error("This is not implemented yet")}parse(e){return this.markdownParser.parse(e)}}const A1=(t,e)=>{const n=t.esc(`mention://user/${e.attrs.userId}/${encodeURIComponent(e.attrs.userFullName)}`),i=t.esc("@"+(e.attrs.userFullName||""));t.write(`[${i}](${n})`)},Ml=(t,e)=>{t.wrapBlock("> ",null,e,()=>t.renderContent(e))},Ol=(t,e)=>{t.write("```"+(e.attrs.params||"")+`
`),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},M1=(t,e)=>{t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},O1=(t,e)=>{t.write(e.attrs.markup||"---"),t.closeBlock(e)},Tl=(t,e)=>{t.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},Nl=(t,e)=>{let n=e.attrs.order||1,i=String(n+e.childCount-1).length,r=t.repeat(" ",i+2);t.renderList(e,r,o=>{let u=String(n+o);return t.repeat(" ",i-u.length)+u+". "})},Fl=(t,e)=>{t.renderContent(e)},Il=(t,e)=>{t.renderInline(e),t.closeBlock(e)},Rl=(t,e)=>{let n=t.esc(e.attrs.src);if(e.attrs.height){const i=`cw_image_height=${e.attrs.height}`;n.includes("?")?n=n.includes("cw_image_height=")?n.replace(/cw_image_height=[^&]+/,i):`${n}&${i}`:n+=`?${i}`}t.write("!["+t.esc(e.attrs.alt||"")+"]("+n+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")")},Bl=(t,e,n,i)=>{for(let r=i+1;r<n.childCount;r++)if(n.child(r).type!==e.type){t.write(`  
`);return}},zl=(t,e)=>{t.text(e.text,!1)},Pl={open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},T1={open:"^",close:"^",mixable:!1,escape:!1,expelEnclosingWhitespace:!1},Ll={open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},ql={open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},$l={open(t,e,n,i){return Xu(e,n,i,1)?"<":"["},close(t,e,n,i){return Xu(e,n,i,-1)?">":"]("+t.esc(e.attrs.href)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")"},escape:!1},Vl={open(t,e,n,i){return Gu(n.child(i),-1)},close(t,e,n,i){return Gu(n.child(i-1),1)},escape:!1};function Gu(t,e){let n=/`+/g,i,r=0;if(t.isText)for(;i=n.exec(t.text);)r=Math.max(r,i[0].length);let o=r>0&&e>0?" `":"`";for(let u=0;u<r;u++)o+="`";return r>0&&e<0&&(o+=" "),o}function Xu(t,e,n,i){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;let r=e.child(n+(i<0?-1:0));if(!r.isText||r.text!=t.attrs.href||r.marks[r.marks.length-1]!=t)return!1;if(n==(i<0?1:e.childCount-1))return!0;let o=e.child(n+(i<0?-2:1));return!t.isInSet(o.marks)}const e_=new cl({blockquote:Ml,code_block:Ol,heading:M1,horizontal_rule:O1,bullet_list:Tl,ordered_list:Nl,list_item:Fl,paragraph:Il,image:Rl,hard_break:Bl,text:zl},{em:Pl,superscript:T1,strike:Ll,strong:ql,link:$l,code:Vl}),N1=new cl({mention:A1,blockquote:Ml,code_block:Ol,bullet_list:Tl,ordered_list:Nl,list_item:Fl,paragraph:Il,image:Rl,hard_break:Bl,text:zl},{em:Pl,strike:Ll,strong:ql,link:$l,code:Vl}),t_=new Br({nodes:{doc:Y.spec.nodes.get("doc"),paragraph:Y.spec.nodes.get("paragraph"),blockquote:Y.spec.nodes.get("blockquote"),horizontal_rule:Y.spec.nodes.get("horizontal_rule"),heading:Y.spec.nodes.get("heading"),code_block:Y.spec.nodes.get("code_block"),text:Y.spec.nodes.get("text"),image:Y.spec.nodes.get("image"),hard_break:Y.spec.nodes.get("hard_break"),ordered_list:Object.assign(Ra,{content:"list_item+",group:"block"}),bullet_list:Object.assign(Ba,{content:"list_item+",group:"block"}),list_item:Object.assign(za,{content:"paragraph block*"})},marks:{link:Y.spec.marks.get("link"),em:Y.spec.marks.get("em"),superscript:{parseDOM:[{tag:"sup"}],toDOM(){return["sup"]}},strong:Y.spec.marks.get("strong"),code:Y.spec.marks.get("code"),strike:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:()=>["s",0]}}}),Hl=new Br({nodes:{doc:Y.spec.nodes.get("doc"),paragraph:Y.spec.nodes.get("paragraph"),blockquote:Y.spec.nodes.get("blockquote"),code_block:Y.spec.nodes.get("code_block"),text:Y.spec.nodes.get("text"),hard_break:Y.spec.nodes.get("hard_break"),image:{...Y.spec.nodes.get("image"),attrs:{...Y.spec.nodes.get("image").attrs,height:{default:null}},parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt"),height:parseInt(t.style.height)})}],toDOM:t=>{const e={src:t.attrs.src,alt:t.attrs.alt,height:t.attrs.height};return t.attrs.height&&(e.style=`height: ${t.attrs.height}`),["img",e]}},ordered_list:Object.assign(Ra,{content:"list_item+",group:"block"}),bullet_list:Object.assign(Ba,{content:"list_item+",group:"block"}),list_item:Object.assign(za,{content:"paragraph block*"}),mention:{attrs:{userFullName:{default:""},userId:{default:""}},group:"inline",inline:!0,selectable:!0,draggable:!0,atom:!0,toDOM:t=>["span",{class:"prosemirror-mention-node","mention-user-id":t.attrs.userId,"mention-user-full-name":t.attrs.userFullName},`@${t.attrs.userFullName}`],parseDOM:[{tag:"span[mention-user-id][mention-user-full-name]",getAttrs:t=>{const e=t.getAttribute("mention-user-id"),n=t.getAttribute("mention-user-full-name");return{userId:e,userFullName:n}}}]}},marks:{link:Y.spec.marks.get("link"),em:Y.spec.marks.get("em"),strong:Y.spec.marks.get("strong"),code:Y.spec.marks.get("code"),strike:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:()=>["s",0]}}}),n_=({schema:t,placeholder:e,methods:{onImageUpload:n}={},plugins:i=[],enabledMenuOptions:r})=>[...i||[],Df(),r1(t),t1(t),b1(t),Rg(t),i1(t),vg(t),Sf(),bh(),fg(e),Jh({floating:!0,content:D1(t,{enabledMenuOptions:r,onImageUpload:n})}),new Ct({props:{attributes:{class:"ProseMirror-woot-style"}}})],Fr="--";function Oi(t){try{t=t.replace(/^( *\* *){3,} *$/gm,"").replace(/^( *- *){3,} *$/gm,"").replace(/^( *_ *){3,} *$/gm,"");const e=new El(Hl).parse(t);return N1.serialize(e)}catch(e){return console.warn(e),ec(e),t}}function F1(t){return`${Fr}

${Oi(t)}`}function Ul(t,e){const n=t.trimEnd(),i=Oi(e);return n.endsWith(i)?t.lastIndexOf(i):-1}function Wl(t,e){const n=Oi(e);return Ul(t,n)>-1?t:`${t.trimEnd()}

${F1(n)}`}function Ir(t,e){const n=Oi(e),i=Ul(t,n);let r=t;i>-1&&(r=r.substring(0,i).trimEnd());const o=r.lastIndexOf(Fr);return o!==-1&&o===r.length-Fr.length&&(r=r.substring(0,o)),r}function i_(t,e,n){const i=Ir(t,e);return Wl(i,n)}function I1(t){return t.replace(/```[\s\S]*?```/g,"").replace(/`.*?`/g,"").replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/#+\s*|[*_-]{1,3}/g,"").split(`
`).map(e=>e.trim()).filter(Boolean).join(`
`).replace(/\n{2,}/g,`
`).trim()}const r_=t=>{const e=t.state.selection.head,i=t.domAtPos(e).node;i&&i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",block:"center"})};function o_(t,e,n,i){if(!t)return;e.type.name==="doc"&&e.childCount===1&&e.firstChild.type.name==="paragraph"&&(e=e.firstChild.content);let o;i?o=t.state.tr.replaceWith(n,i,e).insertText(" "):o=t.state.tr.insert(n,e);const u=t.state.apply(o);return t.updateState(u),t.focus(),u}const u_=(t,e)=>{const{selection:n,schema:i}=t,{nodes:r}=i,o=n.$from.node(),{type:{name:u},content:{size:s,content:a}}=o,l=r.image.create({src:e});if(!l)return null;const c=u==="paragraph",f=!a.some(d=>d.type.name==="image")&&s!==0?1:0;return{node:c?l:r.paragraph.create({},l),pos:n.from+f}};function s_(t,e,n){if(t){const i=n.state.tr.setNodeMarkup(n.state.selection.from,null,{src:t.src,height:e.height});i.docChanged&&n.dispatch(i)}}const Kn=(t,e,n)=>{const{state:i}=t;switch(e){case"mention":return i.schema.nodes.mention.create({userId:n.id,userFullName:n.name});case"cannedResponse":return new El(Hl).parse(n);case"variable":return i.schema.text(`{{${n}}}`);case"emoji":return i.schema.text(n);default:return null}},R1={mention:(t,e,n,i)=>({node:Kn(t,"mention",e),from:n,to:i}),cannedResponse:(t,e,n,i,r)=>{const o=Yl({message:e,variables:r}),u=Kn(t,"cannedResponse",o);return{node:u,from:u.textContent===o?n:n-1,to:i}},variable:(t,e,n,i)=>({node:Kn(t,"variable",e),from:n,to:i}),emoji:(t,e,n,i)=>({node:Kn(t,"emoji",e),from:n,to:i})},a_=(t,e,n,{from:i,to:r},o)=>{const u=R1[e];return u?u(t,n,i,r,o):{node:null,from:i,to:r}},l_=[{name:"Smileys & Emotion",slug:"smileys_emotion",emojis:[{emoji:"",name:"grinning face",slug:"grinning_face"},{emoji:"",name:"grinning face with big eyes",slug:"grinning_face_with_big_eyes_mouth_open_smile"},{emoji:"",name:"grinning face with smiling eyes",slug:"grinning_face_with_smiling_eyes_mouth_open_smile"},{emoji:"",name:"beaming face with smiling eyes",slug:"beaming_face_with_smiling_eyes_grin_smile"},{emoji:"",name:"grinning squinting face",slug:"grinning_squinting_face_laugh_mouth_satisfied_smile"},{emoji:"",name:"grinning face with sweat",slug:"grinning_face_with_sweat_open_smile_sweating"},{emoji:"",name:"rolling on the floor laughing",slug:"rolling_on_the_floor_laughing_laugh_floor_rofl"},{emoji:"",name:"face with tears of joy",slug:"face_with_tears_of_joy_laugh"},{emoji:"",name:"slightly smiling face",slug:"slightly_smiling_face_smile"},{emoji:"",name:"upside-down face",slug:"upside_down_face"},{emoji:"",name:"melting face",slug:"melting_face_disappear_dissolve_melt_liquid"},{emoji:"",name:"winking face",slug:"winking_face"},{emoji:"",name:"smiling face with smiling eyes",slug:"smiling_face_with_smiling_eyes_blush"},{emoji:"",name:"smiling face with halo",slug:"smiling_face_with_halo_angel_fantasy_innocent"},{emoji:"",name:"smiling face with hearts",slug:"smiling_face_with_hearts_adore_crush_in_love"},{emoji:"",name:"smiling face with heart-eyes",slug:"smiling_face_with_heart_eyes_love"},{emoji:"",name:"star-struck",slug:"star_struck_starry_eyed_grinning_face"},{emoji:"",name:"face blowing a kiss",slug:"face_blowing_a_kiss"},{emoji:"",name:"kissing face",slug:"kissing_face"},{emoji:"",name:"kissing face with closed eyes",slug:"kissing_face_with_closed_eyes"},{emoji:"",name:"kissing face with smiling eyes",slug:"kissing_face_with_smiling_eyes"},{emoji:"",name:"smiling face with tear",slug:"smiling_face_with_tear_grateful_proud_relieved_touched"},{emoji:"",name:"face savoring food",slug:"face_savoring_food_delicious_yum_tongue_savouring"},{emoji:"",name:"face with tongue",slug:"face_with_tongue"},{emoji:"",name:"winking face with tongue",slug:"winking_face_with_tongue_eye_joke_wink "},{emoji:"",name:"zany face",slug:"zany_face_eye_goofy_large_small "},{emoji:"",name:"squinting face with tongue",slug:"squinting_face_with_tongue_eye_face_horrible_tongue"},{emoji:"",name:"money-mouth face",slug:"money_mouth_face"},{emoji:"",name:"smiling face with open hands",slug:"smiling_face_with_open_hands_hug_hugging_open_hands"},{emoji:"",name:"face with hand over mouth",slug:"face_with_hand_over_mouth_whoops_shock_sudden_realization_surprise"},{emoji:"",name:"face with open eyes and hand over mouth",slug:"face_with_open_eyes_and_hand_over_mouth_amazement_awe_disbelief_embarrass_scared_surprise"},{emoji:"",name:"face with peeking eye",slug:"face_with_peeking_eye_captivated_peep_stare"},{emoji:"",name:"shushing face",slug:"shushing_face_quiet_silence"},{emoji:"",name:"thinking face",slug:"thinking_face"},{emoji:"",name:"saluting face",slug:"saluting_face_ok_salute_sunny_troops_yes"},{emoji:"",name:"zipper-mouth face",slug:"zipper_mouth_face"},{emoji:"",name:"face with raised eyebrow",slug:"face_with_raised_eyebrow_distrust_skeptic_disapproval_disbelief_mild_surprise_skepticism"},{emoji:"",name:"neutral face",slug:"neutral_face_deadpan_meh"},{emoji:"",name:"expressionless face",slug:"expressionless_face_inexpressive_meh_unexpressive"},{emoji:"",name:"face without mouth",slug:"face_without_mouth_quiet_silent"},{emoji:"",name:"dotted line face",slug:"dotted_line_face_depressed_disappear_introvert_invisible"},{emoji:"",name:"face in clouds",slug:"face_in_clouds_absentminded_fog"},{emoji:"",name:"smirking face",slug:"smirking_face"},{emoji:"",name:"unamused face",slug:"unamused_face_unhappy"},{emoji:"",name:"face with rolling eyes",slug:"face_with_rolling_eyes_eyeroll"},{emoji:"",name:"grimacing face",slug:"grimacing_face"},{emoji:"",name:"face exhaling",slug:"face_exhaling_exhale_relief_whisper_whistle_groan_gasp"},{emoji:"",name:"lying face",slug:"lying_face_lie_pinocchio"},{emoji:"",name:"relieved face",slug:"relieved_face"},{emoji:"",name:"pensive face",slug:"pensive_face_dejected"},{emoji:"",name:"sleepy face",slug:"sleepy_face_good_night"},{emoji:"",name:"drooling face",slug:"drooling_face"},{emoji:"",name:"sleeping face",slug:"sleeping_face_zzz_good_night"},{emoji:"",name:"face with medical mask",slug:"face_with_medical_mask_cold_doctor_sick"},{emoji:"",name:"face with thermometer",slug:"face_with_thermometer_sick"},{emoji:"",name:"face with head-bandage",slug:"face_with_head_bandage_hurt_injury"},{emoji:"",name:"nauseated face",slug:"nauseated_face_vomit"},{emoji:"",name:"face vomiting",slug:"face_vomiting_puke"},{emoji:"",name:"sneezing face",slug:"sneezing_face_gesundheit"},{emoji:"",name:"hot face",slug:"hot_face_feverish_heat_stroke_red_faced_sweating"},{emoji:"",name:"cold face",slug:"cold_face_blue-faced_frostbite_icicles"},{emoji:"",name:"woozy face",slug:"woozy_face_dizzy_ intoxicated_tipsy_uneven_eyes_wavy_mouth"},{emoji:"",name:"face with crossed-out eyes",slug:"face_with_crossed_out_eyes_knocked_out"},{emoji:"",name:"face with spiral eyes",slug:"face_with_spiral_eyes_dizzy_hypnotized_spiral_trouble_whoa"},{emoji:"",name:"exploding head",slug:"exploding_head_mind_blown_shocked"},{emoji:"",name:"cowboy hat face",slug:"cowboy_hat_face_cowgirl"},{emoji:"",name:"partying face",slug:"partying_face_celebration_hat_horn_party"},{emoji:"",name:"disguised face",slug:"disguised_face_glasses_incognito_nose"},{emoji:"",name:"smiling face with sunglasses",slug:"smiling_face_with_sunglasses_bright_cool_shades"},{emoji:"",name:"nerd face",slug:"nerd_face_geek"},{emoji:"",name:"face with monocle",slug:"face_with_monocle_stuffy_wealthy"},{emoji:"",name:"confused face",slug:"confused_face_meh"},{emoji:"",name:"face with diagonal mouth",slug:"face_with_diagonal_mouth_disappointed_meh_skeptical_unsure"},{emoji:"",name:"worried face",slug:"worried_face"},{emoji:"",name:"slightly frowning face",slug:"slightly_frowning_face"},{emoji:"",name:"face with open mouth",slug:"face_with_open_mouth_sympathy_surprise"},{emoji:"",name:"hushed face",slug:"hushed_face_stunned_hushed"},{emoji:"",name:"astonished face",slug:"astonished_face_shocked_totally"},{emoji:"",name:"flushed face",slug:"flushed_face_dazed"},{emoji:"",name:"pleading face",slug:"pleading_face_angry_cry_proud_resist_sad"},{emoji:"",name:"face holding back tears",slug:"face_holding_back_tears_frown_open_mouth"},{emoji:"",name:"frowning face with open mouth",slug:"frowning_face_with_open_mouth"},{emoji:"",name:"anguished face",slug:"anguished_face"},{emoji:"",name:"fearful face",slug:"fearful_face_scared"},{emoji:"",name:"anxious face with sweat",slug:"anxious_face_with_sweat_cold_rushed"},{emoji:"",name:"sad but relieved face",slug:"sad_but_relieved_face_disappointed_whew"},{emoji:"",name:"crying face",slug:"crying_face_cry_sad_tear"},{emoji:"",name:"loudly crying face",slug:"loudly_crying_face_sad_sob_tear"},{emoji:"",name:"face screaming in fear",slug:"face_screaming_in_fear_munch_scared_scream"},{emoji:"",name:"confounded face",slug:"confounded_face"},{emoji:"",name:"persevering face",slug:"persevering_face"},{emoji:"",name:"disappointed face",slug:"disappointed_face"},{emoji:"",name:"downcast face with sweat",slug:"downcast_face_with_sweat_cold"},{emoji:"",name:"weary face",slug:"weary_face_tired"},{emoji:"",name:"tired face",slug:"tired_face"},{emoji:"",name:"yawning face",slug:"yawning_face_bored_yawn"},{emoji:"",name:"face with steam from nose",slug:"face_with_steam_from_nose_triumph_won"},{emoji:"",name:"enraged face",slug:"enraged_face_angry_enraged_mad_red_face"},{emoji:"",name:"angry face",slug:"angry_face_mad"},{emoji:"",name:"face with symbols on mouth",slug:"face_with_symbols_on_mouth_swearing_cursing"},{emoji:"",name:"smiling face with horns",slug:"smiling_face_with_horns_fantasy_fairy_tail"},{emoji:"",name:"angry face with horns",slug:"angry_face_with_horns_demo_devil_fantasy"},{emoji:"",name:"skull",slug:"skull_fairy_tail_skeleton_monster_death_face"},{emoji:"",name:"skull and crossbones",slug:"skull_and_crossbones_death_pirate_monster_skeleton"},{emoji:"",name:"pile of poo",slug:"pile_of_poo_poop_dung_monster"},{emoji:"",name:"clown face",slug:"clown_face"},{emoji:"",name:"ogre",slug:"ogre_fantasy_ogre_troll_creature_face"},{emoji:"",name:"goblin",slug:"goblin_creature_fantasy_goblin_monster_face"},{emoji:"",name:"ghost",slug:"ghost_face_monster_fantasy"},{emoji:"",name:"alien",slug:"alien_creature_extraterrestrial_ufo_fantasy_face"},{emoji:"",name:"alien monster",slug:"alien_monster_face_monster_creature_ufo"},{emoji:"",name:"robot",slug:"robot_face_monster_robot"},{emoji:"",name:"grinning cat",slug:"grinning_cat_face_open_mouth_smile"},{emoji:"",name:"grinning cat with smiling eyes",slug:"grinning_cat_with_smiling_eyes_face"},{emoji:"",name:"cat with tears of joy",slug:"cat_with_tears_of_joy_face"},{emoji:"",name:"smiling cat with heart-eyes",slug:"smiling_cat_with_heart_eyes_love_smile"},{emoji:"",name:"cat with wry smile",slug:"cat_with_wry_smile_wry_ironic"},{emoji:"",name:"kissing cat",slug:"kissing_cat_kiss_face_eye"},{emoji:"",name:"weary cat",slug:"weary_cat_surprised_face_oh"},{emoji:"",name:"crying cat",slug:"crying_cat_cry_sad_tear"},{emoji:"",name:"pouting cat",slug:"pouting_cat_face"},{emoji:"",name:"see-no-evil monkey",slug:"see_no_evil_monkey_forbidden_face"},{emoji:"",name:"hear-no-evil monkey",slug:"hear_no_evil_monkey_forbidden_face"},{emoji:"",name:"speak-no-evil monkey",slug:"speak_no_evil_monkey_face_forbidden"},{emoji:"",name:"love letter",slug:"love_letter_mail"},{emoji:"",name:"heart with arrow",slug:"heart_with_arrow_cupid"},{emoji:"",name:"heart with ribbon",slug:"heart_with_ribbon_valentine"},{emoji:"",name:"sparkling heart",slug:"sparkling_heart_excited_love"},{emoji:"",name:"growing heart",slug:"growing_heart_beating_heart_heartbeat_nervous_pulse"},{emoji:"",name:"beating heart",slug:"beating_heart_heartbeat_pulsating"},{emoji:"",name:"revolving hearts",slug:"revolving_hearts"},{emoji:"",name:"two hearts",slug:"two_hearts_love"},{emoji:"",name:"heart decoration",slug:"heart_decoration"},{emoji:"",name:"heart exclamation",slug:"heart_exclamation_mark_punctuation"},{emoji:"",name:"broken heart",slug:"broken_heart_break_broken"},{emoji:"",name:"heart on fire",slug:"heart_on_fire_burn_heart_lust_scared_heart"},{emoji:"",name:"mending heart",slug:"mending_heart_healthier_improving_recovery_recuperating_well"},{emoji:"",name:"red heart",slug:"red_heart"},{emoji:"",name:"orange heart",slug:"orange_heart"},{emoji:"",name:"yellow heart",slug:"yellow_heart"},{emoji:"",name:"green heart",slug:"green_heart"},{emoji:"",name:"blue heart",slug:"blue_heart"},{emoji:"",name:"purple heart",slug:"purple_heart"},{emoji:"",name:"brown heart",slug:"brown_heart"},{emoji:"",name:"black heart",slug:"black_heart"},{emoji:"",name:"white heart",slug:"white_heart"},{emoji:"",name:"kiss mark",slug:"kiss_mark_lips"},{emoji:"",name:"hundred points",slug:"hundred_points_100_score"},{emoji:"",name:"anger symbol",slug:"anger_symbol_comic_mad"},{emoji:"",name:"collision",slug:"collision_boom_comic_explode"},{emoji:"",name:"dizzy",slug:"dizzy_star_comic"},{emoji:"",name:"sweat droplets",slug:"sweat_droplets_splashing_comic_water"},{emoji:"",name:"dashing away",slug:"dashing_away_running_comic"},{emoji:"",name:"hole",slug:"hole"},{emoji:"",name:"speech balloon",slug:"speech_balloon_dialogue_speech_comic_bubble"},{emoji:"",name:"eye in speech bubble",slug:"eye_in_speech_bubble_witness"},{emoji:"",name:"left speech bubble",slug:"left_speech_bubble_ballon_bubble"},{emoji:"",name:"right anger bubble",slug:"right_anger_bubble_mad"},{emoji:"",name:"thought balloon",slug:"thought_balloon_comic_thought"},{emoji:"",name:"ZZZ",slug:"zzz_good_night_sleep_comic_sleeping"}]},{name:"People & Body",slug:"people_body",emojis:[{emoji:"",name:"waving hand",slug:"waving_hand_wave_hi_hello"},{emoji:"",name:"raised back of hand",slug:"raised_back_of_hand_backhand"},{emoji:"",name:"hand with fingers splayed",slug:"hand_with_fingers_splayed"},{emoji:"",name:"raised hand",slug:"raised_hand_high_5_high_five"},{emoji:"",name:"vulcan salute",slug:"vulcan_salute_finger_spock_hand"},{emoji:"",name:"rightwards hand",slug:"rightwards_hand_right"},{emoji:"",name:"leftwards hand",slug:"leftwards_hand_left"},{emoji:"",name:"palm down hand",slug:"palm_down_hand_dismiss_drop_shoo"},{emoji:"",name:"palm up hand",slug:"palm_up_hand_catch_beckon_come_offer"},{emoji:"",name:"OK hand",slug:"ok_hand"},{emoji:"",name:"pinched fingers",slug:"pinched_fingers_hand_gesture_interrogation_sarcastic"},{emoji:"",name:"pinching hand",slug:"pinching_hand_small_amount"},{emoji:"",name:"victory hand",slug:"victory_hand_v"},{emoji:"",name:"crossed fingers",slug:"crossed_fingers_hand_cross_luck"},{emoji:"",name:"hand with index finger and thumb crossed",slug:"hand_with_index_finger_and_thumb_crossed_expensive_heart_love_money_snap"},{emoji:"",name:"love-you gesture",slug:"love_you_gesture_ILY_hand"},{emoji:"",name:"sign of the horns",slug:"sign_of_the_horns_finger_hand_horns_rock-on"},{emoji:"",name:"call me hand",slug:"call_me_hand_Shaka_hand_loose"},{emoji:"",name:"backhand index pointing left",slug:"backhand_index_pointing_left_index_point_finger_hand"},{emoji:"",name:"backhand index pointing right",slug:"backhand_index_pointing_right_index_point_finger_hand"},{emoji:"",name:"backhand index pointing up",slug:"backhand_index_pointing_up_hand_point_up_finger"},{emoji:"",name:"middle finger",slug:"middle_finger_hand"},{emoji:"",name:"backhand index pointing down",slug:"backhand_index_pointing_down_hand_point_down_finger"},{emoji:"",name:"index pointing up",slug:"index_pointing_up_hand_finger_point_up"},{emoji:"",name:"index pointing at the viewer",slug:"index_pointing_at_the_viewer_you_point"},{emoji:"",name:"thumbs up",slug:"thumbs_up_+1_hand"},{emoji:"",name:"thumbs down",slug:"thumbs_down_-1_hand"},{emoji:"",name:"raised fist",slug:"raised_fist_hand_punch_clenched_fist"},{emoji:"",name:"oncoming fist",slug:"oncoming_fist_clenched_fist_hand_punch"},{emoji:"",name:"left-facing fist",slug:"left_facing_fist_leftwards"},{emoji:"",name:"right-facing fist",slug:"right_facing_fist_rightwards"},{emoji:"",name:"clapping hands",slug:"clapping_hands_clap"},{emoji:"",name:"raising hands",slug:"raising_hands_celebration_gesture_hooray_raised_hands"},{emoji:"",name:"heart hands",slug:"heart_hands_love"},{emoji:"",name:"open hands",slug:"open_hands"},{emoji:"",name:"palms up together",slug:"palms_up_together_prayer_cupped_hands"},{emoji:"",name:"handshake",slug:"handshake_agreement_hand_deal_handshake"},{emoji:"",name:"folded hands",slug:"folded_hands_ask_hand_high_5_high_five_please_pray_thanks"},{emoji:"",name:"writing hand",slug:"writing_hand_write"},{emoji:"",name:"nail polish",slug:"nail_polish_care_manicure_cosmetics"},{emoji:"",name:"selfie",slug:"selfie_camera_phone_selfie"},{emoji:"",name:"flexed biceps",slug:"flexed_biceps_comic_flex_muscle_strength"},{emoji:"",name:"mechanical arm",slug:"mechanical_arm"},{emoji:"",name:"mechanical leg",slug:"mechanical_leg_kick"},{emoji:"",name:"leg",slug:"leg_kick_limb"},{emoji:"",name:"foot",slug:"foot_kick_stomp"},{emoji:"",name:"ear",slug:"ear_body_hearing_listen_listen_to"},{emoji:"",name:"ear with hearing aid",slug:"ear_with_hearing_aid_accessibility"},{emoji:"",name:"nose",slug:"nose_body"},{emoji:"",name:"brain",slug:"brain_intelligent"},{emoji:"",name:"anatomical heart",slug:"anatomical_heart_cardiology_organs_pulse"},{emoji:"",name:"lungs",slug:"lungs_organ_exhalation_inhalation_respiration"},{emoji:"",name:"tooth",slug:"tooth_dentist"},{emoji:"",name:"bone",slug:"bone_skeleton"},{emoji:"",name:"eyes",slug:"eyes_face_eye"},{emoji:"",name:"eye",slug:"eye_body"},{emoji:"",name:"tongue",slug:"tongue_body"},{emoji:"",name:"mouth",slug:"mouth_lips"},{emoji:"",name:"biting lip",slug:"biting_lip_anxious_fear_flirting_nervous_uncomfortable_worried"},{emoji:"",name:"baby",slug:"baby_young"},{emoji:"",name:"child",slug:"child_gender_neutral_young_unspecified_gender"},{emoji:"",name:"boy",slug:"boy_young"},{emoji:"",name:"girl",slug:"girl_Virgo_young_zodiac"},{emoji:"",name:"person",slug:"person_adult_unspecified_gender"},{emoji:"",name:"person blond hair",slug:"person_blond_hair"},{emoji:"",name:"man",slug:"man_adult_man"},{emoji:"",name:"person beard",slug:"person_beard_bewhiskered"},{emoji:"",name:"man beard",slug:"man_beard"},{emoji:"",name:"woman beard",slug:"woman_beard"},{emoji:"",name:"man red hair",slug:"man_red_hair"},{emoji:"",name:"man curly hair",slug:"man_curly_hair"},{emoji:"",name:"man white hair",slug:"man_white_hair"},{emoji:"",name:"man bald",slug:"man_bald"},{emoji:"",name:"woman",slug:"woman_adult"},{emoji:"",name:"woman red hair",slug:"woman_red_hair"},{emoji:"",name:"person red hair",slug:"person_red_hair_unspecified_gender"},{emoji:"",name:"woman curly hair",slug:"woman_curly_hair"},{emoji:"",name:"person curly hair",slug:"person_curly_hair_unspecified_gender"},{emoji:"",name:"woman white hair",slug:"woman_white_hair_adult"},{emoji:"",name:"person white hair",slug:"person_white_hair"},{emoji:"",name:"woman bald",slug:"woman_bald"},{emoji:"",name:"person bald",slug:"person_bald"},{emoji:"",name:"woman blond hair",slug:"woman_blond_hair"},{emoji:"",name:"man blond hair",slug:"man_blond_hair"},{emoji:"",name:"older person",slug:"older_person"},{emoji:"",name:"old man",slug:"old_man"},{emoji:"",name:"old woman",slug:"old_woman"},{emoji:"",name:"person frowning",slug:"person_frowning_gesture"},{emoji:"",name:"man frowning",slug:"man_frowning_gesture"},{emoji:"",name:"woman frowning",slug:"woman_frowning_gesture"},{emoji:"",name:"person pouting",slug:"person_pouting_gesture"},{emoji:"",name:"man pouting",slug:"man_pouting_gesture"},{emoji:"",name:"woman pouting",slug:"woman_pouting_gesture"},{emoji:"",name:"person gesturing NO",slug:"person_gesturing_no_gesture_hand_prohibited"},{emoji:"",name:"man gesturing NO",slug:"man_gesturing_no_gesture"},{emoji:"",name:"woman gesturing NO",slug:"woman_gesturing_no_gesture_hand"},{emoji:"",name:"person gesturing OK",slug:"person_gesturing_ok_gesture_hand"},{emoji:"",name:"man gesturing OK",slug:"man_gesturing_ok_gesture_hand"},{emoji:"",name:"woman gesturing OK",slug:"woman_gesturing_ok_gesture_hand"},{emoji:"",name:"person tipping hand",slug:"person_tipping_hand_help_information_sassy_tipping"},{emoji:"",name:"man tipping hand",slug:"man_tipping_hand_sassy_tipping"},{emoji:"",name:"woman tipping hand",slug:"woman_tipping_hand_sassy"},{emoji:"",name:"person raising hand",slug:"person_raising_hand_gesture_hand"},{emoji:"",name:"man raising hand",slug:"man_raising_hand_gesture_hand"},{emoji:"",name:"woman raising hand",slug:"woman_raising_hand_gesture_hand"},{emoji:"",name:"deaf person",slug:"deaf_person_ear_deafness_accessibility"},{emoji:"",name:"deaf man",slug:"deaf_man"},{emoji:"",name:"deaf woman",slug:"deaf_woman"},{emoji:"",name:"person bowing",slug:"person_bowing_apology_gesture_blow_sorry"},{emoji:"",name:"man bowing",slug:"man_bowing_apology_gesture_favor_sorry"},{emoji:"",name:"woman bowing",slug:"woman_bowing_apology_gesture_favor_sorry"},{emoji:"",name:"person facepalming",slug:"person_facepalming_disbelief_facepalm_exasperation_palm"},{emoji:"",name:"man facepalming",slug:"man_facepalming_disbelief_facepalm_exasperation_palm"},{emoji:"",name:"woman facepalming",slug:"woman_facepalming_disbelief_facepalm_exasperation_palm"},{emoji:"",name:"person shrugging",slug:"person_shrugging_ignorance_indifference_shrug_doubt"},{emoji:"",name:"man shrugging",slug:"man_shrugging_ignorance_indifference_shrug_doubt"},{emoji:"",name:"woman shrugging",slug:"woman_shrugging_ignorance_indifference_shrug_doubt"},{emoji:"",name:"health worker",slug:"health_worker_doctor_nurse_therapist"},{emoji:"",name:"man health worker",slug:"man_health_worker_doctor_nurse_therapist"},{emoji:"",name:"woman health worker",slug:"woman_health_worker_doctor_nurse_therapist"},{emoji:"",name:"student",slug:"student_graduate"},{emoji:"",name:"man student",slug:"man_student_graduate"},{emoji:"",name:"woman student",slug:"woman_student_graduate"},{emoji:"",name:"teacher",slug:"teacher_instructor_professor"},{emoji:"",name:"man teacher",slug:"man_teacher_instructor_professor"},{emoji:"",name:"woman teacher",slug:"woman_teacher_instructor_professor"},{emoji:"",name:"judge",slug:"judge_scales_justice"},{emoji:"",name:"man judge",slug:"man_judge_scales_justice"},{emoji:"",name:"woman judge",slug:"woman_judge_scales_justice"},{emoji:"",name:"farmer",slug:"farmer_gardener_rancher"},{emoji:"",name:"man farmer",slug:"man_farmer_gardener_rancher"},{emoji:"",name:"woman farmer",slug:"woman_farmer_gardener_rancher"},{emoji:"",name:"cook",slug:"cook_chef"},{emoji:"",name:"man cook",slug:"man_cook"},{emoji:"",name:"woman cook",slug:"woman_cook"},{emoji:"",name:"mechanic",slug:"mechanic_electrician_plumber_tradesperson"},{emoji:"",name:"man mechanic",slug:"man_mechanic_electrician_plumber_tradesperson"},{emoji:"",name:"woman mechanic",slug:"woman_mechanic_electrician_plumber_tradesperson"},{emoji:"",name:"factory worker",slug:"factory_worker_assembly_industry"},{emoji:"",name:"man factory worker",slug:"man_factory_worker_assembly_industry"},{emoji:"",name:"woman factory worker",slug:"woman_factory_worker_assembly_industry"},{emoji:"",name:"office worker",slug:"office_worker_business_manager_architect_white_collar"},{emoji:"",name:"man office worker",slug:"man_office_worker_business_manager_architect"},{emoji:"",name:"woman office worker",slug:"woman_office_worker_business_manager_architect"},{emoji:"",name:"scientist",slug:"scientist_biologist_researcher_engineer_chemist"},{emoji:"",name:"man scientist",slug:"man_scientist_biologist_researcher_engineer_chemist"},{emoji:"",name:"woman scientist",slug:"woman_scientist_biologist_researcher_engineer_chemist"},{emoji:"",name:"technologist",slug:"technologist_coder_developer_programmer_engineer_software_inventor"},{emoji:"",name:"man technologist",slug:"man_technologist_coder_developer_programmer_engineer_software_inventor"},{emoji:"",name:"woman technologist",slug:"woman_technologist_coder_developer_programmer_engineer_software_inventor"},{emoji:"",name:"singer",slug:"singer_actor_entertainer_rock_star"},{emoji:"",name:"man singer",slug:"man_singer_actor_entertainer_rock_star"},{emoji:"",name:"woman singer",slug:"woman_singer_actress_entertainer_rock_star"},{emoji:"",name:"artist",slug:"artist"},{emoji:"",name:"man artist",slug:"man_artist"},{emoji:"",name:"woman artist",slug:"woman_artist"},{emoji:"",name:"pilot",slug:"pilot_plane"},{emoji:"",name:"man pilot",slug:"man_pilot"},{emoji:"",name:"woman pilot",slug:"woman_pilot"},{emoji:"",name:"astronaut",slug:"astronaut"},{emoji:"",name:"man astronaut",slug:"man_astronaut"},{emoji:"",name:"woman astronaut",slug:"woman_astronaut"},{emoji:"",name:"firefighter",slug:"firefighter"},{emoji:"",name:"man firefighter",slug:"man_firefighter"},{emoji:"",name:"woman firefighter",slug:"woman_firefighter"},{emoji:"",name:"police officer",slug:"police_officer_cop"},{emoji:"",name:"man police officer",slug:"man_police_officer_cop"},{emoji:"",name:"woman police officer",slug:"woman_police_officer_cop"},{emoji:"",name:"detective",slug:"detective_spy_sleuth"},{emoji:"",name:"man detective",slug:"man_detective_spy_sleuth"},{emoji:"",name:"woman detective",slug:"woman_detective_spy_sleuth"},{emoji:"",name:"guard",slug:"guard"},{emoji:"",name:"man guard",slug:"man_guard"},{emoji:"",name:"woman guard",slug:"woman_guard"},{emoji:"",name:"ninja_fighter_stealth",slug:"ninja"},{emoji:"",name:"construction worker",slug:"construction_worker"},{emoji:"",name:"man construction worker",slug:"man_construction_worker"},{emoji:"",name:"woman construction worker",slug:"woman_construction_worker"},{emoji:"",name:"person with crown",slug:"person_with_crown"},{emoji:"",name:"prince",slug:"prince"},{emoji:"",name:"princess",slug:"princess"},{emoji:"",name:"person wearing turban",slug:"person_wearing_turban"},{emoji:"",name:"man wearing turban",slug:"man_wearing_turban"},{emoji:"",name:"woman wearing turban",slug:"woman_wearing_turban"},{emoji:"",name:"person with skullcap",slug:"person_with_skullcap"},{emoji:"",name:"woman with headscarf",slug:"woman_with_headscarf_hijab"},{emoji:"",name:"person in tuxedo",slug:"person_in_tuxedo"},{emoji:"",name:"man in tuxedo",slug:"man_in_tuxedo"},{emoji:"",name:"woman in tuxedo",slug:"woman_in_tuxedo"},{emoji:"",name:"person with veil",slug:"person_with_veil"},{emoji:"",name:"man with veil",slug:"man_with_veil"},{emoji:"",name:"woman with veil",slug:"woman_with_veil"},{emoji:"",name:"pregnant woman",slug:"pregnant_woman"},{emoji:"",name:"pregnant man",slug:"pregnant_man"},{emoji:"",name:"pregnant person",slug:"pregnant_person"},{emoji:"",name:"breast-feeding",slug:"breast_feeding"},{emoji:"",name:"woman feeding baby",slug:"woman_feeding_baby"},{emoji:"",name:"man feeding baby",slug:"man_feeding_baby"},{emoji:"",name:"person feeding baby",slug:"person_feeding_baby"},{emoji:"",name:"baby angel",slug:"baby_angel"},{emoji:"",name:"Santa Claus",slug:"santa_claus_christmas_father_santa_claus"},{emoji:"",name:"Mrs. Claus",slug:"mrs_claus_christmas_mother_santa_claus"},{emoji:"",name:"mx claus",slug:"mx_claus"},{emoji:"",name:"superhero",slug:"superhero"},{emoji:"",name:"man superhero",slug:"man_superhero"},{emoji:"",name:"woman superhero",slug:"woman_superhero"},{emoji:"",name:"supervillain",slug:"supervillain_criminal_evil"},{emoji:"",name:"man supervillain",slug:"man_supervillain_criminal_evil"},{emoji:"",name:"woman supervillain",slug:"woman_supervillain_criminal_evil"},{emoji:"",name:"mage",slug:"mage_sorceress_wizard"},{emoji:"",name:"man mage",slug:"man_mage_sorceress_wizard"},{emoji:"",name:"woman mage",slug:"witch"},{emoji:"",name:"fairy",slug:"fairy"},{emoji:"",name:"man fairy",slug:"man_fairy"},{emoji:"",name:"woman fairy",slug:"woman_fairy"},{emoji:"",name:"vampire",slug:"vampire"},{emoji:"",name:"man vampire",slug:"man_vampire"},{emoji:"",name:"woman vampire",slug:"woman_vampire"},{emoji:"",name:"merperson",slug:"merperson"},{emoji:"",name:"merman",slug:"merman"},{emoji:"",name:"mermaid",slug:"mermaid"},{emoji:"",name:"elf",slug:"elf"},{emoji:"",name:"man elf",slug:"man_elf"},{emoji:"",name:"woman elf",slug:"woman_elf"},{emoji:"",name:"genie",slug:"genie"},{emoji:"",name:"man genie",slug:"man_genie"},{emoji:"",name:"woman genie",slug:"woman_genie"},{emoji:"",name:"zombie",slug:"zombie"},{emoji:"",name:"man zombie",slug:"man_zombie"},{emoji:"",name:"woman zombie",slug:"woman_zombie"},{emoji:"",name:"troll",slug:"troll"},{emoji:"",name:"person getting massage",slug:"person_getting_massage_face_massage"},{emoji:"",name:"man getting massage",slug:"man_getting_massage_face_massage"},{emoji:"",name:"woman getting massage",slug:"woman_getting_massage_face_massage"},{emoji:"",name:"person getting haircut",slug:"person_getting_haircut_hair"},{emoji:"",name:"man getting haircut",slug:"man_getting_haircut_hair"},{emoji:"",name:"woman getting haircut",slug:"woman_getting_haircut_hair"},{emoji:"",name:"person walking",slug:"person_walking_hike"},{emoji:"",name:"man walking",slug:"man_walking_hike"},{emoji:"",name:"woman walking",slug:"woman_walking_hike"},{emoji:"",name:"person standing",slug:"person_standing"},{emoji:"",name:"man standing",slug:"man_standing"},{emoji:"",name:"woman standing",slug:"woman_standing"},{emoji:"",name:"person kneeling",slug:"person_kneeling"},{emoji:"",name:"man kneeling",slug:"man_kneeling"},{emoji:"",name:"woman kneeling",slug:"woman_kneeling"},{emoji:"",name:"person with white cane",slug:"person_with_white_cane_accessibility"},{emoji:"",name:"man with white cane",slug:"man_with_white_cane_accessibility"},{emoji:"",name:"woman with white cane",slug:"woman_with_white_cane_accessibility"},{emoji:"",name:"person in motorized wheelchair",slug:"person_in_motorized_wheelchair_accessibility"},{emoji:"",name:"man in motorized wheelchair",slug:"man_in_motorized_wheelchair_accessibility"},{emoji:"",name:"woman in motorized wheelchair",slug:"woman_in_motorized_wheelchair_accessibility"},{emoji:"",name:"person in manual wheelchair",slug:"person_in_manual_wheelchair_accessibility"},{emoji:"",name:"man in manual wheelchair",slug:"man_in_manual_wheelchair_accessibility"},{emoji:"",name:"woman in manual wheelchair",slug:"woman_in_manual_wheelchair_accessibility"},{emoji:"",name:"person running",slug:"person_running"},{emoji:"",name:"man running",slug:"man_running"},{emoji:"",name:"woman running",slug:"woman_running"},{emoji:"",name:"woman dancing",slug:"woman_dancing"},{emoji:"",name:"man dancing",slug:"man_dancing"},{emoji:"",name:"person in suit levitating",slug:"person_in_suit_levitating"},{emoji:"",name:"people with bunny ears",slug:"people_with_bunny_ears_dancer"},{emoji:"",name:"men with bunny ears",slug:"men_with_bunny_ears_dancer"},{emoji:"",name:"women with bunny ears",slug:"women_with_bunny_ears_dancer"},{emoji:"",name:"person in steamy room",slug:"person_in_steamy_room"},{emoji:"",name:"man in steamy room",slug:"man_in_steamy_room"},{emoji:"",name:"woman in steamy room",slug:"woman_in_steamy_room"},{emoji:"",name:"person climbing",slug:"person_climbing"},{emoji:"",name:"man climbing",slug:"man_climbing"},{emoji:"",name:"woman climbing",slug:"woman_climbing"},{emoji:"",name:"person fencing",slug:"person_fencing"},{emoji:"",name:"horse racing",slug:"horse_racing"},{emoji:"",name:"skier",slug:"skier"},{emoji:"",name:"snowboarder",slug:"snowboarder"},{emoji:"",name:"person golfing",slug:"person_golfing"},{emoji:"",name:"man golfing",slug:"man_golfing"},{emoji:"",name:"woman golfing",slug:"woman_golfing"},{emoji:"",name:"person surfing",slug:"person_surfing"},{emoji:"",name:"man surfing",slug:"man_surfing"},{emoji:"",name:"woman surfing",slug:"woman_surfing"},{emoji:"",name:"person rowing boat",slug:"person_rowing_boat"},{emoji:"",name:"man rowing boat",slug:"man_rowing_boat"},{emoji:"",name:"woman rowing boat",slug:"woman_rowing_boat"},{emoji:"",name:"person swimming",slug:"person_swimming"},{emoji:"",name:"man swimming",slug:"man_swimming"},{emoji:"",name:"woman swimming",slug:"woman_swimming"},{emoji:"",name:"person bouncing ball",slug:"person_bouncing_ball"},{emoji:"",name:"man bouncing ball",slug:"man_bouncing_ball"},{emoji:"",name:"woman bouncing ball",slug:"woman_bouncing_ball"},{emoji:"",name:"person lifting weights",slug:"person_lifting_weights"},{emoji:"",name:"man lifting weights",slug:"man_lifting_weights"},{emoji:"",name:"woman lifting weights",slug:"woman_lifting_weights"},{emoji:"",name:"person biking",slug:"person_biking"},{emoji:"",name:"man biking",slug:"man_biking"},{emoji:"",name:"woman biking",slug:"woman_biking"},{emoji:"",name:"person mountain biking",slug:"person_mountain_biking"},{emoji:"",name:"man mountain biking",slug:"man_mountain_biking"},{emoji:"",name:"woman mountain biking",slug:"woman_mountain_biking"},{emoji:"",name:"person cartwheeling",slug:"person_cartwheeling"},{emoji:"",name:"man cartwheeling",slug:"man_cartwheeling"},{emoji:"",name:"woman cartwheeling",slug:"woman_cartwheeling"},{emoji:"",name:"people wrestling",slug:"people_wrestling"},{emoji:"",name:"men wrestling",slug:"men_wrestling"},{emoji:"",name:"women wrestling",slug:"women_wrestling"},{emoji:"",name:"person playing water polo",slug:"person_playing_water_polo"},{emoji:"",name:"man playing water polo",slug:"man_playing_water_polo"},{emoji:"",name:"woman playing water polo",slug:"woman_playing_water_polo"},{emoji:"",name:"person playing handball",slug:"person_playing_handball"},{emoji:"",name:"man playing handball",slug:"man_playing_handball"},{emoji:"",name:"woman playing handball",slug:"woman_playing_handball"},{emoji:"",name:"person juggling",slug:"person_juggling"},{emoji:"",name:"man juggling",slug:"man_juggling"},{emoji:"",name:"woman juggling",slug:"woman_juggling"},{emoji:"",name:"person in lotus position",slug:"person_in_lotus_position"},{emoji:"",name:"man in lotus position",slug:"man_in_lotus_position"},{emoji:"",name:"woman in lotus position",slug:"woman_in_lotus_position"},{emoji:"",name:"person taking bath",slug:"person_taking_bath"},{emoji:"",name:"person in bed",slug:"person_in_bed"},{emoji:"",name:"people holding hands",slug:"people_holding_hands"},{emoji:"",name:"women holding hands",slug:"women_holding_hands"},{emoji:"",name:"woman and man holding hands",slug:"woman_and_man_holding_hands"},{emoji:"",name:"men holding hands",slug:"men_holding_hands"},{emoji:"",name:"kiss",slug:"kiss"},{emoji:"",name:"kiss woman, man",slug:"kiss_woman_man"},{emoji:"",name:"kiss man, man",slug:"kiss_man_man"},{emoji:"",name:"kiss woman, woman",slug:"kiss_woman_woman"},{emoji:"",name:"couple with heart",slug:"couple_with_heart"},{emoji:"",name:"couple with heart woman, man",slug:"couple_with_heart_woman_man"},{emoji:"",name:"couple with heart man, man",slug:"couple_with_heart_man_man"},{emoji:"",name:"couple with heart woman, woman",slug:"couple_with_heart_woman_woman"},{emoji:"",name:"family",slug:"family"},{emoji:"",name:"family man, woman, boy",slug:"family_man_woman_boy"},{emoji:"",name:"family man, woman, girl",slug:"family_man_woman_girl"},{emoji:"",name:"family man, woman, girl, boy",slug:"family_man_woman_girl_boy"},{emoji:"",name:"family man, woman, boy, boy",slug:"family_man_woman_boy_boy"},{emoji:"",name:"family man, woman, girl, girl",slug:"family_man_woman_girl_girl"},{emoji:"",name:"family man, man, boy",slug:"family_man_man_boy"},{emoji:"",name:"family man, man, girl",slug:"family_man_man_girl"},{emoji:"",name:"family man, man, girl, boy",slug:"family_man_man_girl_boy"},{emoji:"",name:"family man, man, boy, boy",slug:"family_man_man_boy_boy"},{emoji:"",name:"family man, man, girl, girl",slug:"family_man_man_girl_girl"},{emoji:"",name:"family woman, woman, boy",slug:"family_woman_woman_boy"},{emoji:"",name:"family woman, woman, girl",slug:"family_woman_woman_girl"},{emoji:"",name:"family woman, woman, girl, boy",slug:"family_woman_woman_girl_boy"},{emoji:"",name:"family woman, woman, boy, boy",slug:"family_woman_woman_boy_boy"},{emoji:"",name:"family woman, woman, girl, girl",slug:"family_woman_woman_girl_girl"},{emoji:"",name:"family man, boy",slug:"family_man_boy"},{emoji:"",name:"family man, boy, boy",slug:"family_man_boy_boy"},{emoji:"",name:"family man, girl",slug:"family_man_girl"},{emoji:"",name:"family man, girl, boy",slug:"family_man_girl_boy"},{emoji:"",name:"family man, girl, girl",slug:"family_man_girl_girl"},{emoji:"",name:"family woman, boy",slug:"family_woman_boy"},{emoji:"",name:"family woman, boy, boy",slug:"family_woman_boy_boy"},{emoji:"",name:"family woman, girl",slug:"family_woman_girl"},{emoji:"",name:"family woman, girl, boy",slug:"family_woman_girl_boy"},{emoji:"",name:"family woman, girl, girl",slug:"family_woman_girl_girl"},{emoji:"",name:"speaking head",slug:"speaking_head"},{emoji:"",name:"bust in silhouette",slug:"bust_in_silhouette"},{emoji:"",name:"busts in silhouette",slug:"busts_in_silhouette"},{emoji:"",name:"people hugging",slug:"people_hugging"},{emoji:"",name:"footprints",slug:"footprints"}]},{name:"Animals & Nature",slug:"animals_nature",emojis:[{emoji:"",name:"monkey face",slug:"monkey_face"},{emoji:"",name:"monkey",slug:"monkey"},{emoji:"",name:"gorilla",slug:"gorilla"},{emoji:"",name:"orangutan",slug:"orangutan"},{emoji:"",name:"dog face",slug:"dog_face"},{emoji:"",name:"dog",slug:"dog"},{emoji:"",name:"guide dog",slug:"guide_dog"},{emoji:"",name:"service dog",slug:"service_dog"},{emoji:"",name:"poodle",slug:"poodle"},{emoji:"",name:"wolf",slug:"wolf"},{emoji:"",name:"fox",slug:"fox"},{emoji:"",name:"raccoon",slug:"raccoon"},{emoji:"",name:"cat face",slug:"cat_face"},{emoji:"",name:"cat",slug:"cat"},{emoji:"",name:"black cat",slug:"black_cat"},{emoji:"",name:"lion",slug:"lion"},{emoji:"",name:"tiger face",slug:"tiger_face"},{emoji:"",name:"tiger",slug:"tiger"},{emoji:"",name:"leopard",slug:"leopard"},{emoji:"",name:"horse face",slug:"horse_face"},{emoji:"",name:"horse",slug:"horse"},{emoji:"",name:"unicorn",slug:"unicorn"},{emoji:"",name:"zebra",slug:"zebra"},{emoji:"",name:"deer",slug:"deer"},{emoji:"",name:"bison",slug:"bison"},{emoji:"",name:"cow face",slug:"cow_face"},{emoji:"",name:"ox",slug:"ox"},{emoji:"",name:"water buffalo",slug:"water_buffalo"},{emoji:"",name:"cow",slug:"cow"},{emoji:"",name:"pig face",slug:"pig_face"},{emoji:"",name:"pig",slug:"pig"},{emoji:"",name:"boar",slug:"boar"},{emoji:"",name:"pig nose",slug:"pig_nose"},{emoji:"",name:"ram",slug:"ram"},{emoji:"",name:"ewe",slug:"ewe"},{emoji:"",name:"goat",slug:"goat"},{emoji:"",name:"camel",slug:"camel"},{emoji:"",name:"two-hump camel",slug:"two_hump_camel"},{emoji:"",name:"llama",slug:"llama"},{emoji:"",name:"giraffe",slug:"giraffe"},{emoji:"",name:"elephant",slug:"elephant"},{emoji:"",name:"mammoth",slug:"mammoth"},{emoji:"",name:"rhinoceros",slug:"rhinoceros"},{emoji:"",name:"hippopotamus",slug:"hippopotamus"},{emoji:"",name:"mouse face",slug:"mouse_face"},{emoji:"",name:"mouse",slug:"mouse"},{emoji:"",name:"rat",slug:"rat"},{emoji:"",name:"hamster",slug:"hamster"},{emoji:"",name:"rabbit face",slug:"rabbit_face"},{emoji:"",name:"rabbit",slug:"rabbit"},{emoji:"",name:"chipmunk",slug:"chipmunk"},{emoji:"",name:"beaver",slug:"beaver"},{emoji:"",name:"hedgehog",slug:"hedgehog"},{emoji:"",name:"bat",slug:"bat"},{emoji:"",name:"bear",slug:"bear"},{emoji:"",name:"polar bear",slug:"polar_bear"},{emoji:"",name:"koala",slug:"koala"},{emoji:"",name:"panda",slug:"panda"},{emoji:"",name:"sloth",slug:"sloth"},{emoji:"",name:"otter",slug:"otter"},{emoji:"",name:"skunk",slug:"skunk"},{emoji:"",name:"kangaroo",slug:"kangaroo"},{emoji:"",name:"badger",slug:"badger"},{emoji:"",name:"paw prints",slug:"paw_prints"},{emoji:"",name:"turkey",slug:"turkey"},{emoji:"",name:"chicken",slug:"chicken"},{emoji:"",name:"rooster",slug:"rooster"},{emoji:"",name:"hatching chick",slug:"hatching_chick"},{emoji:"",name:"baby chick",slug:"baby_chick"},{emoji:"",name:"front-facing baby chick",slug:"front_facing_baby_chick"},{emoji:"",name:"bird",slug:"bird"},{emoji:"",name:"penguin",slug:"penguin"},{emoji:"",name:"dove",slug:"dove"},{emoji:"",name:"eagle",slug:"eagle"},{emoji:"",name:"duck",slug:"duck"},{emoji:"",name:"swan",slug:"swan"},{emoji:"",name:"owl",slug:"owl"},{emoji:"",name:"dodo",slug:"dodo"},{emoji:"",name:"feather",slug:"feather"},{emoji:"",name:"flamingo",slug:"flamingo"},{emoji:"",name:"peacock",slug:"peacock"},{emoji:"",name:"parrot",slug:"parrot"},{emoji:"",name:"frog",slug:"frog"},{emoji:"",name:"crocodile",slug:"crocodile"},{emoji:"",name:"turtle",slug:"turtle"},{emoji:"",name:"lizard",slug:"lizard"},{emoji:"",name:"snake",slug:"snake"},{emoji:"",name:"dragon face",slug:"dragon_face"},{emoji:"",name:"dragon",slug:"dragon"},{emoji:"",name:"sauropod",slug:"sauropod"},{emoji:"",name:"T-Rex",slug:"t_rex"},{emoji:"",name:"spouting whale",slug:"spouting_whale"},{emoji:"",name:"whale",slug:"whale"},{emoji:"",name:"dolphin",slug:"dolphin"},{emoji:"",name:"seal",slug:"seal"},{emoji:"",name:"fish",slug:"fish"},{emoji:"",name:"tropical fish",slug:"tropical_fish"},{emoji:"",name:"blowfish",slug:"blowfish"},{emoji:"",name:"shark",slug:"shark"},{emoji:"",name:"octopus",slug:"octopus"},{emoji:"",name:"spiral shell",slug:"spiral_shell"},{emoji:"",name:"coral",slug:"coral"},{emoji:"",name:"snail",slug:"snail"},{emoji:"",name:"butterfly",slug:"butterfly"},{emoji:"",name:"bug",slug:"bug"},{emoji:"",name:"ant",slug:"ant"},{emoji:"",name:"honeybee",slug:"honeybee"},{emoji:"",name:"beetle",slug:"beetle"},{emoji:"",name:"lady beetle",slug:"lady_beetle"},{emoji:"",name:"cricket",slug:"cricket"},{emoji:"",name:"cockroach",slug:"cockroach"},{emoji:"",name:"spider",slug:"spider"},{emoji:"",name:"spider web",slug:"spider_web"},{emoji:"",name:"scorpion",slug:"scorpion"},{emoji:"",name:"mosquito",slug:"mosquito"},{emoji:"",name:"fly",slug:"fly"},{emoji:"",name:"worm",slug:"worm"},{emoji:"",name:"microbe",slug:"microbe"},{emoji:"",name:"bouquet",slug:"bouquet"},{emoji:"",name:"cherry blossom",slug:"cherry_blossom"},{emoji:"",name:"white flower",slug:"white_flower"},{emoji:"",name:"lotus",slug:"lotus"},{emoji:"",name:"rosette",slug:"rosette"},{emoji:"",name:"rose",slug:"rose"},{emoji:"",name:"wilted flower",slug:"wilted_flower"},{emoji:"",name:"hibiscus",slug:"hibiscus"},{emoji:"",name:"sunflower",slug:"sunflower"},{emoji:"",name:"blossom",slug:"blossom"},{emoji:"",name:"tulip",slug:"tulip"},{emoji:"",name:"seedling",slug:"seedling"},{emoji:"",name:"potted plant",slug:"potted_plant"},{emoji:"",name:"evergreen tree",slug:"evergreen_tree"},{emoji:"",name:"deciduous tree",slug:"deciduous_tree"},{emoji:"",name:"palm tree",slug:"palm_tree"},{emoji:"",name:"cactus",slug:"cactus"},{emoji:"",name:"sheaf of rice",slug:"sheaf_of_rice"},{emoji:"",name:"herb",slug:"herb"},{emoji:"",name:"shamrock",slug:"shamrock"},{emoji:"",name:"four leaf clover",slug:"four_leaf_clover"},{emoji:"",name:"maple leaf",slug:"maple_leaf"},{emoji:"",name:"fallen leaf",slug:"fallen_leaf"},{emoji:"",name:"leaf fluttering in wind",slug:"leaf_fluttering_in_wind"},{emoji:"",name:"empty nest",slug:"empty_nest"},{emoji:"",name:"nest with eggs",slug:"nest_with_eggs"},{emoji:"",name:"mushroom",slug:"mushroom"}]},{name:"Food & Drink",slug:"food_drink",emojis:[{emoji:"",name:"grapes",slug:"grapes_fruit"},{emoji:"",name:"melon",slug:"melon_fruit"},{emoji:"",name:"watermelon",slug:"watermelon_fruit"},{emoji:"",name:"tangerine",slug:"tangerine_fruit"},{emoji:"",name:"lemon",slug:"lemon_fruit"},{emoji:"",name:"banana",slug:"banana_fruit"},{emoji:"",name:"pineapple",slug:"pineapple_fruit"},{emoji:"",name:"mango",slug:"mango_fruit"},{emoji:"",name:"red apple",slug:"red_apple"},{emoji:"",name:"green apple",slug:"green_apple"},{emoji:"",name:"pear",slug:"pear_fruit"},{emoji:"",name:"peach",slug:"peach_fruit"},{emoji:"",name:"cherries",slug:"cherries_fruit"},{emoji:"",name:"strawberry",slug:"strawberry_fruit"},{emoji:"",name:"blueberries",slug:"blueberries_blue"},{emoji:"",name:"kiwi fruit",slug:"kiwi_fruit_fruit"},{emoji:"",name:"tomato",slug:"tomato_fruit"},{emoji:"",name:"olive",slug:"olive"},{emoji:"",name:"coconut",slug:"coconut_palm"},{emoji:"",name:"avocado",slug:"avocado_fruit"},{emoji:"",name:"eggplant",slug:"eggplant"},{emoji:"",name:"potato",slug:"potato"},{emoji:"",name:"carrot",slug:"carrot"},{emoji:"",name:"ear of corn",slug:"ear_of_corn"},{emoji:"",name:"hot pepper",slug:"hot_pepper"},{emoji:"",name:"bell pepper",slug:"bell_pepper"},{emoji:"",name:"cucumber",slug:"cucumber"},{emoji:"",name:"leafy green",slug:"leafy_green"},{emoji:"",name:"broccoli",slug:"broccoli"},{emoji:"",name:"garlic",slug:"garlic"},{emoji:"",name:"onion",slug:"onion"},{emoji:"",name:"peanuts",slug:"peanuts"},{emoji:"",name:"beans",slug:"beans"},{emoji:"",name:"chestnut",slug:"chestnut"},{emoji:"",name:"bread",slug:"bread_loaf"},{emoji:"",name:"croissant",slug:"croissant_breakfast"},{emoji:"",name:"baguette bread",slug:"baguette_bread"},{emoji:"",name:"flatbread",slug:"flatbread"},{emoji:"",name:"pretzel",slug:"pretzel"},{emoji:"",name:"bagel",slug:"bagel"},{emoji:"",name:"pancakes",slug:"pancakes"},{emoji:"",name:"waffle",slug:"waffle"},{emoji:"",name:"cheese wedge",slug:"cheese_wedge"},{emoji:"",name:"meat on bone",slug:"meat_on_bone"},{emoji:"",name:"poultry leg",slug:"poultry_leg_chicken"},{emoji:"",name:"cut of meat",slug:"cut_of_meat"},{emoji:"",name:"bacon",slug:"bacon"},{emoji:"",name:"hamburger",slug:"hamburger"},{emoji:"",name:"french fries",slug:"french_fries"},{emoji:"",name:"pizza",slug:"pizza"},{emoji:"",name:"hot dog",slug:"hot_dog"},{emoji:"",name:"sandwich",slug:"sandwich"},{emoji:"",name:"taco",slug:"taco"},{emoji:"",name:"burrito",slug:"burrito"},{emoji:"",name:"tamale",slug:"tamale"},{emoji:"",name:"stuffed flatbread",slug:"stuffed_flatbread"},{emoji:"",name:"falafel",slug:"falafel"},{emoji:"",name:"egg",slug:"egg"},{emoji:"",name:"cooking",slug:"cooking"},{emoji:"",name:"shallow pan of food",slug:"shallow_pan_of_food"},{emoji:"",name:"pot of food",slug:"pot_of_food"},{emoji:"",name:"fondue",slug:"fondue"},{emoji:"",name:"bowl with spoon",slug:"bowl_with_spoon"},{emoji:"",name:"green salad",slug:"green_salad"},{emoji:"",name:"popcorn",slug:"popcorn"},{emoji:"",name:"butter",slug:"butter"},{emoji:"",name:"salt",slug:"salt"},{emoji:"",name:"canned food",slug:"canned_food"},{emoji:"",name:"bento box",slug:"bento_box"},{emoji:"",name:"rice cracker",slug:"rice_cracker"},{emoji:"",name:"rice ball",slug:"rice_ball"},{emoji:"",name:"cooked rice",slug:"cooked_rice"},{emoji:"",name:"curry rice",slug:"curry_rice"},{emoji:"",name:"steaming bowl",slug:"steaming_bowl"},{emoji:"",name:"spaghetti",slug:"spaghetti"},{emoji:"",name:"roasted sweet potato",slug:"roasted_sweet_potato"},{emoji:"",name:"oden",slug:"oden"},{emoji:"",name:"sushi",slug:"sushi"},{emoji:"",name:"fried shrimp",slug:"fried_shrimp"},{emoji:"",name:"fish cake with swirl",slug:"fish_cake_with_swirl"},{emoji:"",name:"moon cake",slug:"moon_cake"},{emoji:"",name:"dango",slug:"dango"},{emoji:"",name:"dumpling",slug:"dumpling"},{emoji:"",name:"fortune cookie",slug:"fortune_cookie"},{emoji:"",name:"takeout box",slug:"takeout_box"},{emoji:"",name:"crab",slug:"crab"},{emoji:"",name:"lobster",slug:"lobster"},{emoji:"",name:"shrimp",slug:"shrimp"},{emoji:"",name:"squid",slug:"squid"},{emoji:"",name:"oyster",slug:"oyster"},{emoji:"",name:"soft ice cream",slug:"soft_ice_cream"},{emoji:"",name:"shaved ice",slug:"shaved_ice"},{emoji:"",name:"ice cream",slug:"ice_cream"},{emoji:"",name:"doughnut",slug:"doughnut"},{emoji:"",name:"cookie",slug:"cookie"},{emoji:"",name:"birthday cake",slug:"birthday_cake"},{emoji:"",name:"shortcake",slug:"shortcake"},{emoji:"",name:"cupcake",slug:"cupcake"},{emoji:"",name:"pie",slug:"pie"},{emoji:"",name:"chocolate bar",slug:"chocolate_bar"},{emoji:"",name:"candy",slug:"candy"},{emoji:"",name:"lollipop",slug:"lollipop"},{emoji:"",name:"custard",slug:"custard"},{emoji:"",name:"honey pot",slug:"honey_pot"},{emoji:"",name:"baby bottle",slug:"baby_bottle"},{emoji:"",name:"glass of milk",slug:"glass_of_milk"},{emoji:"",name:"hot beverage",slug:"hot_beverage"},{emoji:"",name:"teapot",slug:"teapot"},{emoji:"",name:"teacup without handle",slug:"teacup_without_handle"},{emoji:"",name:"sake",slug:"sake"},{emoji:"",name:"bottle with popping cork",slug:"bottle_with_popping_cork"},{emoji:"",name:"wine glass",slug:"wine_glass"},{emoji:"",name:"cocktail glass",slug:"cocktail_glass"},{emoji:"",name:"tropical drink",slug:"tropical_drink"},{emoji:"",name:"beer mug",slug:"beer_mug"},{emoji:"",name:"clinking beer mugs",slug:"clinking_beer_mugs"},{emoji:"",name:"clinking glasses",slug:"clinking_glasses"},{emoji:"",name:"tumbler glass",slug:"tumbler_glass"},{emoji:"",name:"pouring liquid",slug:"pouring_liquid"},{emoji:"",name:"cup with straw",slug:"cup_with_straw"},{emoji:"",name:"bubble tea",slug:"bubble_tea"},{emoji:"",name:"beverage box",slug:"beverage_box"},{emoji:"",name:"mate",slug:"mate"},{emoji:"",name:"ice",slug:"ice"},{emoji:"",name:"chopsticks",slug:"chopsticks"},{emoji:"",name:"fork and knife with plate",slug:"fork_and_knife_with_plate"},{emoji:"",name:"fork and knife",slug:"fork_and_knife"},{emoji:"",name:"spoon",slug:"spoon"},{emoji:"",name:"kitchen knife",slug:"kitchen_knife"},{emoji:"",name:"jar",slug:"jar"},{emoji:"",name:"amphora",slug:"amphora"}]},{name:"Travel & Places",slug:"travel_places",emojis:[{emoji:"",name:"globe showing Europe-Africa",slug:"globe_showing_europe_africa_Africa_earth_Europe_world"},{emoji:"",name:"globe showing Americas",slug:"globe_showing_americas_Americas_earth_globe_world "},{emoji:"",name:"globe showing Asia-Australia",slug:"globe_showing_asia_australia_Asia_Australia_earth_world"},{emoji:"",name:"globe with meridians",slug:"globe_with_meridians_world_earth"},{emoji:"",name:"world map",slug:"world_map"},{emoji:"",name:"map of Japan",slug:"map_of_japan"},{emoji:"",name:"compass",slug:"compass_navigation_orientation_magnetic"},{emoji:"",name:"snow-capped mountain",slug:"snow_capped_mountain"},{emoji:"",name:"mountain",slug:"mountain"},{emoji:"",name:"volcano",slug:"volcano"},{emoji:"",name:"mount fuji",slug:"mount_fuji"},{emoji:"",name:"camping",slug:"camping"},{emoji:"",name:"beach with umbrella",slug:"beach_with_umbrella"},{emoji:"",name:"desert",slug:"desert"},{emoji:"",name:"desert island",slug:"desert_island"},{emoji:"",name:"national park",slug:"national_park"},{emoji:"",name:"stadium",slug:"stadium"},{emoji:"",name:"classical building",slug:"classical_building"},{emoji:"",name:"building construction",slug:"building_construction"},{emoji:"",name:"brick",slug:"brick"},{emoji:"",name:"rock",slug:"rock"},{emoji:"",name:"wood",slug:"wood"},{emoji:"",name:"hut",slug:"hut"},{emoji:"",name:"houses",slug:"houses"},{emoji:"",name:"derelict house",slug:"derelict_house"},{emoji:"",name:"house",slug:"house"},{emoji:"",name:"house with garden",slug:"house_with_garden"},{emoji:"",name:"office building",slug:"office_building"},{emoji:"",name:"Japanese post office",slug:"japanese_post_office"},{emoji:"",name:"post office",slug:"post_office"},{emoji:"",name:"hospital",slug:"hospital"},{emoji:"",name:"bank",slug:"bank"},{emoji:"",name:"hotel",slug:"hotel"},{emoji:"",name:"love hotel",slug:"love_hotel"},{emoji:"",name:"convenience store",slug:"convenience_store"},{emoji:"",name:"school",slug:"school"},{emoji:"",name:"department store",slug:"department_store"},{emoji:"",name:"factory",slug:"factory"},{emoji:"",name:"Japanese castle",slug:"japanese_castle"},{emoji:"",name:"castle",slug:"castle"},{emoji:"",name:"wedding",slug:"wedding"},{emoji:"",name:"Tokyo tower",slug:"tokyo_tower"},{emoji:"",name:"Statue of Liberty",slug:"statue_of_liberty"},{emoji:"",name:"church",slug:"church"},{emoji:"",name:"mosque",slug:"mosque"},{emoji:"",name:"hindu temple",slug:"hindu_temple"},{emoji:"",name:"synagogue",slug:"synagogue"},{emoji:"",name:"shinto shrine",slug:"shinto_shrine"},{emoji:"",name:"kaaba",slug:"kaaba"},{emoji:"",name:"fountain",slug:"fountain"},{emoji:"",name:"tent",slug:"tent"},{emoji:"",name:"foggy",slug:"foggy"},{emoji:"",name:"night with stars",slug:"night_with_stars"},{emoji:"",name:"cityscape",slug:"cityscape"},{emoji:"",name:"sunrise over mountains",slug:"sunrise_over_mountains"},{emoji:"",name:"sunrise",slug:"sunrise"},{emoji:"",name:"cityscape at dusk",slug:"cityscape_at_dusk"},{emoji:"",name:"sunset",slug:"sunset"},{emoji:"",name:"bridge at night",slug:"bridge_at_night"},{emoji:"",name:"hot springs",slug:"hot_springs"},{emoji:"",name:"carousel horse",slug:"carousel_horse"},{emoji:"",name:"playground slide",slug:"playground_slide"},{emoji:"",name:"ferris wheel",slug:"ferris_wheel"},{emoji:"",name:"roller coaster",slug:"roller_coaster"},{emoji:"",name:"barber pole",slug:"barber_pole"},{emoji:"",name:"circus tent",slug:"circus_tent"},{emoji:"",name:"locomotive",slug:"locomotive"},{emoji:"",name:"railway car",slug:"railway_car"},{emoji:"",name:"high-speed train",slug:"high_speed_train"},{emoji:"",name:"bullet train",slug:"bullet_train"},{emoji:"",name:"train",slug:"train"},{emoji:"",name:"metro",slug:"metro"},{emoji:"",name:"light rail",slug:"light_rail"},{emoji:"",name:"station",slug:"station"},{emoji:"",name:"tram",slug:"tram"},{emoji:"",name:"monorail",slug:"monorail"},{emoji:"",name:"mountain railway",slug:"mountain_railway"},{emoji:"",name:"tram car",slug:"tram_car"},{emoji:"",name:"bus",slug:"bus"},{emoji:"",name:"oncoming bus",slug:"oncoming_bus"},{emoji:"",name:"trolleybus",slug:"trolleybus"},{emoji:"",name:"minibus",slug:"minibus"},{emoji:"",name:"ambulance",slug:"ambulance"},{emoji:"",name:"fire engine",slug:"fire_engine"},{emoji:"",name:"police car",slug:"police_car"},{emoji:"",name:"oncoming police car",slug:"oncoming_police_car"},{emoji:"",name:"taxi",slug:"taxi"},{emoji:"",name:"oncoming taxi",slug:"oncoming_taxi"},{emoji:"",name:"automobile",slug:"automobile"},{emoji:"",name:"oncoming automobile",slug:"oncoming_automobile"},{emoji:"",name:"sport utility vehicle",slug:"sport_utility_vehicle"},{emoji:"",name:"pickup truck",slug:"pickup_truck"},{emoji:"",name:"delivery truck",slug:"delivery_truck"},{emoji:"",name:"articulated lorry",slug:"articulated_lorry"},{emoji:"",name:"tractor",slug:"tractor"},{emoji:"",name:"racing car",slug:"racing_car"},{emoji:"",name:"motorcycle",slug:"motorcycle"},{emoji:"",name:"motor scooter",slug:"motor_scooter"},{emoji:"",name:"manual wheelchair",slug:"manual_wheelchair"},{emoji:"",name:"motorized wheelchair",slug:"motorized_wheelchair"},{emoji:"",name:"auto rickshaw",slug:"auto_rickshaw"},{emoji:"",name:"bicycle",slug:"bicycle"},{emoji:"",name:"kick scooter",slug:"kick_scooter"},{emoji:"",name:"skateboard",slug:"skateboard"},{emoji:"",name:"roller skate",slug:"roller_skate"},{emoji:"",name:"bus stop",slug:"bus_stop"},{emoji:"",name:"motorway",slug:"motorway"},{emoji:"",name:"railway track",slug:"railway_track"},{emoji:"",name:"oil drum",slug:"oil_drum"},{emoji:"",name:"fuel pump",slug:"fuel_pump"},{emoji:"",name:"wheel",slug:"wheel"},{emoji:"",name:"police car light",slug:"police_car_light"},{emoji:"",name:"horizontal traffic light",slug:"horizontal_traffic_light"},{emoji:"",name:"vertical traffic light",slug:"vertical_traffic_light"},{emoji:"",name:"stop sign",slug:"stop_sign"},{emoji:"",name:"construction",slug:"construction"},{emoji:"",name:"anchor",slug:"anchor"},{emoji:"",name:"ring buoy",slug:"ring_buoy"},{emoji:"",name:"sailboat",slug:"sailboat"},{emoji:"",name:"canoe",slug:"canoe"},{emoji:"",name:"speedboat",slug:"speedboat"},{emoji:"",name:"passenger ship",slug:"passenger_ship"},{emoji:"",name:"ferry",slug:"ferry"},{emoji:"",name:"motor boat",slug:"motor_boat"},{emoji:"",name:"ship",slug:"ship"},{emoji:"",name:"airplane",slug:"airplane"},{emoji:"",name:"small airplane",slug:"small_airplane"},{emoji:"",name:"airplane departure",slug:"airplane_departure"},{emoji:"",name:"airplane arrival",slug:"airplane_arrival"},{emoji:"",name:"parachute",slug:"parachute"},{emoji:"",name:"seat",slug:"seat"},{emoji:"",name:"helicopter",slug:"helicopter"},{emoji:"",name:"suspension railway",slug:"suspension_railway"},{emoji:"",name:"mountain cableway",slug:"mountain_cableway"},{emoji:"",name:"aerial tramway",slug:"aerial_tramway"},{emoji:"",name:"satellite",slug:"satellite"},{emoji:"",name:"rocket",slug:"rocket"},{emoji:"",name:"flying saucer",slug:"flying_saucer"},{emoji:"",name:"bellhop bell",slug:"bellhop_bell"},{emoji:"",name:"luggage",slug:"luggage"},{emoji:"",name:"hourglass done",slug:"hourglass_done"},{emoji:"",name:"hourglass not done",slug:"hourglass_not_done"},{emoji:"",name:"watch",slug:"watch_clock"},{emoji:"",name:"alarm clock",slug:"alarm_clock"},{emoji:"",name:"stopwatch",slug:"stopwatch"},{emoji:"",name:"timer clock",slug:"timer_clock"},{emoji:"",name:"mantelpiece clock",slug:"mantelpiece_clock"},{emoji:"",name:"twelve oclock",slug:"twelve_o_clock_00_12_12:00"},{emoji:"",name:"twelve-thirty",slug:"twelve_thirty_12_12:30"},{emoji:"",name:"one oclock",slug:"one_o_clock_00_1_1:00"},{emoji:"",name:"one-thirty",slug:"one_thirty_1_1:30"},{emoji:"",name:"two oclock",slug:"two_o_clock_00_2_2:00"},{emoji:"",name:"two-thirty",slug:"two_thirty_2_2:30"},{emoji:"",name:"three oclock",slug:"three_o_clock_00_3_3:00"},{emoji:"",name:"three-thirty",slug:"three_thirty_3_3:30"},{emoji:"",name:"four oclock",slug:"four_o_clock_00_4_4:00"},{emoji:"",name:"four-thirty",slug:"four_thirty_4_4:30"},{emoji:"",name:"five oclock",slug:"five_o_clock_00_5_5:00"},{emoji:"",name:"five-thirty",slug:"five_thirty_5_5:30"},{emoji:"",name:"six oclock",slug:"six_o_clock_00_6_6:00"},{emoji:"",name:"six-thirty",slug:"six_thirty_6_6:30"},{emoji:"",name:"seven oclock",slug:"seven_o_clock_00_7_7:00"},{emoji:"",name:"seven-thirty",slug:"seven_thirty_7_7:30"},{emoji:"",name:"eight oclock",slug:"eight_o_clock_00_8_8:00"},{emoji:"",name:"eight-thirty",slug:"eight_thirty_8_8:30"},{emoji:"",name:"nine oclock",slug:"nine_o_clock_00_9_9:00"},{emoji:"",name:"nine-thirty",slug:"nine_thirty_9_9:30"},{emoji:"",name:"ten oclock",slug:"ten_o_clock_00_10_10:00"},{emoji:"",name:"ten-thirty",slug:"ten_thirty_10_10:30"},{emoji:"",name:"eleven oclock",slug:"eleven_o_clock_00_11_11:00"},{emoji:"",name:"eleven-thirty",slug:"eleven_thirty_11_11:30"},{emoji:"",name:"new moon",slug:"new_moon_dark"},{emoji:"",name:"waxing crescent moon",slug:"waxing_crescent_moon"},{emoji:"",name:"first quarter moon",slug:"first_quarter_moon"},{emoji:"",name:"waxing gibbous moon",slug:"waxing_gibbous_moon"},{emoji:"",name:"full moon",slug:"full_moon"},{emoji:"",name:"waning gibbous moon",slug:"waning_gibbous_moon"},{emoji:"",name:"last quarter moon",slug:"last_quarter_moon"},{emoji:"",name:"waning crescent moon",slug:"waning_crescent_moon"},{emoji:"",name:"crescent moon",slug:"crescent_moon"},{emoji:"",name:"new moon face",slug:"new_moon_face"},{emoji:"",name:"first quarter moon face",slug:"first_quarter_moon_face"},{emoji:"",name:"last quarter moon face",slug:"last_quarter_moon_face"},{emoji:"",name:"thermometer",slug:"thermometer"},{emoji:"",name:"sun",slug:"sun"},{emoji:"",name:"full moon face",slug:"full_moon_face"},{emoji:"",name:"sun with face",slug:"sun_with_face"},{emoji:"",name:"ringed planet",slug:"ringed_planet"},{emoji:"",name:"star",slug:"star"},{emoji:"",name:"glowing star",slug:"glowing_star"},{emoji:"",name:"shooting star",slug:"shooting_star"},{emoji:"",name:"milky way",slug:"milky_way"},{emoji:"",name:"cloud",slug:"cloud"},{emoji:"",name:"sun behind cloud",slug:"sun_behind_cloud"},{emoji:"",name:"cloud with lightning and rain",slug:"cloud_with_lightning_and_rain"},{emoji:"",name:"sun behind small cloud",slug:"sun_behind_small_cloud"},{emoji:"",name:"sun behind large cloud",slug:"sun_behind_large_cloud"},{emoji:"",name:"sun behind rain cloud",slug:"sun_behind_rain_cloud"},{emoji:"",name:"cloud with rain",slug:"cloud_with_rain"},{emoji:"",name:"cloud with snow",slug:"cloud_with_snow"},{emoji:"",name:"cloud with lightning",slug:"cloud_with_lightning"},{emoji:"",name:"tornado",slug:"tornado"},{emoji:"",name:"fog",slug:"fog"},{emoji:"",name:"wind face",slug:"wind_face"},{emoji:"",name:"cyclone",slug:"cyclone"},{emoji:"",name:"rainbow",slug:"rainbow"},{emoji:"",name:"closed umbrella",slug:"closed_umbrella"},{emoji:"",name:"umbrella",slug:"umbrella"},{emoji:"",name:"umbrella with rain drops",slug:"umbrella_with_rain_drops"},{emoji:"",name:"umbrella on ground",slug:"umbrella_on_ground"},{emoji:"",name:"high voltage",slug:"high_voltage"},{emoji:"",name:"snowflake",slug:"snowflake"},{emoji:"",name:"snowman",slug:"snowman"},{emoji:"",name:"snowman without snow",slug:"snowman_without_snow"},{emoji:"",name:"comet",slug:"comet"},{emoji:"",name:"fire",slug:"fire"},{emoji:"",name:"droplet",slug:"droplet"},{emoji:"",name:"water wave",slug:"water_wave"}]},{name:"Activities",slug:"activities",emojis:[{emoji:"",name:"jack-o-lantern",slug:"jack_o_lantern_halloween_jack"},{emoji:"",name:"Christmas tree",slug:"christmas_tree"},{emoji:"",name:"fireworks",slug:"fireworks_celebration"},{emoji:"",name:"sparkler",slug:"sparkler_celebration"},{emoji:"",name:"firecracker",slug:"firecracker_explosive"},{emoji:"",name:"sparkles",slug:"sparkles_star"},{emoji:"",name:"balloon",slug:"balloon"},{emoji:"",name:"party popper",slug:"party_popper_celebration"},{emoji:"",name:"confetti ball",slug:"confetti_ball_celebration"},{emoji:"",name:"tanabata tree",slug:"tanabata_tree"},{emoji:"",name:"pine decoration",slug:"pine_decoration"},{emoji:"",name:"Japanese dolls",slug:"japanese_dolls"},{emoji:"",name:"carp streamer",slug:"carp_streamer"},{emoji:"",name:"wind chime",slug:"wind_chime"},{emoji:"",name:"moon viewing ceremony",slug:"moon_viewing_ceremony"},{emoji:"",name:"red envelope",slug:"red_envelope"},{emoji:"",name:"ribbon",slug:"ribbon_celebration"},{emoji:"",name:"wrapped gift",slug:"wrapped_gift"},{emoji:"",name:"reminder ribbon",slug:"reminder_ribbon"},{emoji:"",name:"admission tickets",slug:"admission_tickets"},{emoji:"",name:"ticket",slug:"ticket"},{emoji:"",name:"military medal",slug:"military_medal"},{emoji:"",name:"trophy",slug:"trophy"},{emoji:"",name:"sports medal",slug:"sports_medal"},{emoji:"",name:"1st place medal",slug:"1st_place_medal"},{emoji:"",name:"2nd place medal",slug:"2nd_place_medal"},{emoji:"",name:"3rd place medal",slug:"3rd_place_medal"},{emoji:"",name:"soccer ball",slug:"soccer_ball"},{emoji:"",name:"baseball",slug:"baseball"},{emoji:"",name:"softball",slug:"softball"},{emoji:"",name:"basketball",slug:"basketball"},{emoji:"",name:"volleyball",slug:"volleyball"},{emoji:"",name:"american football",slug:"american_football"},{emoji:"",name:"rugby football",slug:"rugby_football"},{emoji:"",name:"tennis",slug:"tennis"},{emoji:"",name:"flying disc",slug:"flying_disc"},{emoji:"",name:"bowling",slug:"bowling"},{emoji:"",name:"cricket game",slug:"cricket_game"},{emoji:"",name:"field hockey",slug:"field_hockey"},{emoji:"",name:"ice hockey",slug:"ice_hockey"},{emoji:"",name:"lacrosse",slug:"lacrosse"},{emoji:"",name:"ping pong",slug:"ping_pong"},{emoji:"",name:"badminton",slug:"badminton"},{emoji:"",name:"boxing glove",slug:"boxing_glove"},{emoji:"",name:"martial arts uniform",slug:"martial_arts_uniform"},{emoji:"",name:"goal net",slug:"goal_net"},{emoji:"",name:"flag in hole",slug:"flag_in_hole"},{emoji:"",name:"ice skate",slug:"ice_skate"},{emoji:"",name:"fishing pole",slug:"fishing_pole"},{emoji:"",name:"diving mask",slug:"diving_mask"},{emoji:"",name:"running shirt",slug:"running_shirt"},{emoji:"",name:"skis",slug:"skis"},{emoji:"",name:"sled",slug:"sled"},{emoji:"",name:"curling stone",slug:"curling_stone"},{emoji:"",name:"bullseye",slug:"bullseye"},{emoji:"",name:"yo-yo",slug:"yo_yo"},{emoji:"",name:"kite",slug:"kite"},{emoji:"",name:"water pistol",slug:"water_pistol"},{emoji:"",name:"pool 8 ball",slug:"pool_8_ball"},{emoji:"",name:"crystal ball",slug:"crystal_ball"},{emoji:"",name:"magic wand",slug:"magic_wand"},{emoji:"",name:"video game",slug:"video_game"},{emoji:"",name:"joystick",slug:"joystick"},{emoji:"",name:"slot machine",slug:"slot_machine"},{emoji:"",name:"game die",slug:"game_die"},{emoji:"",name:"puzzle piece",slug:"puzzle_piece"},{emoji:"",name:"teddy bear",slug:"teddy_bear"},{emoji:"",name:"piata",slug:"pinata"},{emoji:"",name:"mirror ball",slug:"mirror_ball"},{emoji:"",name:"nesting dolls",slug:"nesting_dolls"},{emoji:"",name:"spade suit",slug:"spade_suit"},{emoji:"",name:"heart suit",slug:"heart_suit"},{emoji:"",name:"diamond suit",slug:"diamond_suit"},{emoji:"",name:"club suit",slug:"club_suit"},{emoji:"",name:"chess pawn",slug:"chess_pawn"},{emoji:"",name:"joker",slug:"joker"},{emoji:"",name:"mahjong red dragon",slug:"mahjong_red_dragon"},{emoji:"",name:"flower playing cards",slug:"flower_playing_cards"},{emoji:"",name:"performing arts",slug:"performing_arts"},{emoji:"",name:"framed picture",slug:"framed_picture"},{emoji:"",name:"artist palette",slug:"artist_palette"},{emoji:"",name:"thread",slug:"thread"},{emoji:"",name:"sewing needle",slug:"sewing_needle"},{emoji:"",name:"yarn",slug:"yarn"},{emoji:"",name:"knot",slug:"knot"}]},{name:"Objects",slug:"objects",emojis:[{emoji:"",name:"glasses",slug:"glasses"},{emoji:"",name:"sunglasses",slug:"sunglasses"},{emoji:"",name:"goggles",slug:"goggles"},{emoji:"",name:"lab coat",slug:"lab_coat"},{emoji:"",name:"safety vest",slug:"safety_vest"},{emoji:"",name:"necktie",slug:"necktie"},{emoji:"",name:"t-shirt",slug:"t_shirt"},{emoji:"",name:"jeans",slug:"jeans"},{emoji:"",name:"scarf",slug:"scarf"},{emoji:"",name:"gloves",slug:"gloves"},{emoji:"",name:"coat",slug:"coat"},{emoji:"",name:"socks",slug:"socks"},{emoji:"",name:"dress",slug:"dress"},{emoji:"",name:"kimono",slug:"kimono"},{emoji:"",name:"sari",slug:"sari"},{emoji:"",name:"one-piece swimsuit",slug:"one_piece_swimsuit"},{emoji:"",name:"briefs",slug:"briefs"},{emoji:"",name:"shorts",slug:"shorts"},{emoji:"",name:"bikini",slug:"bikini"},{emoji:"",name:"womans clothes",slug:"woman_s_clothes"},{emoji:"",name:"purse",slug:"purse"},{emoji:"",name:"handbag",slug:"handbag"},{emoji:"",name:"clutch bag",slug:"clutch_bag"},{emoji:"",name:"shopping bags",slug:"shopping_bags"},{emoji:"",name:"backpack",slug:"backpack"},{emoji:"",name:"thong sandal",slug:"thong_sandal"},{emoji:"",name:"mans shoe",slug:"man_s_shoe"},{emoji:"",name:"running shoe",slug:"running_shoe"},{emoji:"",name:"hiking boot",slug:"hiking_boot"},{emoji:"",name:"flat shoe",slug:"flat_shoe"},{emoji:"",name:"high-heeled shoe",slug:"high_heeled_shoe"},{emoji:"",name:"womans sandal",slug:"woman_s_sandal"},{emoji:"",name:"ballet shoes",slug:"ballet_shoes"},{emoji:"",name:"womans boot",slug:"woman_s_boot"},{emoji:"",name:"crown",slug:"crown"},{emoji:"",name:"womans hat",slug:"woman_s_hat"},{emoji:"",name:"top hat",slug:"top_hat"},{emoji:"",name:"graduation cap",slug:"graduation_cap"},{emoji:"",name:"billed cap",slug:"billed_cap"},{emoji:"",name:"military helmet",slug:"military_helmet"},{emoji:"",name:"rescue workers helmet",slug:"rescue_worker_s_helmet"},{emoji:"",name:"prayer beads",slug:"prayer_beads"},{emoji:"",name:"lipstick",slug:"lipstick"},{emoji:"",name:"ring",slug:"ring"},{emoji:"",name:"gem stone",slug:"gem_stone"},{emoji:"",name:"muted speaker",slug:"muted_speaker"},{emoji:"",name:"speaker low volume",slug:"speaker_low_volume"},{emoji:"",name:"speaker medium volume",slug:"speaker_medium_volume"},{emoji:"",name:"speaker high volume",slug:"speaker_high_volume"},{emoji:"",name:"loudspeaker",slug:"loudspeaker"},{emoji:"",name:"megaphone",slug:"megaphone"},{emoji:"",name:"postal horn",slug:"postal_horn"},{emoji:"",name:"bell",slug:"bell"},{emoji:"",name:"bell with slash",slug:"bell_with_slash"},{emoji:"",name:"musical score",slug:"musical_score"},{emoji:"",name:"musical note",slug:"musical_note"},{emoji:"",name:"musical notes",slug:"musical_notes"},{emoji:"",name:"studio microphone",slug:"studio_microphone"},{emoji:"",name:"level slider",slug:"level_slider"},{emoji:"",name:"control knobs",slug:"control_knobs"},{emoji:"",name:"microphone",slug:"microphone"},{emoji:"",name:"headphone",slug:"headphone"},{emoji:"",name:"radio",slug:"radio"},{emoji:"",name:"saxophone",slug:"saxophone"},{emoji:"",name:"accordion",slug:"accordion"},{emoji:"",name:"guitar",slug:"guitar"},{emoji:"",name:"musical keyboard",slug:"musical_keyboard"},{emoji:"",name:"trumpet",slug:"trumpet"},{emoji:"",name:"violin",slug:"violin"},{emoji:"",name:"banjo",slug:"banjo"},{emoji:"",name:"drum",slug:"drum"},{emoji:"",name:"long drum",slug:"long_drum"},{emoji:"",name:"mobile phone",slug:"mobile_phone"},{emoji:"",name:"mobile phone with arrow",slug:"mobile_phone_with_arrow"},{emoji:"",name:"telephone",slug:"telephone"},{emoji:"",name:"telephone receiver",slug:"telephone_receiver"},{emoji:"",name:"pager",slug:"pager"},{emoji:"",name:"fax machine",slug:"fax_machine"},{emoji:"",name:"battery",slug:"battery"},{emoji:"",name:"low battery",slug:"low_battery"},{emoji:"",name:"electric plug",slug:"electric_plug"},{emoji:"",name:"laptop",slug:"laptop"},{emoji:"",name:"desktop computer",slug:"desktop_computer"},{emoji:"",name:"printer",slug:"printer"},{emoji:"",name:"keyboard",slug:"keyboard"},{emoji:"",name:"computer mouse",slug:"computer_mouse"},{emoji:"",name:"trackball",slug:"trackball"},{emoji:"",name:"computer disk",slug:"computer_disk"},{emoji:"",name:"floppy disk",slug:"floppy_disk"},{emoji:"",name:"optical disk",slug:"optical_disk"},{emoji:"",name:"dvd",slug:"dvd"},{emoji:"",name:"abacus",slug:"abacus"},{emoji:"",name:"movie camera",slug:"movie_camera"},{emoji:"",name:"film frames",slug:"film_frames"},{emoji:"",name:"film projector",slug:"film_projector"},{emoji:"",name:"clapper board",slug:"clapper_board"},{emoji:"",name:"television",slug:"television"},{emoji:"",name:"camera",slug:"camera"},{emoji:"",name:"camera with flash",slug:"camera_with_flash"},{emoji:"",name:"video camera",slug:"video_camera"},{emoji:"",name:"videocassette",slug:"videocassette"},{emoji:"",name:"magnifying glass tilted left",slug:"magnifying_glass_tilted_left"},{emoji:"",name:"magnifying glass tilted right",slug:"magnifying_glass_tilted_right"},{emoji:"",name:"candle",slug:"candle"},{emoji:"",name:"light bulb",slug:"light_bulb"},{emoji:"",name:"flashlight",slug:"flashlight"},{emoji:"",name:"red paper lantern",slug:"red_paper_lantern"},{emoji:"",name:"diya lamp",slug:"diya_lamp"},{emoji:"",name:"notebook with decorative cover",slug:"notebook_with_decorative_cover"},{emoji:"",name:"closed book",slug:"closed_book"},{emoji:"",name:"open book",slug:"open_book"},{emoji:"",name:"green book",slug:"green_book"},{emoji:"",name:"blue book",slug:"blue_book"},{emoji:"",name:"orange book",slug:"orange_book"},{emoji:"",name:"books",slug:"books"},{emoji:"",name:"notebook",slug:"notebook"},{emoji:"",name:"ledger",slug:"ledger"},{emoji:"",name:"page with curl",slug:"page_with_curl"},{emoji:"",name:"scroll",slug:"scroll"},{emoji:"",name:"page facing up",slug:"page_facing_up"},{emoji:"",name:"newspaper",slug:"newspaper"},{emoji:"",name:"rolled-up newspaper",slug:"rolled_up_newspaper"},{emoji:"",name:"bookmark tabs",slug:"bookmark_tabs"},{emoji:"",name:"bookmark",slug:"bookmark"},{emoji:"",name:"label",slug:"label"},{emoji:"",name:"money bag",slug:"money_bag"},{emoji:"",name:"coin",slug:"coin"},{emoji:"",name:"yen banknote",slug:"yen_banknote"},{emoji:"",name:"dollar banknote",slug:"dollar_banknote"},{emoji:"",name:"euro banknote",slug:"euro_banknote"},{emoji:"",name:"pound banknote",slug:"pound_banknote"},{emoji:"",name:"money with wings",slug:"money_with_wings"},{emoji:"",name:"credit card",slug:"credit_card"},{emoji:"",name:"receipt",slug:"receipt"},{emoji:"",name:"chart increasing with yen",slug:"chart_increasing_with_yen"},{emoji:"",name:"envelope",slug:"envelope_email_letter"},{emoji:"",name:"e-mail",slug:"e_mail_email"},{emoji:"",name:"incoming envelope",slug:"incoming_envelope"},{emoji:"",name:"envelope with arrow",slug:"envelope_with_arrow_email_letter"},{emoji:"",name:"outbox tray",slug:"outbox_tray_sent"},{emoji:"",name:"inbox tray",slug:"inbox_tray_receive"},{emoji:"",name:"package",slug:"package_parcel_box"},{emoji:"",name:"closed mailbox with raised flag",slug:"closed_mailbox_with_raised_flag"},{emoji:"",name:"closed mailbox with lowered flag",slug:"closed_mailbox_with_lowered_flag"},{emoji:"",name:"open mailbox with raised flag",slug:"open_mailbox_with_raised_flag"},{emoji:"",name:"open mailbox with lowered flag",slug:"open_mailbox_with_lowered_flag"},{emoji:"",name:"postbox",slug:"postbox"},{emoji:"",name:"ballot box with ballot",slug:"ballot_box_with_ballot"},{emoji:"",name:"pencil",slug:"pencil"},{emoji:"",name:"black nib",slug:"black_nib"},{emoji:"",name:"fountain pen",slug:"fountain_pen"},{emoji:"",name:"pen",slug:"pen"},{emoji:"",name:"paintbrush",slug:"paintbrush"},{emoji:"",name:"crayon",slug:"crayon"},{emoji:"",name:"memo",slug:"memo"},{emoji:"",name:"briefcase",slug:"briefcase"},{emoji:"",name:"file folder",slug:"file_folder"},{emoji:"",name:"open file folder",slug:"open_file_folder"},{emoji:"",name:"card index dividers",slug:"card_index_dividers"},{emoji:"",name:"calendar",slug:"calendar"},{emoji:"",name:"tear-off calendar",slug:"tear_off_calendar"},{emoji:"",name:"spiral notepad",slug:"spiral_notepad"},{emoji:"",name:"spiral calendar",slug:"spiral_calendar"},{emoji:"",name:"card index",slug:"card_index"},{emoji:"",name:"chart increasing",slug:"chart_increasing"},{emoji:"",name:"chart decreasing",slug:"chart_decreasing"},{emoji:"",name:"bar chart",slug:"bar_chart"},{emoji:"",name:"clipboard",slug:"clipboard"},{emoji:"",name:"pushpin",slug:"pushpin"},{emoji:"",name:"round pushpin",slug:"round_pushpin"},{emoji:"",name:"paperclip",slug:"paperclip"},{emoji:"",name:"linked paperclips",slug:"linked_paperclips"},{emoji:"",name:"straight ruler",slug:"straight_ruler"},{emoji:"",name:"triangular ruler",slug:"triangular_ruler"},{emoji:"",name:"scissors",slug:"scissors"},{emoji:"",name:"card file box",slug:"card_file_box"},{emoji:"",name:"file cabinet",slug:"file_cabinet"},{emoji:"",name:"wastebasket",slug:"wastebasket"},{emoji:"",name:"locked",slug:"locked"},{emoji:"",name:"unlocked",slug:"unlocked"},{emoji:"",name:"locked with pen",slug:"locked_with_pen"},{emoji:"",name:"locked with key",slug:"locked_with_key"},{emoji:"",name:"key",slug:"key"},{emoji:"",name:"old key",slug:"old_key"},{emoji:"",name:"hammer",slug:"hammer_tool"},{emoji:"",name:"axe",slug:"axe"},{emoji:"",name:"pick",slug:"pick_tool"},{emoji:"",name:"hammer and pick",slug:"hammer_and_pick_tool"},{emoji:"",name:"hammer and wrench",slug:"hammer_and_wrench_tool"},{emoji:"",name:"dagger",slug:"dagger_knife_weapon"},{emoji:"",name:"crossed swords",slug:"crossed_swords_weapon"},{emoji:"",name:"bomb",slug:"bomb_comic"},{emoji:"",name:"boomerang",slug:"boomerang"},{emoji:"",name:"bow and arrow",slug:"bow_and_arrow"},{emoji:"",name:"shield",slug:"shield"},{emoji:"",name:"carpentry saw",slug:"carpentry_saw"},{emoji:"",name:"wrench",slug:"wrench_tool"},{emoji:"",name:"screwdriver",slug:"screwdriver_tool"},{emoji:"",name:"nut and bolt",slug:"nut_and_bolt_tool"},{emoji:"",name:"gear",slug:"gear_tool"},{emoji:"",name:"clamp",slug:"clamp_tool"},{emoji:"",name:"balance scale",slug:"balance_scale_justice"},{emoji:"",name:"white cane",slug:"white_cane"},{emoji:"",name:"link",slug:"link"},{emoji:"",name:"chains",slug:"chains"},{emoji:"",name:"hook",slug:"hook"},{emoji:"",name:"toolbox",slug:"toolbox"},{emoji:"",name:"magnet",slug:"magnet"},{emoji:"",name:"ladder",slug:"ladder"},{emoji:"",name:"alembic",slug:"alembic"},{emoji:"",name:"test tube",slug:"test_tube"},{emoji:"",name:"petri dish",slug:"petri_dish"},{emoji:"",name:"dna",slug:"dna"},{emoji:"",name:"microscope",slug:"microscope"},{emoji:"",name:"telescope",slug:"telescope"},{emoji:"",name:"satellite antenna",slug:"satellite_antenna"},{emoji:"",name:"syringe",slug:"syringe"},{emoji:"",name:"drop of blood",slug:"drop_of_blood"},{emoji:"",name:"pill",slug:"pill_medical_medicine_sick"},{emoji:"",name:"adhesive bandage",slug:"adhesive_bandage"},{emoji:"",name:"crutch",slug:"crutch"},{emoji:"",name:"stethoscope",slug:"stethoscope"},{emoji:"",name:"x-ray",slug:"x_ray"},{emoji:"",name:"door",slug:"door"},{emoji:"",name:"elevator",slug:"elevator"},{emoji:"",name:"mirror",slug:"mirror"},{emoji:"",name:"window",slug:"window"},{emoji:"",name:"bed",slug:"bed"},{emoji:"",name:"couch and lamp",slug:"couch_and_lamp"},{emoji:"",name:"chair",slug:"chair"},{emoji:"",name:"toilet",slug:"toilet"},{emoji:"",name:"plunger",slug:"plunger"},{emoji:"",name:"shower",slug:"shower"},{emoji:"",name:"bathtub",slug:"bathtub"},{emoji:"",name:"mouse trap",slug:"mouse_trap"},{emoji:"",name:"razor",slug:"razor"},{emoji:"",name:"lotion bottle",slug:"lotion_bottle"},{emoji:"",name:"safety pin",slug:"safety_pin"},{emoji:"",name:"broom",slug:"broom"},{emoji:"",name:"basket",slug:"basket"},{emoji:"",name:"roll of paper",slug:"roll_of_paper"},{emoji:"",name:"bucket",slug:"bucket"},{emoji:"",name:"soap",slug:"soap"},{emoji:"",name:"bubbles",slug:"bubbles"},{emoji:"",name:"toothbrush",slug:"toothbrush"},{emoji:"",name:"sponge",slug:"sponge"},{emoji:"",name:"fire extinguisher",slug:"fire_extinguisher"},{emoji:"",name:"shopping cart",slug:"shopping_cart"},{emoji:"",name:"cigarette",slug:"cigarette"},{emoji:"",name:"coffin",slug:"coffin"},{emoji:"",name:"headstone",slug:"headstone"},{emoji:"",name:"funeral urn",slug:"funeral_urn"},{emoji:"",name:"nazar amulet",slug:"nazar_amulet"},{emoji:"",name:"hamsa",slug:"hamsa"},{emoji:"",name:"moai",slug:"moai"},{emoji:"",name:"placard",slug:"placard"},{emoji:"",name:"identification card",slug:"identification_card"}]},{name:"Symbols",slug:"symbols",emojis:[{emoji:"",name:"ATM sign",slug:"atm_sign_bank_automated_teller_machine"},{emoji:"",name:"litter in bin sign",slug:"litter_in_bin_sign"},{emoji:"",name:"potable water",slug:"potable_water"},{emoji:"",name:"wheelchair symbol",slug:"wheelchair_symbol"},{emoji:"",name:"mens room",slug:"men_s_room_bathroom"},{emoji:"",name:"womens room",slug:"women_s_room_bathroom"},{emoji:"",name:"restroom",slug:"restroom"},{emoji:"",name:"baby symbol",slug:"baby_symbol"},{emoji:"",name:"water closet",slug:"water_closet"},{emoji:"",name:"passport control",slug:"passport_control"},{emoji:"",name:"customs",slug:"customs"},{emoji:"",name:"baggage claim",slug:"baggage_claim"},{emoji:"",name:"left luggage",slug:"left_luggage"},{emoji:"",name:"warning",slug:"warning"},{emoji:"",name:"children crossing",slug:"children_crossing"},{emoji:"",name:"no entry",slug:"no_entry"},{emoji:"",name:"prohibited",slug:"prohibited"},{emoji:"",name:"no bicycles",slug:"no_bicycles"},{emoji:"",name:"no smoking",slug:"no_smoking"},{emoji:"",name:"no littering",slug:"no_littering"},{emoji:"",name:"non-potable water",slug:"non_potable_water"},{emoji:"",name:"no pedestrians",slug:"no_pedestrians"},{emoji:"",name:"no mobile phones",slug:"no_mobile_phones"},{emoji:"",name:"no one under eighteen",slug:"no_one_under_eighteen_18_age_limit_prohibited"},{emoji:"",name:"radioactive",slug:"radioactive"},{emoji:"",name:"biohazard",slug:"biohazard"},{emoji:"",name:"up arrow",slug:"up_arrow"},{emoji:"",name:"up-right arrow",slug:"up_right_arrow"},{emoji:"",name:"right arrow",slug:"right_arrow"},{emoji:"",name:"down-right arrow",slug:"down_right_arrow"},{emoji:"",name:"down arrow",slug:"down_arrow"},{emoji:"",name:"down-left arrow",slug:"down_left_arrow"},{emoji:"",name:"left arrow",slug:"left_arrow"},{emoji:"",name:"up-left arrow",slug:"up_left_arrow"},{emoji:"",name:"up-down arrow",slug:"up_down_arrow"},{emoji:"",name:"left-right arrow",slug:"left_right_arrow"},{emoji:"",name:"right arrow curving left",slug:"right_arrow_curving_left"},{emoji:"",name:"left arrow curving right",slug:"left_arrow_curving_right"},{emoji:"",name:"right arrow curving up",slug:"right_arrow_curving_up"},{emoji:"",name:"right arrow curving down",slug:"right_arrow_curving_down"},{emoji:"",name:"clockwise vertical arrows",slug:"clockwise_vertical_arrows"},{emoji:"",name:"counterclockwise arrows button",slug:"counterclockwise_arrows_button"},{emoji:"",name:"BACK arrow",slug:"back_arrow"},{emoji:"",name:"END arrow",slug:"end_arrow"},{emoji:"",name:"ON! arrow",slug:"on_arrow"},{emoji:"",name:"SOON arrow",slug:"soon_arrow"},{emoji:"",name:"TOP arrow",slug:"top_arrow"},{emoji:"",name:"place of worship",slug:"place_of_worship"},{emoji:"",name:"atom symbol",slug:"atom_symbol"},{emoji:"",name:"om",slug:"om"},{emoji:"",name:"star of David",slug:"star_of_david"},{emoji:"",name:"wheel of dharma",slug:"wheel_of_dharma"},{emoji:"",name:"yin yang",slug:"yin_yang"},{emoji:"",name:"latin cross",slug:"latin_cross"},{emoji:"",name:"orthodox cross",slug:"orthodox_cross"},{emoji:"",name:"star and crescent",slug:"star_and_crescent"},{emoji:"",name:"peace symbol",slug:"peace_symbol"},{emoji:"",name:"menorah",slug:"menorah"},{emoji:"",name:"dotted six-pointed star",slug:"dotted_six_pointed_star"},{emoji:"",name:"Aries",slug:"aries"},{emoji:"",name:"Taurus",slug:"taurus"},{emoji:"",name:"Gemini",slug:"gemini"},{emoji:"",name:"Cancer",slug:"cancer"},{emoji:"",name:"Leo",slug:"leo"},{emoji:"",name:"Virgo",slug:"virgo"},{emoji:"",name:"Libra",slug:"libra"},{emoji:"",name:"Scorpio",slug:"scorpio"},{emoji:"",name:"Sagittarius",slug:"sagittarius"},{emoji:"",name:"Capricorn",slug:"capricorn"},{emoji:"",name:"Aquarius",slug:"aquarius"},{emoji:"",name:"Pisces",slug:"pisces"},{emoji:"",name:"Ophiuchus",slug:"ophiuchus"},{emoji:"",name:"shuffle tracks button",slug:"shuffle_tracks_button"},{emoji:"",name:"repeat button",slug:"repeat_button"},{emoji:"",name:"repeat single button",slug:"repeat_single_button"},{emoji:"",name:"play button",slug:"play_button"},{emoji:"",name:"fast-forward button",slug:"fast_forward_button"},{emoji:"",name:"next track button",slug:"next_track_button"},{emoji:"",name:"play or pause button",slug:"play_or_pause_button"},{emoji:"",name:"reverse button",slug:"reverse_button"},{emoji:"",name:"fast reverse button",slug:"fast_reverse_button"},{emoji:"",name:"last track button",slug:"last_track_button"},{emoji:"",name:"upwards button",slug:"upwards_button"},{emoji:"",name:"fast up button",slug:"fast_up_button"},{emoji:"",name:"downwards button",slug:"downwards_button"},{emoji:"",name:"fast down button",slug:"fast_down_button"},{emoji:"",name:"pause button",slug:"pause_button"},{emoji:"",name:"stop button",slug:"stop_button"},{emoji:"",name:"record button",slug:"record_button"},{emoji:"",name:"eject button",slug:"eject_button"},{emoji:"",name:"cinema",slug:"cinema"},{emoji:"",name:"dim button",slug:"dim_button"},{emoji:"",name:"bright button",slug:"bright_button"},{emoji:"",name:"antenna bars",slug:"antenna_bars"},{emoji:"",name:"vibration mode",slug:"vibration_mode"},{emoji:"",name:"mobile phone off",slug:"mobile_phone_off"},{emoji:"",name:"female sign",slug:"female_sign"},{emoji:"",name:"male sign",slug:"male_sign"},{emoji:"",name:"transgender symbol",slug:"transgender_symbol"},{emoji:"",name:"multiply",slug:"multiply"},{emoji:"",name:"plus",slug:"plus"},{emoji:"",name:"minus",slug:"minus"},{emoji:"",name:"divide",slug:"divide"},{emoji:"",name:"heavy equals sign",slug:"heavy_equals_sign"},{emoji:"",name:"infinity",slug:"infinity"},{emoji:"",name:"double exclamation mark",slug:"double_exclamation_mark"},{emoji:"",name:"exclamation question mark",slug:"exclamation_question_mark"},{emoji:"",name:"red question mark",slug:"red_question_mark"},{emoji:"",name:"white question mark",slug:"white_question_mark"},{emoji:"",name:"white exclamation mark",slug:"white_exclamation_mark"},{emoji:"",name:"red exclamation mark",slug:"red_exclamation_mark"},{emoji:"",name:"wavy dash",slug:"wavy_dash"},{emoji:"",name:"currency exchange",slug:"currency_exchange"},{emoji:"",name:"heavy dollar sign",slug:"heavy_dollar_sign"},{emoji:"",name:"medical symbol",slug:"medical_symbol"},{emoji:"",name:"recycling symbol",slug:"recycling_symbol"},{emoji:"",name:"fleur-de-lis",slug:"fleur_de_lis"},{emoji:"",name:"trident emblem",slug:"trident_emblem"},{emoji:"",name:"name badge",slug:"name_badge"},{emoji:"",name:"Japanese symbol for beginner",slug:"japanese_symbol_for_beginner"},{emoji:"",name:"hollow red circle",slug:"hollow_red_circle"},{emoji:"",name:"check mark button",slug:"check_mark_button"},{emoji:"",name:"check box with check",slug:"check_box_with_check"},{emoji:"",name:"check mark",slug:"check_mark"},{emoji:"",name:"cross mark",slug:"cross_mark"},{emoji:"",name:"cross mark button",slug:"cross_mark_button"},{emoji:"",name:"curly loop",slug:"curly_loop"},{emoji:"",name:"double curly loop",slug:"double_curly_loop"},{emoji:"",name:"part alternation mark",slug:"part_alternation_mark"},{emoji:"",name:"eight-spoked asterisk",slug:"eight_spoked_asterisk"},{emoji:"",name:"eight-pointed star",slug:"eight_pointed_star"},{emoji:"",name:"sparkle",slug:"sparkle"},{emoji:"",name:"copyright",slug:"copyright"},{emoji:"",name:"registered",slug:"registered"},{emoji:"",name:"trade mark",slug:"trade_mark"},{emoji:"#",name:"keycap #",slug:"keycap_number_sign"},{emoji:"*",name:"keycap *",slug:"keycap_asterisk"},{emoji:"0",name:"keycap 0",slug:"keycap_0"},{emoji:"1",name:"keycap 1",slug:"keycap_1"},{emoji:"2",name:"keycap 2",slug:"keycap_2"},{emoji:"3",name:"keycap 3",slug:"keycap_3"},{emoji:"4",name:"keycap 4",slug:"keycap_4"},{emoji:"5",name:"keycap 5",slug:"keycap_5"},{emoji:"6",name:"keycap 6",slug:"keycap_6"},{emoji:"7",name:"keycap 7",slug:"keycap_7"},{emoji:"8",name:"keycap 8",slug:"keycap_8"},{emoji:"9",name:"keycap 9",slug:"keycap_9"},{emoji:"",name:"keycap 10",slug:"keycap_10"},{emoji:"",name:"input latin uppercase",slug:"input_latin_uppercase"},{emoji:"",name:"input latin lowercase",slug:"input_latin_lowercase"},{emoji:"",name:"input numbers",slug:"input_numbers"},{emoji:"",name:"input symbols",slug:"input_symbols"},{emoji:"",name:"input latin letters",slug:"input_latin_letters"},{emoji:"",name:"A button (blood type)",slug:"a_button"},{emoji:"",name:"AB button (blood type)",slug:"ab_button"},{emoji:"",name:"B button (blood type)",slug:"b_button"},{emoji:"",name:"CL button",slug:"cl_button"},{emoji:"",name:"COOL button",slug:"cool_button"},{emoji:"",name:"FREE button",slug:"free_button"},{emoji:"",name:"information",slug:"information"},{emoji:"",name:"ID button",slug:"id_button"},{emoji:"",name:"circled M",slug:"circled_m"},{emoji:"",name:"NEW button",slug:"new_button"},{emoji:"",name:"NG button",slug:"ng_button"},{emoji:"",name:"O button (blood type)",slug:"o_button"},{emoji:"",name:"OK button",slug:"ok_button"},{emoji:"",name:"P button",slug:"p_button"},{emoji:"",name:"SOS button",slug:"sos_button"},{emoji:"",name:"UP! button",slug:"up_button"},{emoji:"",name:"VS button",slug:"vs_button"},{emoji:"",name:"Japanese here button",slug:"japanese_here_button"},{emoji:"",name:"Japanese service charge button",slug:"japanese_service_charge_button"},{emoji:"",name:"Japanese monthly amount button",slug:"japanese_monthly_amount_button"},{emoji:"",name:"Japanese not free of charge button",slug:"japanese_not_free_of_charge_button"},{emoji:"",name:"Japanese reserved button",slug:"japanese_reserved_button"},{emoji:"",name:"Japanese bargain button",slug:"japanese_bargain_button"},{emoji:"",name:"Japanese discount button",slug:"japanese_discount_button"},{emoji:"",name:"Japanese free of charge button",slug:"japanese_free_of_charge_button"},{emoji:"",name:"Japanese prohibited button",slug:"japanese_prohibited_button"},{emoji:"",name:"Japanese acceptable button",slug:"japanese_acceptable_button"},{emoji:"",name:"Japanese application button",slug:"japanese_application_button"},{emoji:"",name:"Japanese passing grade button",slug:"japanese_passing_grade_button"},{emoji:"",name:"Japanese vacancy button",slug:"japanese_vacancy_button"},{emoji:"",name:"Japanese congratulations button",slug:"japanese_congratulations_button"},{emoji:"",name:"Japanese secret button",slug:"japanese_secret_button"},{emoji:"",name:"Japanese open for business button",slug:"japanese_open_for_business_button"},{emoji:"",name:"Japanese no vacancy button",slug:"japanese_no_vacancy_button"},{emoji:"",name:"red circle",slug:"red_circle"},{emoji:"",name:"orange circle",slug:"orange_circle"},{emoji:"",name:"yellow circle",slug:"yellow_circle"},{emoji:"",name:"green circle",slug:"green_circle"},{emoji:"",name:"blue circle",slug:"blue_circle"},{emoji:"",name:"purple circle",slug:"purple_circle"},{emoji:"",name:"brown circle",slug:"brown_circle"},{emoji:"",name:"black circle",slug:"black_circle"},{emoji:"",name:"white circle",slug:"white_circle"},{emoji:"",name:"red square",slug:"red_square"},{emoji:"",name:"orange square",slug:"orange_square"},{emoji:"",name:"yellow square",slug:"yellow_square"},{emoji:"",name:"green square",slug:"green_square"},{emoji:"",name:"blue square",slug:"blue_square"},{emoji:"",name:"purple square",slug:"purple_square"},{emoji:"",name:"brown square",slug:"brown_square"},{emoji:"",name:"black large square",slug:"black_large_square"},{emoji:"",name:"white large square",slug:"white_large_square"},{emoji:"",name:"black medium square",slug:"black_medium_square"},{emoji:"",name:"white medium square",slug:"white_medium_square"},{emoji:"",name:"black medium-small square",slug:"black_medium_small_square"},{emoji:"",name:"white medium-small square",slug:"white_medium_small_square"},{emoji:"",name:"black small square",slug:"black_small_square"},{emoji:"",name:"white small square",slug:"white_small_square"},{emoji:"",name:"large orange diamond",slug:"large_orange_diamond"},{emoji:"",name:"large blue diamond",slug:"large_blue_diamond"},{emoji:"",name:"small orange diamond",slug:"small_orange_diamond"},{emoji:"",name:"small blue diamond",slug:"small_blue_diamond"},{emoji:"",name:"red triangle pointed up",slug:"red_triangle_pointed_up"},{emoji:"",name:"red triangle pointed down",slug:"red_triangle_pointed_down"},{emoji:"",name:"diamond with a dot",slug:"diamond_with_a_dot"},{emoji:"",name:"radio button",slug:"radio_button"},{emoji:"",name:"white square button",slug:"white_square_button"},{emoji:"",name:"black square button",slug:"black_square_button"}]},{name:"Flags",slug:"flags",emojis:[{emoji:"",name:"chequered flag",slug:"chequered_flag_racing_race"},{emoji:"",name:"triangular flag",slug:"triangular_flag_post"},{emoji:"",name:"crossed flags",slug:"crossed_flags_celebration"},{emoji:"",name:"black flag",slug:"black_flag_waving"},{emoji:"",name:"white flag",slug:"white_flag_waving"},{emoji:"",name:"rainbow flag",slug:"rainbow_flag_pride"},{emoji:"",name:"transgender flag",slug:"transgender_flag_pink_white"},{emoji:"",name:"pirate flag",slug:"pirate_flag_treasure"},{emoji:"",name:"flag Ascension Island",slug:"flag_ascension_island"},{emoji:"",name:"flag Andorra",slug:"flag_andorra"},{emoji:"",name:"flag United Arab Emirates",slug:"flag_united_arab_emirates"},{emoji:"",name:"flag Afghanistan",slug:"flag_afghanistan"},{emoji:"",name:"flag Antigua & Barbuda",slug:"flag_antigua_barbuda"},{emoji:"",name:"flag Anguilla",slug:"flag_anguilla"},{emoji:"",name:"flag Albania",slug:"flag_albania"},{emoji:"",name:"flag Armenia",slug:"flag_armenia"},{emoji:"",name:"flag Angola",slug:"flag_angola"},{emoji:"",name:"flag Antarctica",slug:"flag_antarctica"},{emoji:"",name:"flag Argentina",slug:"flag_argentina"},{emoji:"",name:"flag American Samoa",slug:"flag_american_samoa"},{emoji:"",name:"flag Austria",slug:"flag_austria"},{emoji:"",name:"flag Australia",slug:"flag_australia"},{emoji:"",name:"flag Aruba",slug:"flag_aruba"},{emoji:"",name:"flag land Islands",slug:"flag_aland_islands"},{emoji:"",name:"flag Azerbaijan",slug:"flag_azerbaijan"},{emoji:"",name:"flag Bosnia & Herzegovina",slug:"flag_bosnia_herzegovina"},{emoji:"",name:"flag Barbados",slug:"flag_barbados"},{emoji:"",name:"flag Bangladesh",slug:"flag_bangladesh"},{emoji:"",name:"flag Belgium",slug:"flag_belgium"},{emoji:"",name:"flag Burkina Faso",slug:"flag_burkina_faso"},{emoji:"",name:"flag Bulgaria",slug:"flag_bulgaria"},{emoji:"",name:"flag Bahrain",slug:"flag_bahrain"},{emoji:"",name:"flag Burundi",slug:"flag_burundi"},{emoji:"",name:"flag Benin",slug:"flag_benin"},{emoji:"",name:"flag St. Barthlemy",slug:"flag_st_barthelemy"},{emoji:"",name:"flag Bermuda",slug:"flag_bermuda"},{emoji:"",name:"flag Brunei",slug:"flag_brunei"},{emoji:"",name:"flag Bolivia",slug:"flag_bolivia"},{emoji:"",name:"flag Caribbean Netherlands",slug:"flag_caribbean_netherlands"},{emoji:"",name:"flag Brazil",slug:"flag_brazil"},{emoji:"",name:"flag Bahamas",slug:"flag_bahamas"},{emoji:"",name:"flag Bhutan",slug:"flag_bhutan"},{emoji:"",name:"flag Bouvet Island",slug:"flag_bouvet_island"},{emoji:"",name:"flag Botswana",slug:"flag_botswana"},{emoji:"",name:"flag Belarus",slug:"flag_belarus"},{emoji:"",name:"flag Belize",slug:"flag_belize"},{emoji:"",name:"flag Canada",slug:"flag_canada"},{emoji:"",name:"flag Cocos (Keeling) Islands",slug:"flag_cocos_islands"},{emoji:"",name:"flag Congo - Kinshasa",slug:"flag_congo_kinshasa"},{emoji:"",name:"flag Central African Republic",slug:"flag_central_african_republic"},{emoji:"",name:"flag Congo - Brazzaville",slug:"flag_congo_brazzaville"},{emoji:"",name:"flag Switzerland",slug:"flag_switzerland"},{emoji:"",name:"flag Cte dIvoire",slug:"flag_cote_d_ivoire"},{emoji:"",name:"flag Cook Islands",slug:"flag_cook_islands"},{emoji:"",name:"flag Chile",slug:"flag_chile"},{emoji:"",name:"flag Cameroon",slug:"flag_cameroon"},{emoji:"",name:"flag China",slug:"flag_china"},{emoji:"",name:"flag Colombia",slug:"flag_colombia"},{emoji:"",name:"flag Clipperton Island",slug:"flag_clipperton_island"},{emoji:"",name:"flag Costa Rica",slug:"flag_costa_rica"},{emoji:"",name:"flag Cuba",slug:"flag_cuba"},{emoji:"",name:"flag Cape Verde",slug:"flag_cape_verde"},{emoji:"",name:"flag Curaao",slug:"flag_curacao"},{emoji:"",name:"flag Christmas Island",slug:"flag_christmas_island"},{emoji:"",name:"flag Cyprus",slug:"flag_cyprus"},{emoji:"",name:"flag Czechia",slug:"flag_czechia"},{emoji:"",name:"flag Germany",slug:"flag_germany"},{emoji:"",name:"flag Diego Garcia",slug:"flag_diego_garcia"},{emoji:"",name:"flag Djibouti",slug:"flag_djibouti"},{emoji:"",name:"flag Denmark",slug:"flag_denmark"},{emoji:"",name:"flag Dominica",slug:"flag_dominica"},{emoji:"",name:"flag Dominican Republic",slug:"flag_dominican_republic"},{emoji:"",name:"flag Algeria",slug:"flag_algeria"},{emoji:"",name:"flag Ceuta & Melilla",slug:"flag_ceuta_melilla"},{emoji:"",name:"flag Ecuador",slug:"flag_ecuador"},{emoji:"",name:"flag Estonia",slug:"flag_estonia"},{emoji:"",name:"flag Egypt",slug:"flag_egypt"},{emoji:"",name:"flag Western Sahara",slug:"flag_western_sahara"},{emoji:"",name:"flag Eritrea",slug:"flag_eritrea"},{emoji:"",name:"flag Spain",slug:"flag_spain"},{emoji:"",name:"flag Ethiopia",slug:"flag_ethiopia"},{emoji:"",name:"flag European Union",slug:"flag_european_union"},{emoji:"",name:"flag Finland",slug:"flag_finland"},{emoji:"",name:"flag Fiji",slug:"flag_fiji"},{emoji:"",name:"flag Falkland Islands",slug:"flag_falkland_islands"},{emoji:"",name:"flag Micronesia",slug:"flag_micronesia"},{emoji:"",name:"flag Faroe Islands",slug:"flag_faroe_islands"},{emoji:"",name:"flag France",slug:"flag_france"},{emoji:"",name:"flag Gabon",slug:"flag_gabon"},{emoji:"",name:"flag United Kingdom",slug:"flag_united_kingdom"},{emoji:"",name:"flag Grenada",slug:"flag_grenada"},{emoji:"",name:"flag Georgia",slug:"flag_georgia"},{emoji:"",name:"flag French Guiana",slug:"flag_french_guiana"},{emoji:"",name:"flag Guernsey",slug:"flag_guernsey"},{emoji:"",name:"flag Ghana",slug:"flag_ghana"},{emoji:"",name:"flag Gibraltar",slug:"flag_gibraltar"},{emoji:"",name:"flag Greenland",slug:"flag_greenland"},{emoji:"",name:"flag Gambia",slug:"flag_gambia"},{emoji:"",name:"flag Guinea",slug:"flag_guinea"},{emoji:"",name:"flag Guadeloupe",slug:"flag_guadeloupe"},{emoji:"",name:"flag Equatorial Guinea",slug:"flag_equatorial_guinea"},{emoji:"",name:"flag Greece",slug:"flag_greece"},{emoji:"",name:"flag South Georgia & South Sandwich Islands",slug:"flag_south_georgia_south_sandwich_islands"},{emoji:"",name:"flag Guatemala",slug:"flag_guatemala"},{emoji:"",name:"flag Guam",slug:"flag_guam"},{emoji:"",name:"flag Guinea-Bissau",slug:"flag_guinea_bissau"},{emoji:"",name:"flag Guyana",slug:"flag_guyana"},{emoji:"",name:"flag Hong Kong SAR China",slug:"flag_hong_kong_sar_china"},{emoji:"",name:"flag Heard & McDonald Islands",slug:"flag_heard_mcdonald_islands"},{emoji:"",name:"flag Honduras",slug:"flag_honduras"},{emoji:"",name:"flag Croatia",slug:"flag_croatia"},{emoji:"",name:"flag Haiti",slug:"flag_haiti"},{emoji:"",name:"flag Hungary",slug:"flag_hungary"},{emoji:"",name:"flag Canary Islands",slug:"flag_canary_islands"},{emoji:"",name:"flag Indonesia",slug:"flag_indonesia"},{emoji:"",name:"flag Ireland",slug:"flag_ireland"},{emoji:"",name:"flag Israel",slug:"flag_israel"},{emoji:"",name:"flag Isle of Man",slug:"flag_isle_of_man"},{emoji:"",name:"flag India",slug:"flag_india"},{emoji:"",name:"flag British Indian Ocean Territory",slug:"flag_british_indian_ocean_territory"},{emoji:"",name:"flag Iraq",slug:"flag_iraq"},{emoji:"",name:"flag Iran",slug:"flag_iran"},{emoji:"",name:"flag Iceland",slug:"flag_iceland"},{emoji:"",name:"flag Italy",slug:"flag_italy"},{emoji:"",name:"flag Jersey",slug:"flag_jersey"},{emoji:"",name:"flag Jamaica",slug:"flag_jamaica"},{emoji:"",name:"flag Jordan",slug:"flag_jordan"},{emoji:"",name:"flag Japan",slug:"flag_japan"},{emoji:"",name:"flag Kenya",slug:"flag_kenya"},{emoji:"",name:"flag Kyrgyzstan",slug:"flag_kyrgyzstan"},{emoji:"",name:"flag Cambodia",slug:"flag_cambodia"},{emoji:"",name:"flag Kiribati",slug:"flag_kiribati"},{emoji:"",name:"flag Comoros",slug:"flag_comoros"},{emoji:"",name:"flag St. Kitts & Nevis",slug:"flag_st_kitts_nevis"},{emoji:"",name:"flag North Korea",slug:"flag_north_korea"},{emoji:"",name:"flag South Korea",slug:"flag_south_korea"},{emoji:"",name:"flag Kuwait",slug:"flag_kuwait"},{emoji:"",name:"flag Cayman Islands",slug:"flag_cayman_islands"},{emoji:"",name:"flag Kazakhstan",slug:"flag_kazakhstan"},{emoji:"",name:"flag Laos",slug:"flag_laos"},{emoji:"",name:"flag Lebanon",slug:"flag_lebanon"},{emoji:"",name:"flag St. Lucia",slug:"flag_st_lucia"},{emoji:"",name:"flag Liechtenstein",slug:"flag_liechtenstein"},{emoji:"",name:"flag Sri Lanka",slug:"flag_sri_lanka"},{emoji:"",name:"flag Liberia",slug:"flag_liberia"},{emoji:"",name:"flag Lesotho",slug:"flag_lesotho"},{emoji:"",name:"flag Lithuania",slug:"flag_lithuania"},{emoji:"",name:"flag Luxembourg",slug:"flag_luxembourg"},{emoji:"",name:"flag Latvia",slug:"flag_latvia"},{emoji:"",name:"flag Libya",slug:"flag_libya"},{emoji:"",name:"flag Morocco",slug:"flag_morocco"},{emoji:"",name:"flag Monaco",slug:"flag_monaco"},{emoji:"",name:"flag Moldova",slug:"flag_moldova"},{emoji:"",name:"flag Montenegro",slug:"flag_montenegro"},{emoji:"",name:"flag St. Martin",slug:"flag_st_martin"},{emoji:"",name:"flag Madagascar",slug:"flag_madagascar"},{emoji:"",name:"flag Marshall Islands",slug:"flag_marshall_islands"},{emoji:"",name:"flag North Macedonia",slug:"flag_north_macedonia"},{emoji:"",name:"flag Mali",slug:"flag_mali"},{emoji:"",name:"flag Myanmar (Burma)",slug:"flag_myanmar"},{emoji:"",name:"flag Mongolia",slug:"flag_mongolia"},{emoji:"",name:"flag Macao SAR China",slug:"flag_macao_sar_china"},{emoji:"",name:"flag Northern Mariana Islands",slug:"flag_northern_mariana_islands"},{emoji:"",name:"flag Martinique",slug:"flag_martinique"},{emoji:"",name:"flag Mauritania",slug:"flag_mauritania"},{emoji:"",name:"flag Montserrat",slug:"flag_montserrat"},{emoji:"",name:"flag Malta",slug:"flag_malta"},{emoji:"",name:"flag Mauritius",slug:"flag_mauritius"},{emoji:"",name:"flag Maldives",slug:"flag_maldives"},{emoji:"",name:"flag Malawi",slug:"flag_malawi"},{emoji:"",name:"flag Mexico",slug:"flag_mexico"},{emoji:"",name:"flag Malaysia",slug:"flag_malaysia"},{emoji:"",name:"flag Mozambique",slug:"flag_mozambique"},{emoji:"",name:"flag Namibia",slug:"flag_namibia"},{emoji:"",name:"flag New Caledonia",slug:"flag_new_caledonia"},{emoji:"",name:"flag Niger",slug:"flag_niger"},{emoji:"",name:"flag Norfolk Island",slug:"flag_norfolk_island"},{emoji:"",name:"flag Nigeria",slug:"flag_nigeria"},{emoji:"",name:"flag Nicaragua",slug:"flag_nicaragua"},{emoji:"",name:"flag Netherlands",slug:"flag_netherlands"},{emoji:"",name:"flag Norway",slug:"flag_norway"},{emoji:"",name:"flag Nepal",slug:"flag_nepal"},{emoji:"",name:"flag Nauru",slug:"flag_nauru"},{emoji:"",name:"flag Niue",slug:"flag_niue"},{emoji:"",name:"flag New Zealand",slug:"flag_new_zealand"},{emoji:"",name:"flag Oman",slug:"flag_oman"},{emoji:"",name:"flag Panama",slug:"flag_panama"},{emoji:"",name:"flag Peru",slug:"flag_peru"},{emoji:"",name:"flag French Polynesia",slug:"flag_french_polynesia"},{emoji:"",name:"flag Papua New Guinea",slug:"flag_papua_new_guinea"},{emoji:"",name:"flag Philippines",slug:"flag_philippines"},{emoji:"",name:"flag Pakistan",slug:"flag_pakistan"},{emoji:"",name:"flag Poland",slug:"flag_poland"},{emoji:"",name:"flag St. Pierre & Miquelon",slug:"flag_st_pierre_miquelon"},{emoji:"",name:"flag Pitcairn Islands",slug:"flag_pitcairn_islands"},{emoji:"",name:"flag Puerto Rico",slug:"flag_puerto_rico"},{emoji:"",name:"flag Palestinian Territories",slug:"flag_palestinian_territories"},{emoji:"",name:"flag Portugal",slug:"flag_portugal"},{emoji:"",name:"flag Palau",slug:"flag_palau"},{emoji:"",name:"flag Paraguay",slug:"flag_paraguay"},{emoji:"",name:"flag Qatar",slug:"flag_qatar"},{emoji:"",name:"flag Runion",slug:"flag_reunion"},{emoji:"",name:"flag Romania",slug:"flag_romania"},{emoji:"",name:"flag Serbia",slug:"flag_serbia"},{emoji:"",name:"flag Russia",slug:"flag_russia"},{emoji:"",name:"flag Rwanda",slug:"flag_rwanda"},{emoji:"",name:"flag Saudi Arabia",slug:"flag_saudi_arabia"},{emoji:"",name:"flag Solomon Islands",slug:"flag_solomon_islands"},{emoji:"",name:"flag Seychelles",slug:"flag_seychelles"},{emoji:"",name:"flag Sudan",slug:"flag_sudan"},{emoji:"",name:"flag Sweden",slug:"flag_sweden"},{emoji:"",name:"flag Singapore",slug:"flag_singapore"},{emoji:"",name:"flag St. Helena",slug:"flag_st_helena"},{emoji:"",name:"flag Slovenia",slug:"flag_slovenia"},{emoji:"",name:"flag Svalbard & Jan Mayen",slug:"flag_svalbard_jan_mayen"},{emoji:"",name:"flag Slovakia",slug:"flag_slovakia"},{emoji:"",name:"flag Sierra Leone",slug:"flag_sierra_leone"},{emoji:"",name:"flag San Marino",slug:"flag_san_marino"},{emoji:"",name:"flag Senegal",slug:"flag_senegal"},{emoji:"",name:"flag Somalia",slug:"flag_somalia"},{emoji:"",name:"flag Suriname",slug:"flag_suriname"},{emoji:"",name:"flag South Sudan",slug:"flag_south_sudan"},{emoji:"",name:"flag So Tom & Prncipe",slug:"flag_sao_tome_principe"},{emoji:"",name:"flag El Salvador",slug:"flag_el_salvador"},{emoji:"",name:"flag Sint Maarten",slug:"flag_sint_maarten"},{emoji:"",name:"flag Syria",slug:"flag_syria"},{emoji:"",name:"flag Eswatini",slug:"flag_eswatini"},{emoji:"",name:"flag Tristan da Cunha",slug:"flag_tristan_da_cunha"},{emoji:"",name:"flag Turks & Caicos Islands",slug:"flag_turks_caicos_islands"},{emoji:"",name:"flag Chad",slug:"flag_chad"},{emoji:"",name:"flag French Southern Territories",slug:"flag_french_southern_territories"},{emoji:"",name:"flag Togo",slug:"flag_togo"},{emoji:"",name:"flag Thailand",slug:"flag_thailand"},{emoji:"",name:"flag Tajikistan",slug:"flag_tajikistan"},{emoji:"",name:"flag Tokelau",slug:"flag_tokelau"},{emoji:"",name:"flag Timor-Leste",slug:"flag_timor_leste"},{emoji:"",name:"flag Turkmenistan",slug:"flag_turkmenistan"},{emoji:"",name:"flag Tunisia",slug:"flag_tunisia"},{emoji:"",name:"flag Tonga",slug:"flag_tonga"},{emoji:"",name:"flag Turkey",slug:"flag_turkey"},{emoji:"",name:"flag Trinidad & Tobago",slug:"flag_trinidad_tobago"},{emoji:"",name:"flag Tuvalu",slug:"flag_tuvalu"},{emoji:"",name:"flag Taiwan",slug:"flag_taiwan"},{emoji:"",name:"flag Tanzania",slug:"flag_tanzania"},{emoji:"",name:"flag Ukraine",slug:"flag_ukraine"},{emoji:"",name:"flag Uganda",slug:"flag_uganda"},{emoji:"",name:"flag U.S. Outlying Islands",slug:"flag_u_s_outlying_islands"},{emoji:"",name:"flag United Nations",slug:"flag_united_nations"},{emoji:"",name:"flag United States",slug:"flag_united_states"},{emoji:"",name:"flag Uruguay",slug:"flag_uruguay"},{emoji:"",name:"flag Uzbekistan",slug:"flag_uzbekistan"},{emoji:"",name:"flag Vatican City",slug:"flag_vatican_city"},{emoji:"",name:"flag St. Vincent & Grenadines",slug:"flag_st_vincent_grenadines"},{emoji:"",name:"flag Venezuela",slug:"flag_venezuela"},{emoji:"",name:"flag British Virgin Islands",slug:"flag_british_virgin_islands"},{emoji:"",name:"flag U.S. Virgin Islands",slug:"flag_u_s_virgin_islands"},{emoji:"",name:"flag Vietnam",slug:"flag_vietnam"},{emoji:"",name:"flag Vanuatu",slug:"flag_vanuatu"},{emoji:"",name:"flag Wallis & Futuna",slug:"flag_wallis_futuna"},{emoji:"",name:"flag Samoa",slug:"flag_samoa"},{emoji:"",name:"flag Kosovo",slug:"flag_kosovo"},{emoji:"",name:"flag Yemen",slug:"flag_yemen"},{emoji:"",name:"flag Mayotte",slug:"flag_mayotte"},{emoji:"",name:"flag South Africa",slug:"flag_south_africa"},{emoji:"",name:"flag Zambia",slug:"flag_zambia"},{emoji:"",name:"flag Zimbabwe",slug:"flag_zimbabwe"},{emoji:"",name:"flag England",slug:"flag_england"},{emoji:"",name:"flag Scotland",slug:"flag_scotland"},{emoji:"",name:"flag Wales",slug:"flag_wales"}]}],c_=(t,e=2)=>{if(t===0)return"0 Bytes";const n=1024,i=e<0?0:e,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/n**o).toFixed(i))+" "+r[o]},B1=t=>t/(1024*1024),f_=(t,e)=>{var r;const n=((r=t==null?void 0:t.file)==null?void 0:r.size)||(t==null?void 0:t.size);return B1(n)<=e},d_=(t,e="h:mm a")=>{const n=yi(t);return ei(n,e)},h_=(t,e="MMM d, yyyy")=>{const n=yi(t),i=new Date,r=ei(n,e);return yc(n,i)?r:ei(n,"LLL d y, h:mm a")},m_=t=>{const e=yi(t);return bc(e,{addSuffix:!0})},p_=(t,e="MMM d, yyyy")=>{const n=yi(t);return ei(n,e)},g_=(t,e=!1)=>{const n=e?" ago":"",i={"less than a minute ago":"now","a minute ago":`1m${n}`,"an hour ago":`1h${n}`,"a day ago":`1d${n}`,"a month ago":`1mo${n}`,"a year ago":`1y${n}`};return i[t]?i[t]:t.replace(/about|over|almost|/g,"").replace(" minute ago",`m${n}`).replace(" minutes ago",`m${n}`).replace(" hour ago",`h${n}`).replace(" hours ago",`h${n}`).replace(" day ago",`d${n}`).replace(" days ago",`d${n}`).replace(" month ago",`mo${n}`).replace(" months ago",`mo${n}`).replace(" year ago",`y${n}`).replace(" years ago",`y${n}`)},z1=4e3,P1={props:{placeholder:{type:String,default:""},modelValue:{type:String,default:""},minHeight:{type:Number,default:2},signature:{type:String,default:""},rows:{type:Number,default:2},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},emits:["typingOn","typingOff","update:modelValue","input","blur","focus"],data(){return{typingIndicator:Ql(()=>{this.$emit("typingOn")},()=>{this.$emit("typingOff")},z1)}},computed:{cleanedSignature(){return I1(this.signature)}},watch:{value(){this.resizeTextarea(),document.activeElement!==this.$refs.textarea&&this.$nextTick(()=>{this.setCursor()})},sendWithSignature(t){this.allowSignature&&this.toggleSignatureInEditor(t)}},mounted(){this.$nextTick(()=>{this.modelValue?(this.resizeTextarea(),this.setCursor()):this.focus()})},methods:{resizeTextarea(){this.$el.style.height="auto",this.modelValue?this.$el.style.height=`${this.$el.scrollHeight}px`:this.$el.style.height=`${this.minHeight}rem`},toggleSignatureInEditor(t){const e=t?Wl(this.modelValue,this.cleanedSignature):Ir(this.modelValue,this.cleanedSignature);this.$emit("update:modelValue",e),this.$emit("input",e),this.$nextTick(()=>{this.resizeTextarea(),this.setCursor()})},setCursor(){const e=Ir(this.modelValue,this.cleanedSignature).trimEnd().length,n=this.$refs.textarea;n&&(n.focus(),n.setSelectionRange(e,e))},onInput(t){this.$emit("update:modelValue",t.target.value),this.$emit("input",t.target.value),this.resizeTextarea()},onKeyup(){this.typingIndicator.start()},onBlur(){this.typingIndicator.stop(),this.$emit("blur")},onFocus(){this.$emit("focus")},focus(){this.$refs.textarea&&this.$refs.textarea.focus()}}},L1=["placeholder","rows","value"];function q1(t,e,n,i,r,o){return rc(),ic("textarea",{ref:"textarea",placeholder:n.placeholder,rows:n.rows,value:n.modelValue,onInput:e[0]||(e[0]=(...u)=>o.onInput&&o.onInput(...u)),onFocus:e[1]||(e[1]=(...u)=>o.onFocus&&o.onFocus(...u)),onKeyup:e[2]||(e[2]=(...u)=>o.onKeyup&&o.onKeyup(...u)),onBlur:e[3]||(e[3]=(...u)=>o.onBlur&&o.onBlur(...u))},null,40,L1)}const __=nc(P1,[["render",q1]]);var Jl={exports:{}};/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.16 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(t,e){(function(n,i){t.exports=i(sc)})(Qu,function(n){function i(D){return s(D)||u(D)||o(D)||r()}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(D,m){if(D){if(typeof D=="string")return a(D,m);var _=Object.prototype.toString.call(D).slice(8,-1);if(_==="Object"&&D.constructor&&(_=D.constructor.name),_==="Map"||_==="Set")return Array.from(D);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return a(D,m)}}function u(D){if(typeof Symbol<"u"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}function s(D){if(Array.isArray(D))return a(D)}function a(D,m){(m==null||m>D.length)&&(m=D.length);for(var _=0,p=new Array(m);_<m;_++)p[_]=D[_];return p}function l(D,m){var _=Object.keys(D);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(D);m&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(D,b).enumerable})),_.push.apply(_,p)}return _}function c(D){for(var m=1;m<arguments.length;m++){var _=arguments[m]!=null?arguments[m]:{};m%2?l(Object(_),!0).forEach(function(p){f(D,p,_[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(_)):l(Object(_)).forEach(function(p){Object.defineProperty(D,p,Object.getOwnPropertyDescriptor(_,p))})}return D}function f(D,m,_){return m in D?Object.defineProperty(D,m,{value:_,enumerable:!0,configurable:!0,writable:!0}):D[m]=_,D}function d(D){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},d(D)}function g(D,m){var _=Object.keys(D);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(D);m&&(p=p.filter(function(b){return Object.getOwnPropertyDescriptor(D,b).enumerable})),_.push.apply(_,p)}return _}function h(D){for(var m=1;m<arguments.length;m++){var _=arguments[m]!=null?arguments[m]:{};m%2?g(Object(_),!0).forEach(function(p){N(D,p,_[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(_)):g(Object(_)).forEach(function(p){Object.defineProperty(D,p,Object.getOwnPropertyDescriptor(_,p))})}return D}function w(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")}function v(D,m){for(var _=0;_<m.length;_++){var p=m[_];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}function M(D,m,_){return m&&v(D.prototype,m),Object.defineProperty(D,"prototype",{writable:!1}),D}function N(D,m,_){return m in D?Object.defineProperty(D,m,{value:_,enumerable:!0,configurable:!0,writable:!0}):D[m]=_,D}var I=function(m){var _=new XMLHttpRequest;return _.open(m.method||"GET",m.url),_.responseType="json",m.headers&&Object.keys(m.headers).forEach(function(p){_.setRequestHeader(p,m.headers[p])}),_},R=function(m,_){return new Promise(function(p,b){m.onload=function(){if(m.status>=200&&m.status<300){var k;try{k=JSON.parse(m.response)}catch{k=m.response}p(k)}else b(m.response)},m.onerror=function(){return b(m.response)},m.send(JSON.stringify(_))})},L=function(m,_){var p=new FormData;for(var b in _)p.append(b,_[b]);return new Promise(function(k,S){m.onload=function(){if(m.status>=200&&m.status<300){var O;try{O=JSON.parse(m.response)}catch{O=m.response}k(O)}else S(m.response)},m.onerror=function(){return S(m.response)},m.send(p)})};function z(D){var m=I(D);return R(m,D.body)}var G=function(){function D(m,_){w(this,D),this.file=m,this.options=_,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return M(D,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var _=this,p=this.chunksUploaded.length/this.chunks.length*100,b=this.chunksUploading.reduce(function(k,S){return k+(S.progress|0)/_.chunks.length},0);return Math.min(p+b,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(_){return!_.active&&!_.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(_){return!!_.xhr&&!!_.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(_){return!!_.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var _=0,p=this.chunkSize;_<this.fileSize;)this.chunks.push({blob:this.file.file.slice(_,p),startOffset:_,active:!1,retries:this.maxRetries}),_=p,p=_+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(_){_.xhr.abort(),_.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var _=this;return this.promise=new Promise(function(p,b){_.resolve=p,_.reject=b}),this.start(),this.promise}},{key:"start",value:function(){var _=this;z({method:"POST",headers:h(h({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(p){if(p.status!=="success")return _.file.response=p,_.reject("server");_.sessionId=p.data.session_id,_.chunkSize=p.data.end_offset,_.createChunks(),_.startChunking()}).catch(function(p){_.file.response=p,_.reject("server")})}},{key:"startChunking",value:function(){for(var _=0;_<this.maxActiveChunks;_++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(_){var p=this;_.progress=0,_.active=!0,this.updateFileProgress(),_.xhr=I({method:"POST",headers:this.headers,url:this.action}),_.xhr.upload.addEventListener("progress",function(b){b.lengthComputable&&(_.progress=Math.round(b.loaded/b.total*100))},!1),L(_.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:_.startOffset,chunk:_.blob})).then(function(b){if(_.active=!1,b.status==="success")_.uploaded=!0;else if(_.retries--<=0)return p.stopChunks(),p.reject("upload");p.uploadNextChunk()}).catch(function(){if(_.active=!1,_.retries--<=0)return p.stopChunks(),p.reject("upload");p.uploadNextChunk()})}},{key:"finish",value:function(){var _=this;this.updateFileProgress(),this.stopSpeedCalc(),z({method:"POST",headers:h(h({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(p){if(_.file.response=p,p.status!=="success")return _.reject("server");_.resolve(p)}).catch(function(p){_.file.response=p,_.reject("server")})}},{key:"startSpeedCalc",value:function(){var _=this;this.file.speed=0;var p=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var b=_.progress/100*_.fileSize;_.file.speed=b-p,p=b},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),D}(),ee={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:G},$=n.defineComponent({compatConfig:{MODE:3},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return ee}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,dropElementActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var m=this,_=document.createElement("input");if(_.type="file",_.multiple=!0,window.FormData&&_.files?((typeof _.webkitdirectory=="boolean"||typeof _.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof _.ondrop<"u"&&this.isRelatedTargetSupported()&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var p=0;p<this.files.length;p++){var b=this.files[p];this.maps[b.id]=b}this.$nextTick(function(){m.$parent?(m.$parent.$forceUpdate(),m.$parent.$nextTick(function(){m.watchDrop(m.drop)})):m.watchDrop(m.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var m,_=0;_<this.files.length;_++)if(m=this.files[_],m.fileObject&&!m.error&&!m.success)return!1;return!0},chunkOptions:function(){return Object.assign(ee,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var m=[];return typeof this.extensions=="string"?m=this.extensions.split(","):m=this.extensions,m=m.map(function(_){return _.trim()}).filter(function(_){return _}),new RegExp("\\.("+m.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(m){this.watchActive(m)},dropActive:function(m){this.watchDropActive(m),this.$parent&&this.$parent.$forceUpdate()},drop:function(m){this.watchDrop(m)},modelValue:function(m){if(this.files!==m){this.files=m;var _=this.maps;this.maps={};for(var p=0;p<this.files.length;p++){var b=this.files[p];this.maps[b.id]=b}for(var k in this.maps){var S=this.maps[k],O=_[k];S!==O&&this.emitFile(S,O)}for(var B in _)this.maps[B]||this.emitFile(void 0,_[B])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var m=this.files;this.files=[],this.maps={},this.emitInput();for(var _=0;_<m.length;_++)this.emitFile(void 0,m[_])}return!0},get:function(m){return m?d(m)==="object"?this.maps[m.id||""]||!1:this.maps[m]||!1:!1},add:function(m,_){var p;m instanceof Array?p=m:p=[m],_===void 0&&(_=this.addIndex);for(var b=[],k=0;k<p.length;k++){var S=p[k];this.features.html5&&S instanceof Blob&&(S={id:"",file:S,size:S.size,name:S.webkitRelativePath||S.relativePath||S.name||"unknown",type:S.type}),S=S;var O=!1;if(S.fileObject===!1||(S.fileObject||typeof Element<"u"&&S.el instanceof HTMLInputElement||typeof Blob<"u"&&S.file instanceof Blob)&&(O=!0),O&&(S=c(c({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},S),{},{response:{},progress:"0.00",speed:0}),S.data=c(c({},this.data),S.data?S.data:{}),S.headers=c(c({},this.headers),S.headers?S.headers:{})),S.id||(S.id=this.newId()),!this.emitFilter(S,void 0)&&(this.iMaximum>1&&b.length+this.files.length>=this.iMaximum||(b.push(S),this.iMaximum===1)))break}if(b.length){this.iMaximum===1&&this.clear();var B;if(_===!0||_===0)B=b.concat(this.files);else if(_){var V;B=this.files.concat([]),(V=B).splice.apply(V,[_,0].concat(i(b)))}else B=this.files.concat(b);this.files=B;var P=0;_===!0||_===0?P=0:_?_>=0?_+b.length>this.files.length?P=this.files.length-b.length:P=_:(P=this.files.length-b.length+_,P<0&&(P=0)):P=this.files.length-b.length,b=this.files.slice(P,P+b.length);for(var X=0;X<b.length;X++){var H=b[X];this.maps[H.id]=H}this.emitInput();for(var J=0;J<b.length;J++)this.emitFile(b[J],void 0);return m instanceof Array?b:b[0]}},addInputFile:function(m){var _=this,p=[];this.iMaximum;var b=m.webkitEntries||m.entries||void 0;if(b!=null&&b.length)return this.getFileSystemEntry(b).then(function(B){return _.add(B)});if(m.files)for(var k=0;k<m.files.length;k++){var S=m.files[k];p.push({id:"",size:S.size,name:S.webkitRelativePath||S.relativePath||S.name,type:S.type,file:S})}else{var O=m.value.replace(/\\/g,"/").split("/");(!O||!O.length)&&(O=[m.value]),delete m.__vuex__,p.push({id:"",name:O[O.length-1],el:m})}return Promise.resolve(this.add(p))},addDataTransfer:function(m){var _,p=this;if(m!=null&&(_=m.items)!==null&&_!==void 0&&_.length){for(var b=[],k=0;k<m.items.length;k++){var S=m.items[k],O=void 0;S.getAsEntry?O=S.getAsEntry()||S.getAsFile():S.webkitGetAsEntry?O=S.webkitGetAsEntry()||S.getAsFile():O=S.getAsFile(),O&&b.push(O)}return this.getFileSystemEntry(b).then(function(X){return p.add(X)})}var B=this.iMaximum,V=[];if(m.files.length){for(var P=0;P<m.files.length&&(V.push(m.files[P]),!(B>0&&V.length>=B));P++);return Promise.resolve(this.add(V))}return Promise.resolve([])},getFileSystemEntry:function(m){var _=this,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(b){var k=_.iMaximum;if(!m){b([]);return}if(m instanceof Array){var S=[],O=function J(ye){var Se=m[ye];if(!Se||k>0&&S.length>=k)return b(S);_.getFileSystemEntry(Se,p).then(function(se){S.push.apply(S,i(se)),J(ye+1)})};O(0);return}if(m instanceof Blob){b([{id:"",size:m.size,name:p+m.name,type:m.type,file:m}]);return}if(m.isFile){var B=m;B.file(function(J){b([{id:"",size:J.size,name:p+J.name,type:J.type,file:J}])});return}if(m.isDirectory&&_.dropDirectory){var V=m,P=[];_.createDirectory&&P.push({id:"",name:p+V.name,size:0,type:"text/directory",file:new File([],p+V.name,{type:"text/directory"})});var X=V.createReader(),H=function J(){X.readEntries(function(ye){var Se=function se(Ce){if(!ye[Ce]&&Ce===0||k>0&&P.length>=k)return b(P);if(!ye[Ce])return J();_.getFileSystemEntry(ye[Ce],p+V.name+"/").then(function(Ve){P.push.apply(P,i(Ve)),se(Ce+1)})};Se(0)})};H();return}b([])})},replace:function(m,_){var p=this.get(m),b=this.get(_);if(!p||!b||p===b)return!1;var k=this.files.concat([]),S=k.indexOf(p),O=k.indexOf(b);return S===-1||O===-1?!1:(k[S]=b,k[O]=p,this.files=k,this.emitInput(),!0)},remove:function(m){var _=this.get(m);if(_){if(this.emitFilter(void 0,_))return!1;var p=this.files.concat([]),b=p.indexOf(_);if(b===-1)return console.error("remove",_),!1;p.splice(b,1),this.files=p,delete this.maps[_.id],this.emitInput(),this.emitFile(void 0,_)}return _},update:function(m,_){var p=this.get(m);if(p){var b=c(c({},p),_);if(p.fileObject&&p.active&&!b.active&&!b.error&&!b.success&&(b.error="abort"),this.emitFilter(b,p))return!1;var k=this.files.concat([]),S=k.indexOf(p);return S===-1?(console.error("update",p),!1):(k.splice(S,1,b),this.files=k,b=this.files[S],delete this.maps[p.id],this.maps[b.id]=b,this.emitInput(),this.emitFile(b,p),b)}return!1},emitFilter:function(m,_){var p=!1;return this.$emit("input-filter",m,_,function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return p=b,p}),p},emitFile:function(m,_){var p,b=this;this.$emit("input-file",m,_),(p=m)!==null&&p!==void 0&&p.fileObject&&m.active&&(!_||!_.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){m&&b.upload(m).then(function(){var k;m&&(m=b.get(m)||void 0),(k=m)!==null&&k!==void 0&&k.fileObject&&b.update(m,{active:!1,success:!m.error})}).catch(function(k){m&&b.update(m,{active:!1,success:!1,error:k.code||k.error||k.message||k})})},Math.ceil(Math.random()*50+50))})):(!m||!m.fileObject||!m.active)&&_&&_.fileObject&&_.active&&this.uploading--,this.active&&(!!m!=!!_||m.active!==_.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(m){var _=this.get(m);if(!_)return Promise.reject(new Error("not_exists"));if(!_.fileObject)return Promise.reject(new Error("file_object"));if(_.error)return _.error instanceof Error?Promise.reject(_.error):Promise.reject(new Error(_.error));if(_.success)return Promise.resolve(_);if(_.name&&this.iExtensions&&_.type!=="text/directory"&&_.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&_.size!==void 0&&_.size>=0&&_.size>this.size&&_.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(_,this);if(this.features.html5){if(this.shouldUseChunkUpload(_))return this.uploadChunk(_);if(_.putAction)return this.uploadPut(_);if(_.postAction)return this.uploadHtml5(_)}return _.postAction?this.uploadHtml4(_):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(m){return this.chunkEnabled&&!!this.chunkOptions.handler&&m.size&&m.size>this.chunkOptions.minSize},uploadChunk:function(m){var _=this.chunkOptions.handler;return m.chunk=new _(m,this.chunkOptions),m.chunk.upload().then(function(p){return m})},uploadPut:function(m){var _=[],p;for(var b in m.data)p=m.data[b],p!=null&&_.push(encodeURIComponent(b)+"="+encodeURIComponent(p));var k=m.putAction||"",S=_.length?(k.indexOf("?")===-1?"?":"&")+_.join("&"):"",O=new XMLHttpRequest;return O.open("PUT",k+S),this.uploadXhr(O,m,m.file)},uploadHtml5:function(m){var _=new window.FormData,p;for(var b in m.data)p=m.data[b],p&&d(p)==="object"&&typeof p.toString!="function"?p instanceof File?_.append(b,p,p.name):_.append(b,JSON.stringify(p)):p!=null&&_.append(b,p);_.append(this.name,m.file,m.name||m.file.name||m.file.filename);var k=new XMLHttpRequest;return k.open("POST",m.postAction||""),this.uploadXhr(k,m,_)},uploadXhr:function(m,_,p){var b=this,k=_,S=0,O=0;m.upload.onprogress=function(V){if(k&&(k=b.get(k),!(!V.lengthComputable||!k||!k.fileObject||!k.active))){var P=Math.round(Date.now()/1e3);P!==S&&(S=P,k=b.update(k,{progress:(V.loaded/V.total*100).toFixed(2),speed:V.loaded-O}),O=V.loaded)}};var B=window.setInterval(function(){if(k&&(k=b.get(k))){var V;if((V=k)!==null&&V!==void 0&&V.fileObject&&!k.success&&!k.error&&k.active)return}B&&(clearInterval(B),B=void 0);try{m.abort(),m.timeout=1}catch{}},100);return new Promise(function(V,P){if(!k){P(new Error("not_exists"));return}var X,H=function(Se){if(!X){if(X=!0,B&&(clearInterval(B),B=void 0),!k)return P(new Error("not_exists"));if(k=b.get(k),!k)return P(new Error("not_exists"));if(!k.fileObject)return P(new Error("file_object"));if(k.error)return k.error instanceof Error?P(k.error):P(new Error(k.error));if(!k.active)return P(new Error("abort"));if(k.success)return V(k);var se={};switch(Se.type){case"timeout":case"abort":se.error=Se.type;break;case"error":m.status?m.status>=500?se.error="server":m.status>=400&&(se.error="denied"):se.error="network";break;default:m.status>=500?se.error="server":m.status>=400?se.error="denied":se.progress="100.00"}if(m.responseText){var Ce=m.getResponseHeader("Content-Type");Ce&&Ce.indexOf("/json")!==-1?se.response=JSON.parse(m.responseText):se.response=m.responseText}return k=b.update(k,se),k?k.error?k.error instanceof Error?P(k.error):P(new Error(k.error)):V(k):P(new Error("abort"))}};m.onload=H,m.onerror=H,m.onabort=H,m.ontimeout=H,k.timeout&&(m.timeout=k.timeout);for(var J in k.headers)m.setRequestHeader(J,k.headers[J]);k=b.update(k,{xhr:m}),k&&m.send(p)})},uploadHtml4:function(m){var _=this,p=m;if(!p)return Promise.reject(new Error("not_exists"));var b=function(H){H.keyCode===27&&H.preventDefault()},k=document.createElement("iframe");k.id="upload-iframe-"+p.id,k.name="upload-iframe-"+p.id,k.src="about:blank",k.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var S=document.createElement("form");S.setAttribute("action",p.postAction||""),S.name="upload-form-"+p.id,S.setAttribute("method","POST"),S.setAttribute("target","upload-iframe-"+p.id),S.setAttribute("enctype","multipart/form-data");for(var O in p.data){var B=p.data[O];if(B&&d(B)==="object"&&typeof B.toString!="function"&&(B=JSON.stringify(B)),B!=null){var V=document.createElement("input");V.type="hidden",V.name=O,V.value=B,S.appendChild(V)}}S.appendChild(p.el),document.body.appendChild(k).appendChild(S);var P=function(){var H,J;try{k.contentWindow&&(J=k.contentWindow.document)}catch{}if(!J)try{J=k.contentDocument?k.contentDocument:k.document}catch{J=k.document}return(H=J)!==null&&H!==void 0&&H.body?J.body.innerHTML:null};return new Promise(function(X,H){setTimeout(function(){if(!p){H(new Error("not_exists"));return}if(p=_.update(p,{iframe:k}),!p)return H(new Error("not_exists"));var J=window.setInterval(function(){p&&(p=_.get(p))&&p.fileObject&&!p.success&&!p.error&&p.active||(J&&(clearInterval(J),J=void 0),k.onabort({type:p?"abort":"not_exists"}))},100),ye,Se=function(Ce){var Ve;if(!ye){if(ye=!0,J&&(clearInterval(J),J=void 0),document.body.removeEventListener("keydown",b),!p)return H(new Error("not_exists"));if(p=_.get(p),!p)return H(new Error("not_exists"));if(!p.fileObject)return H(new Error("file_object"));if(p.error)return p.error instanceof Error?H(p.error):H(new Error(p.error));if(!p.active)return H(new Error("abort"));if(p.success)return X(p);var W=P(),A={};if(typeof Ce=="string")return H(new Error(Ce));switch(Ce.type){case"abort":A.error="abort";break;case"error":p.error?A.error=p.error:W===null?A.error="network":A.error="denied";break;default:p.error?A.error=p.error:W===null?A.error="network":A.progress="100.00"}if(W!==null){if(W&&W.substr(0,1)==="{"&&W.substr(W.length-1,1)==="}")try{W=JSON.parse(W)}catch{}A.response=W}return p=_.update(p,A),p?(Ve=p)!==null&&Ve!==void 0&&Ve.error?p.error instanceof Error?H(p.error):H(new Error(p.error)):X(p):H(new Error("not_exists"))}};k.onload=Se,k.onerror=Se,k.onabort=Se,document.body.addEventListener("keydown",b),S.submit()},50)}).then(function(X){var H;return k==null||(H=k.parentNode)===null||H===void 0||H.removeChild(k),X}).catch(function(X){var H;return k==null||(H=k.parentNode)===null||H===void 0||H.removeChild(k),X})},watchActive:function(m){for(var _,p=0;_=this.files[p];)if(p++,_.fileObject)if(m&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!_.active&&!_.error&&!_.success&&this.update(_,{active:!0})}else _.active&&this.update(_,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&m!==_){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragenter",this.onDragenter,!1),this.dropElement.removeEventListener("dragleave",this.onDragleave,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var p=null;if(m)if(typeof m=="string")p=document.querySelector(m)||this.$root.$el.querySelector(m);else if(m===!0){var b;if(p=this.$parent.$el,!p||((b=p)===null||b===void 0?void 0:b.nodeType)===8){var k;p=this.$root.$el,(!p||((k=p)===null||k===void 0?void 0:k.nodeType)===8)&&(p=document.body)}}else p=m;this.dropElement=p,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragenter",this.onDragenter,!1),this.dropElement.addEventListener("dragleave",this.onDragleave,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(m,_){m!==_&&(!m&&this.dropElementActive&&(this.dropElementActive=!1),this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),m&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(m){var _,p;if(!this.dropActive&&m.dataTransfer){var b=m.dataTransfer;b!=null&&(_=b.files)!==null&&_!==void 0&&_.length?this.dropActive=!0:b.types?b.types.indexOf&&b.types.indexOf("Files")!==-1?this.dropActive=!0:(p=b.types)!==null&&p!==void 0&&p.contains&&b.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(m){this.dropActive&&(m.target===m.explicitOriginalTarget||!m.fromElement&&(m.clientX<=0||m.clientY<=0||m.clientX>=window.innerWidth||m.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragenter:function(m){!this.dropActive||this.dropElementActive||(this.dropElementActive=!0)},onDragleave:function(m){var _;if(this.dropElementActive){var p=m.relatedTarget;if(!p)this.dropElementActive=!1;else if((_=this.dropElement)!==null&&_!==void 0&&_.contains)this.dropElement.contains(p)||(this.dropElementActive=!1);else{for(var b=p;b&&b!==this.dropElement;)b=b.parentNode;b!==this.dropElement&&(this.dropElementActive=!1)}}},onDragover:function(m){m.preventDefault()},onDrop:function(m){m.preventDefault(),m.dataTransfer&&this.addDataTransfer(m.dataTransfer)},inputOnChange:async function(m){var _=this;if(!(m.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));m.target;var p=function(k){return _.reload=!0,_.$nextTick(function(){_.reload=!1}),k};return this.addInputFile(m.target).then(p).catch(p)},isRelatedTargetSupported:function(){try{var m=new MouseEvent("mouseout",{relatedTarget:document.body});return"relatedTarget"in m}catch{return!1}}}}),re=["for"],Te=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function Dt(D,m,_,p,b,k){return n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(D.className)},[n.renderSlot(D.$slots,"default"),n.createElementVNode("label",{for:D.forId},null,8,re),D.reload?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("input",{key:0,ref:"input",type:"file",name:D.name,id:D.forId,accept:D.accept,capture:D.capture,disabled:D.disabled,webkitdirectory:D.iDirectory,allowdirs:D.iDirectory,directory:D.iDirectory,multiple:D.multiple&&D.features.html5,onChange:m[0]||(m[0]=function(){return D.inputOnChange&&D.inputOnChange.apply(D,arguments)})},null,40,Te))],2)}function zt(D,m){m===void 0&&(m={});var _=m.insertAt;if(!(typeof document>"u")){var p=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",_==="top"&&p.firstChild?p.insertBefore(b,p.firstChild):p.appendChild(b),b.styleSheet?b.styleSheet.cssText=D:b.appendChild(document.createTextNode(D))}}var Pt=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  position: absolute;
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return zt(Pt),$.render=Dt,$})})(Jl);var $1=Jl.exports;const b_=uc($1);var Rr={exports:{}};(function(t,e){(function(n,i){i(e)})(Qu,function(n){function i(p,b){return b={exports:{}},p(b,b.exports),b.exports}var r=i(function(p,b){(function(k){p.exports=k()})(function(k){var S=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function O(A,E){var x=A[0],y=A[1],C=A[2],j=A[3];x+=(y&C|~y&j)+E[0]-680876936|0,x=(x<<7|x>>>25)+y|0,j+=(x&y|~x&C)+E[1]-389564586|0,j=(j<<12|j>>>20)+x|0,C+=(j&x|~j&y)+E[2]+606105819|0,C=(C<<17|C>>>15)+j|0,y+=(C&j|~C&x)+E[3]-1044525330|0,y=(y<<22|y>>>10)+C|0,x+=(y&C|~y&j)+E[4]-176418897|0,x=(x<<7|x>>>25)+y|0,j+=(x&y|~x&C)+E[5]+1200080426|0,j=(j<<12|j>>>20)+x|0,C+=(j&x|~j&y)+E[6]-1473231341|0,C=(C<<17|C>>>15)+j|0,y+=(C&j|~C&x)+E[7]-45705983|0,y=(y<<22|y>>>10)+C|0,x+=(y&C|~y&j)+E[8]+1770035416|0,x=(x<<7|x>>>25)+y|0,j+=(x&y|~x&C)+E[9]-1958414417|0,j=(j<<12|j>>>20)+x|0,C+=(j&x|~j&y)+E[10]-42063|0,C=(C<<17|C>>>15)+j|0,y+=(C&j|~C&x)+E[11]-1990404162|0,y=(y<<22|y>>>10)+C|0,x+=(y&C|~y&j)+E[12]+1804603682|0,x=(x<<7|x>>>25)+y|0,j+=(x&y|~x&C)+E[13]-40341101|0,j=(j<<12|j>>>20)+x|0,C+=(j&x|~j&y)+E[14]-1502002290|0,C=(C<<17|C>>>15)+j|0,y+=(C&j|~C&x)+E[15]+1236535329|0,y=(y<<22|y>>>10)+C|0,x+=(y&j|C&~j)+E[1]-165796510|0,x=(x<<5|x>>>27)+y|0,j+=(x&C|y&~C)+E[6]-1069501632|0,j=(j<<9|j>>>23)+x|0,C+=(j&y|x&~y)+E[11]+643717713|0,C=(C<<14|C>>>18)+j|0,y+=(C&x|j&~x)+E[0]-373897302|0,y=(y<<20|y>>>12)+C|0,x+=(y&j|C&~j)+E[5]-701558691|0,x=(x<<5|x>>>27)+y|0,j+=(x&C|y&~C)+E[10]+38016083|0,j=(j<<9|j>>>23)+x|0,C+=(j&y|x&~y)+E[15]-660478335|0,C=(C<<14|C>>>18)+j|0,y+=(C&x|j&~x)+E[4]-405537848|0,y=(y<<20|y>>>12)+C|0,x+=(y&j|C&~j)+E[9]+568446438|0,x=(x<<5|x>>>27)+y|0,j+=(x&C|y&~C)+E[14]-1019803690|0,j=(j<<9|j>>>23)+x|0,C+=(j&y|x&~y)+E[3]-187363961|0,C=(C<<14|C>>>18)+j|0,y+=(C&x|j&~x)+E[8]+1163531501|0,y=(y<<20|y>>>12)+C|0,x+=(y&j|C&~j)+E[13]-1444681467|0,x=(x<<5|x>>>27)+y|0,j+=(x&C|y&~C)+E[2]-51403784|0,j=(j<<9|j>>>23)+x|0,C+=(j&y|x&~y)+E[7]+1735328473|0,C=(C<<14|C>>>18)+j|0,y+=(C&x|j&~x)+E[12]-1926607734|0,y=(y<<20|y>>>12)+C|0,x+=(y^C^j)+E[5]-378558|0,x=(x<<4|x>>>28)+y|0,j+=(x^y^C)+E[8]-2022574463|0,j=(j<<11|j>>>21)+x|0,C+=(j^x^y)+E[11]+1839030562|0,C=(C<<16|C>>>16)+j|0,y+=(C^j^x)+E[14]-35309556|0,y=(y<<23|y>>>9)+C|0,x+=(y^C^j)+E[1]-1530992060|0,x=(x<<4|x>>>28)+y|0,j+=(x^y^C)+E[4]+1272893353|0,j=(j<<11|j>>>21)+x|0,C+=(j^x^y)+E[7]-155497632|0,C=(C<<16|C>>>16)+j|0,y+=(C^j^x)+E[10]-1094730640|0,y=(y<<23|y>>>9)+C|0,x+=(y^C^j)+E[13]+681279174|0,x=(x<<4|x>>>28)+y|0,j+=(x^y^C)+E[0]-358537222|0,j=(j<<11|j>>>21)+x|0,C+=(j^x^y)+E[3]-722521979|0,C=(C<<16|C>>>16)+j|0,y+=(C^j^x)+E[6]+76029189|0,y=(y<<23|y>>>9)+C|0,x+=(y^C^j)+E[9]-640364487|0,x=(x<<4|x>>>28)+y|0,j+=(x^y^C)+E[12]-421815835|0,j=(j<<11|j>>>21)+x|0,C+=(j^x^y)+E[15]+530742520|0,C=(C<<16|C>>>16)+j|0,y+=(C^j^x)+E[2]-995338651|0,y=(y<<23|y>>>9)+C|0,x+=(C^(y|~j))+E[0]-198630844|0,x=(x<<6|x>>>26)+y|0,j+=(y^(x|~C))+E[7]+1126891415|0,j=(j<<10|j>>>22)+x|0,C+=(x^(j|~y))+E[14]-1416354905|0,C=(C<<15|C>>>17)+j|0,y+=(j^(C|~x))+E[5]-57434055|0,y=(y<<21|y>>>11)+C|0,x+=(C^(y|~j))+E[12]+1700485571|0,x=(x<<6|x>>>26)+y|0,j+=(y^(x|~C))+E[3]-1894986606|0,j=(j<<10|j>>>22)+x|0,C+=(x^(j|~y))+E[10]-1051523|0,C=(C<<15|C>>>17)+j|0,y+=(j^(C|~x))+E[1]-2054922799|0,y=(y<<21|y>>>11)+C|0,x+=(C^(y|~j))+E[8]+1873313359|0,x=(x<<6|x>>>26)+y|0,j+=(y^(x|~C))+E[15]-30611744|0,j=(j<<10|j>>>22)+x|0,C+=(x^(j|~y))+E[6]-1560198380|0,C=(C<<15|C>>>17)+j|0,y+=(j^(C|~x))+E[13]+1309151649|0,y=(y<<21|y>>>11)+C|0,x+=(C^(y|~j))+E[4]-145523070|0,x=(x<<6|x>>>26)+y|0,j+=(y^(x|~C))+E[11]-1120210379|0,j=(j<<10|j>>>22)+x|0,C+=(x^(j|~y))+E[2]+718787259|0,C=(C<<15|C>>>17)+j|0,y+=(j^(C|~x))+E[9]-343485551|0,y=(y<<21|y>>>11)+C|0,A[0]=x+A[0]|0,A[1]=y+A[1]|0,A[2]=C+A[2]|0,A[3]=j+A[3]|0}function B(A){var E=[],x;for(x=0;x<64;x+=4)E[x>>2]=A.charCodeAt(x)+(A.charCodeAt(x+1)<<8)+(A.charCodeAt(x+2)<<16)+(A.charCodeAt(x+3)<<24);return E}function V(A){var E=[],x;for(x=0;x<64;x+=4)E[x>>2]=A[x]+(A[x+1]<<8)+(A[x+2]<<16)+(A[x+3]<<24);return E}function P(A){var E=A.length,x=[1732584193,-271733879,-1732584194,271733878],y,C,j,ke,Qe,ut;for(y=64;y<=E;y+=64)O(x,B(A.substring(y-64,y)));for(A=A.substring(y-64),C=A.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0;y<C;y+=1)j[y>>2]|=A.charCodeAt(y)<<(y%4<<3);if(j[y>>2]|=128<<(y%4<<3),y>55)for(O(x,j),y=0;y<16;y+=1)j[y]=0;return ke=E*8,ke=ke.toString(16).match(/(.*?)(.{0,8})$/),Qe=parseInt(ke[2],16),ut=parseInt(ke[1],16)||0,j[14]=Qe,j[15]=ut,O(x,j),x}function X(A){var E=A.length,x=[1732584193,-271733879,-1732584194,271733878],y,C,j,ke,Qe,ut;for(y=64;y<=E;y+=64)O(x,V(A.subarray(y-64,y)));for(A=y-64<E?A.subarray(y-64):new Uint8Array(0),C=A.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0;y<C;y+=1)j[y>>2]|=A[y]<<(y%4<<3);if(j[y>>2]|=128<<(y%4<<3),y>55)for(O(x,j),y=0;y<16;y+=1)j[y]=0;return ke=E*8,ke=ke.toString(16).match(/(.*?)(.{0,8})$/),Qe=parseInt(ke[2],16),ut=parseInt(ke[1],16)||0,j[14]=Qe,j[15]=ut,O(x,j),x}function H(A){var E="",x;for(x=0;x<4;x+=1)E+=S[A>>x*8+4&15]+S[A>>x*8&15];return E}function J(A){var E;for(E=0;E<A.length;E+=1)A[E]=H(A[E]);return A.join("")}J(P("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function A(E,x){return E=E|0||0,E<0?Math.max(E+x,0):Math.min(E,x)}ArrayBuffer.prototype.slice=function(E,x){var y=this.byteLength,C=A(E,y),j=y,ke,Qe,ut,co;return x!==k&&(j=A(x,y)),C>j?new ArrayBuffer(0):(ke=j-C,Qe=new ArrayBuffer(ke),ut=new Uint8Array(Qe),co=new Uint8Array(this,C,ke),ut.set(co),Qe)}}();function ye(A){return/[\u0080-\uFFFF]/.test(A)&&(A=unescape(encodeURIComponent(A))),A}function Se(A,E){var x=A.length,y=new ArrayBuffer(x),C=new Uint8Array(y),j;for(j=0;j<x;j+=1)C[j]=A.charCodeAt(j);return E?C:y}function se(A){return String.fromCharCode.apply(null,new Uint8Array(A))}function Ce(A,E,x){var y=new Uint8Array(A.byteLength+E.byteLength);return y.set(new Uint8Array(A)),y.set(new Uint8Array(E),A.byteLength),y}function Ve(A){var E=[],x=A.length,y;for(y=0;y<x-1;y+=2)E.push(parseInt(A.substr(y,2),16));return String.fromCharCode.apply(String,E)}function W(){this.reset()}return W.prototype.append=function(A){return this.appendBinary(ye(A)),this},W.prototype.appendBinary=function(A){this._buff+=A,this._length+=A.length;var E=this._buff.length,x;for(x=64;x<=E;x+=64)O(this._hash,B(this._buff.substring(x-64,x)));return this._buff=this._buff.substring(x-64),this},W.prototype.end=function(A){var E=this._buff,x=E.length,y,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j;for(y=0;y<x;y+=1)C[y>>2]|=E.charCodeAt(y)<<(y%4<<3);return this._finish(C,x),j=J(this._hash),A&&(j=Ve(j)),this.reset(),j},W.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},W.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},W.prototype.setState=function(A){return this._buff=A.buff,this._length=A.length,this._hash=A.hash,this},W.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},W.prototype._finish=function(A,E){var x=E,y,C,j;if(A[x>>2]|=128<<(x%4<<3),x>55)for(O(this._hash,A),x=0;x<16;x+=1)A[x]=0;y=this._length*8,y=y.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(y[2],16),j=parseInt(y[1],16)||0,A[14]=C,A[15]=j,O(this._hash,A)},W.hash=function(A,E){return W.hashBinary(ye(A),E)},W.hashBinary=function(A,E){var x=P(A),y=J(x);return E?Ve(y):y},W.ArrayBuffer=function(){this.reset()},W.ArrayBuffer.prototype.append=function(A){var E=Ce(this._buff.buffer,A),x=E.length,y;for(this._length+=A.byteLength,y=64;y<=x;y+=64)O(this._hash,V(E.subarray(y-64,y)));return this._buff=y-64<x?new Uint8Array(E.buffer.slice(y-64)):new Uint8Array(0),this},W.ArrayBuffer.prototype.end=function(A){var E=this._buff,x=E.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C,j;for(C=0;C<x;C+=1)y[C>>2]|=E[C]<<(C%4<<3);return this._finish(y,x),j=J(this._hash),A&&(j=Ve(j)),this.reset(),j},W.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},W.ArrayBuffer.prototype.getState=function(){var A=W.prototype.getState.call(this);return A.buff=se(A.buff),A},W.ArrayBuffer.prototype.setState=function(A){return A.buff=Se(A.buff,!0),W.prototype.setState.call(this,A)},W.ArrayBuffer.prototype.destroy=W.prototype.destroy,W.ArrayBuffer.prototype._finish=W.prototype._finish,W.ArrayBuffer.hash=function(A,E){var x=X(new Uint8Array(A)),y=J(x);return E?Ve(y):y},W})}),o=function(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")},u=function(){function p(b,k){for(var S=0;S<k.length;S++){var O=k[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,O.key,O)}}return function(b,k,S){return k&&p(b.prototype,k),S&&p(b,S),b}}(),s=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=function(){u(p,null,[{key:"create",value:function(k,S){var O=new p(k);O.create(S)}}]);function p(b){o(this,p),this.file=b,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return u(p,[{key:"create",value:function(k){var S=this;this.callback=k,this.md5Buffer=new r.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(O){return S.fileReaderDidLoad(O)}),this.fileReader.addEventListener("error",function(O){return S.fileReaderDidError(O)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function(k){if(this.md5Buffer.append(k.target.result),!this.readNextChunk()){var S=this.md5Buffer.end(!0),O=btoa(S);this.callback(null,O)}}},{key:"fileReaderDidError",value:function(k){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){var k=this.chunkIndex*this.chunkSize,S=Math.min(k+this.chunkSize,this.file.size),O=s.call(this.file,k,S);return this.fileReader.readAsArrayBuffer(O),this.chunkIndex++,!0}else return!1}}]),p}();function l(p){var b=f(document.head,'meta[name="'+p+'"]');if(b)return b.getAttribute("content")}function c(p,b){typeof p=="string"&&(b=p,p=document);var k=p.querySelectorAll(b);return g(k)}function f(p,b){return typeof p=="string"&&(b=p,p=document),p.querySelector(b)}function d(p,b){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=p.disabled,O=k.bubbles,B=k.cancelable,V=k.detail,P=document.createEvent("Event");P.initEvent(b,O||!0,B||!0),P.detail=V||{};try{p.disabled=!1,p.dispatchEvent(P)}finally{p.disabled=S}return P}function g(p){return Array.isArray(p)?p:Array.from?Array.from(p):[].slice.call(p)}var h=function(){function p(b,k,S){var O=this;o(this,p),this.file=b,this.attributes={filename:b.name,content_type:b.type,byte_size:b.size,checksum:k},this.xhr=new XMLHttpRequest,this.xhr.open("POST",S,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",l("csrf-token")),this.xhr.addEventListener("load",function(B){return O.requestDidLoad(B)}),this.xhr.addEventListener("error",function(B){return O.requestDidError(B)})}return u(p,[{key:"create",value:function(k){this.callback=k,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function(k){if(this.status>=200&&this.status<300){var S=this.response,O=S.direct_upload;delete S.direct_upload,this.attributes=S,this.directUploadData=O,this.callback(null,this.toJSON())}else this.requestDidError(k)}},{key:"requestDidError",value:function(k){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function(){var k={};for(var S in this.attributes)k[S]=this.attributes[S];return k}},{key:"status",get:function(){return this.xhr.status}},{key:"response",get:function(){var k=this.xhr,S=k.responseType,O=k.response;return S=="json"?O:JSON.parse(O)}}]),p}(),w=function(){function p(b){var k=this;o(this,p),this.blob=b,this.file=b.file;var S=b.directUploadData,O=S.url,B=S.headers;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",O,!0),this.xhr.responseType="text";for(var V in B)this.xhr.setRequestHeader(V,B[V]);this.xhr.addEventListener("load",function(P){return k.requestDidLoad(P)}),this.xhr.addEventListener("error",function(P){return k.requestDidError(P)})}return u(p,[{key:"create",value:function(k){this.callback=k,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function(k){var S=this.xhr,O=S.status,B=S.response;O>=200&&O<300?this.callback(null,B):this.requestDidError(k)}},{key:"requestDidError",value:function(k){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),p}(),v=0,M=function(){function p(b,k,S){o(this,p),this.id=++v,this.file=b,this.url=k,this.delegate=S}return u(p,[{key:"create",value:function(k){var S=this;a.create(this.file,function(O,B){if(O){k(O);return}var V=new h(S.file,B,S.url);N(S.delegate,"directUploadWillCreateBlobWithXHR",V.xhr),V.create(function(P){if(P)k(P);else{var X=new w(V);N(S.delegate,"directUploadWillStoreFileWithXHR",X.xhr),X.create(function(H){H?k(H):k(null,V.toJSON())})}})})}}]),p}();function N(p,b){if(p&&typeof p[b]=="function"){for(var k=arguments.length,S=Array(k>2?k-2:0),O=2;O<k;O++)S[O-2]=arguments[O];return p[b].apply(p,S)}}var I=function(){function p(b,k){o(this,p),this.input=b,this.file=k,this.directUpload=new M(this.file,this.url,this),this.dispatch("initialize")}return u(p,[{key:"start",value:function(k){var S=this,O=document.createElement("input");O.type="hidden",O.name=this.input.name,this.input.insertAdjacentElement("beforebegin",O),this.dispatch("start"),this.directUpload.create(function(B,V){B?(O.parentNode.removeChild(O),S.dispatchError(B)):O.value=V.signed_id,S.dispatch("end"),k(B)})}},{key:"uploadRequestDidProgress",value:function(k){var S=k.loaded/k.total*100;S&&this.dispatch("progress",{progress:S})}},{key:"dispatch",value:function(k){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S.file=this.file,S.id=this.directUpload.id,d(this.input,"direct-upload:"+k,{detail:S})}},{key:"dispatchError",value:function(k){var S=this.dispatch("error",{error:k});S.defaultPrevented||alert(k)}},{key:"directUploadWillCreateBlobWithXHR",value:function(k){this.dispatch("before-blob-request",{xhr:k})}},{key:"directUploadWillStoreFileWithXHR",value:function(k){var S=this;this.dispatch("before-storage-request",{xhr:k}),k.upload.addEventListener("progress",function(O){return S.uploadRequestDidProgress(O)})}},{key:"url",get:function(){return this.input.getAttribute("data-direct-upload-url")}}]),p}(),R="input[type=file][data-direct-upload-url]:not([disabled])",L=function(){function p(b){o(this,p),this.form=b,this.inputs=c(b,R).filter(function(k){return k.files.length})}return u(p,[{key:"start",value:function(k){var S=this,O=this.createDirectUploadControllers(),B=function V(){var P=O.shift();P?P.start(function(X){X?(k(X),S.dispatch("end")):V()}):(k(),S.dispatch("end"))};this.dispatch("start"),B()}},{key:"createDirectUploadControllers",value:function(){var k=[];return this.inputs.forEach(function(S){g(S.files).forEach(function(O){var B=new I(S,O);k.push(B)})}),k}},{key:"dispatch",value:function(k){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d(this.form,"direct-uploads:"+k,{detail:S})}}]),p}(),z="data-direct-uploads-processing",G=new WeakMap,ee=!1;function $(){ee||(ee=!0,document.addEventListener("click",re,!0),document.addEventListener("submit",Te),document.addEventListener("ajax:before",Dt))}function re(p){var b=p.target;(b.tagName=="INPUT"||b.tagName=="BUTTON")&&b.type=="submit"&&b.form&&G.set(b.form,b)}function Te(p){zt(p)}function Dt(p){p.target.tagName=="FORM"&&zt(p)}function zt(p){var b=p.target;if(b.hasAttribute(z)){p.preventDefault();return}var k=new L(b),S=k.inputs;S.length&&(p.preventDefault(),b.setAttribute(z,""),S.forEach(D),k.start(function(O){b.removeAttribute(z),O?S.forEach(m):Pt(b)}))}function Pt(p){var b=G.get(p)||f(p,"input[type=submit], button[type=submit]");if(b){var k=b,S=k.disabled;b.disabled=!1,b.focus(),b.click(),b.disabled=S}else b=document.createElement("input"),b.type="submit",b.style.display="none",p.appendChild(b),b.click(),p.removeChild(b);G.delete(p)}function D(p){p.disabled=!0}function m(p){p.disabled=!1}function _(){window.ActiveStorage&&$()}setTimeout(_,1),n.start=$,n.DirectUpload=M,Object.defineProperty(n,"__esModule",{value:!0})})})(Rr,Rr.exports);var y_=Rr.exports;const V1="https://app.dyte.io/v2/meeting",k_=t=>`${V1}?authToken=${t}&showSetupScreen=true&disableVideoBackground=true`,x_="/vite-dev/assets/typing-DYm07fFx.gif";export{m_ as A,p_ as B,g_ as C,ne as D,mn as E,c_ as F,b_ as G,y_ as H,i_ as I,k_ as J,e_ as K,Q1 as L,El as M,t_ as N,Ct as P,__ as R,U as S,x_ as _,dc as a,hc as b,Zn as c,lc as d,cc as e,ac as f,I1 as g,Wl as h,yc as i,Ir as j,l_ as k,Rs as l,Ae as m,n_ as n,Hl as o,Y1 as p,a_ as q,sc as r,f_ as s,s_ as t,o_ as u,r_ as v,N1 as w,u_ as x,d_ as y,h_ as z};
